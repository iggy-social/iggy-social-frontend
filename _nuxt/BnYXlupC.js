import{_ as W,W as N,j as x,i as H,z as I,$ as P,c as p,o as l,a as o,t as d,d as O,p as B,v as S,g as h,a0 as D,Q as c,s as E,m as R,Z as j,a1 as Y,a2 as z,S as K,C as Q,a3 as X,y as Z,r as C,F as M,R as L,f as U,b as _,w as V,T as q,M as G,H as J}from"#entry";import{t as $}from"./RD6MkrwO.js";const tt={name:"TokenApprovalModal",props:["amount","modalId","routerAddress","token"],emits:["setApprovalAmount"],components:{WaitingToast:N},data(){return{waiting:!1,selectedOption:"unlimited",approvalAmount:0}},mounted(){this.approvalAmount=this.amount},computed:{isUnlimited(){return this.selectedOption==="unlimited"}},methods:{selectOption(n){this.selectedOption=n},async approveToken(){this.waiting=!0;let n=this.approvalAmount;this.isUnlimited&&(n=1e16);const e=I(String(n),this.token.decimals),i={address:this.token.address,abi:P,functionName:"approve",args:[this.routerAddress,e]};let a;try{const s=await this.writeData(i);a=this.toast({component:N,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+s,"_blank").focus()});const t=await this.waitForTxReceipt(s);t.status==="success"?(this.toast.dismiss(a),this.toast("You have successfully approved "+this.token.symbol+"!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+s,"_blank").focus()}),this.$emit("setApprovalAmount",n),this.waiting=!1,document.getElementById("closeTokenApprovalModal"+this.modalId).click()):(this.waiting=!1,this.toast.dismiss(a),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+s,"_blank").focus()}),console.log(t))}catch(s){try{let t=s.message.split("Details:")[1];t=t.split("Version: viem")[0],t=t.replace(/"/g,""),t=t.replace("execution reverted:","Error:"),console.log(t),this.toast(t,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1}finally{this.toast.dismiss(a),this.waiting=!1;return}}},setup(){const{writeData:n,waitForTxReceipt:e}=x(),i=H();return{writeData:n,waitForTxReceipt:e,toast:i}},watch:{amount(n,e){n&&(this.approvalAmount=this.amount)}}},et=["id","aria-labelledby"],nt={class:"modal-dialog"},ot={class:"modal-content"},st={class:"modal-header"},it=["id"],at=["id"],ut={class:"modal-body"},rt={class:"row mt-3"},lt={class:"col-lg-8"},dt={class:"input-group-text"},pt=["checked"],ct={class:"input-group-text"},mt=["checked"],ht=["disabled"],kt={class:"input-group-text",id:"basic-addon2"},bt={class:"modal-footer"},Tt=["disabled"],ft={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},gt={key:1},yt={key:2};function wt(n,e,i,a,s,t){return l(),p("div",{class:"modal fade",id:"tokenApprovalModal"+i.modalId,tabindex:"-1","aria-labelledby":"tokenApprovalModalLabel"+i.modalId,"aria-hidden":"true"},[o("div",nt,[o("div",ot,[o("div",st,[o("h1",{class:"modal-title fs-5",id:"tokenApprovalModalLabel"+i.modalId},"Approve "+d(i.token?.symbol)+" token",9,it),o("button",{id:"closeTokenApprovalModal"+i.modalId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,at)]),o("div",ut,[O(" Approve "+d(i.token?.symbol)+" tokens for swapping: ",1),o("div",rt,[o("div",lt,[o("div",{class:"input-group",onClick:e[0]||(e[0]=r=>t.selectOption("unlimited"))},[o("div",dt,[o("input",{class:"form-check-input mt-0",type:"radio",checked:t.isUnlimited},null,8,pt)]),e[4]||(e[4]=o("input",{value:"Unlimited",type:"text",class:"form-control",disabled:""},null,-1))]),o("div",{class:"input-group mt-2",onClick:e[2]||(e[2]=r=>t.selectOption("limited"))},[o("div",ct,[o("input",{class:"form-check-input mt-0",type:"radio",checked:!t.isUnlimited},null,8,mt)]),B(o("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.approvalAmount=r),type:"text",class:"form-control",disabled:s.waiting},null,8,ht),[[S,s.approvalAmount]]),o("span",kt,d(i.token?.symbol),1)])])]),e[5]||(e[5]=o("p",{class:"mt-3"},[o("small",null,[o("em",null," If you want to do more swaps without approvals, set a big enough amount or choose unlimited. ")])],-1))]),o("div",bt,[o("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=(...r)=>t.approveToken&&t.approveToken(...r)),disabled:s.waiting},[s.waiting?(l(),p("span",ft)):h("",!0),t.isUnlimited?(l(),p("span",gt,"Approve unlimited")):h("",!0),t.isUnlimited?h("",!0):(l(),p("span",yt,"Approve "+d(s.approvalAmount)+" "+d(i.token?.symbol),1))],8,Tt)])])])],8,et)}const At=W(tt,[["render",wt]]),f={1:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",10:"0x4200000000000000000000000000000000000006",14:"0x1d80c49bbbcd1c0911346656b529df9e5c2f783d",19:"0x02f0826ef6aD107Cfc861152B32B52fD11BaB9ED",56:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",100:"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",137:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270",250:"0x21be370d5312f44cb42ce377bc9b8a0cef1a4c83",324:"0x5aea5775959fbc2557cc8789bc1bf90a239d9a91",1101:"0x4f9a0e7fd2bf6067db6994cf12e4495df938e6e9",42161:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",43114:"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7",421614:"0xce314209aB485bE222CE85F653Ac918f54532503",11155111:"0xf531B8F309Be94191af87605CfBf600D71C2cFe0"};async function _t(n,e,i,a){const{readData:s}=x(),t=[{name:"getPriceImpact",type:"function",stateMutability:"view",inputs:[{name:"tokenIn",type:"address"},{name:"tokenOut",type:"address"},{name:"amountIn",type:"uint256"}],outputs:[{name:"impact",type:"uint256"}]}],r=I(i,n.decimals),T={address:a,abi:t,functionName:"getPriceImpact",args:[n.address,e.address,r]},k=await s(T);return k?Number(k):(console.warn("Price impact read returned null, returning 0"),0)}async function vt(n,e,i,a){const s=D(),{readData:t}=x(),r=I(i,n.decimals);let T=[n.address,e.address];const k=f[String(s.public.supportedChainId)];if(n.address!==c&&n.address!==k&&e.address!==c&&e.address!==k&&(T=[n.address,k,e.address]),(n.address===c||n.address===k)&&(e.address===c||e.address===k))return r;const m=await t({address:a,abi:[{name:"getAmountsOut",type:"function",stateMutability:"view",inputs:[{name:"amountIn",type:"uint256"},{name:"path",type:"address[]"}],outputs:[{name:"amounts",type:"uint256[]"}]}],functionName:"getAmountsOut",args:[r,T]});return!m||m.length===0?(console.warn("Output amounts read returned null or empty array, returning 0"),BigInt(0)):m[m.length-1]}async function Ct(n,e,i,a,s,t,r){const T=D(),{swapDeadline:k}=E(),{writeData:b}=x(),u=BigInt(Math.floor(Date.now()/1e3)+60*Number(k.value)),m=String(f[String(T.public.supportedChainId)]).toLowerCase(),g=String(e.address).toLowerCase(),y=String(i.address).toLowerCase(),F=[{name:"deposit",type:"function",stateMutability:"payable",inputs:[],outputs:[]},{name:"withdraw",type:"function",stateMutability:"nonpayable",inputs:[{name:"wad",type:"uint256"}],outputs:[]}];if(g===c&&y===m)return b({address:m,abi:F,functionName:"deposit",value:a});if(g===m&&y===c)return b({address:m,abi:F,functionName:"withdraw",args:[a]});{const w=[{name:"swapExactTokensForTokens",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForTokensWithReferrer",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactETHForTokens",type:"function",stateMutability:"payable",inputs:[{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactETHForTokensWithReferrer",type:"function",stateMutability:"payable",inputs:[{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForETH",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForETHWithReferrer",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]}];let A=[g,y];return g===c&&y!==m&&y!==c?b(r===c?{address:t,abi:w,functionName:"swapExactETHForTokens",args:[s,A,n,u],value:a}:{address:t,abi:w,functionName:"swapExactETHForTokensWithReferrer",args:[s,A,n,u,r],value:a}):g!==c&&g!==m&&y===c?b(r===c?{address:t,abi:w,functionName:"swapExactTokensForETH",args:[a,s,A,n,u]}:{address:t,abi:w,functionName:"swapExactTokensForETHWithReferrer",args:[a,s,A,n,u,r]}):(g!==m&&y!==m&&(A=[g,m,y]),b(r===c?{address:t,abi:w,functionName:"swapExactTokensForTokens",args:[a,s,A,n,u]}:{address:t,abi:w,functionName:"swapExactTokensForTokensWithReferrer",args:[a,s,A,n,u,r]}))}}const xt={name:"UniV2SwapTokensModal",props:["inputToken","inputTokenAmount","modalId","outputToken","outputTokenAmount","outputTokenAmountWei","routerAddress"],emits:["changeInputTokenBalance"],data(){return{waiting:!1}},components:{WaitingToast:N},computed:{bothTokensAreNativeCoinOrWrappedToken(){return!!(this.inputIsNativeCoin&&this.outputIsWrappedNativeCoin||this.inputIsWrappedNativeCoin&&this.outputIsNativeCoin)},inputIsNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(c).toLowerCase()},inputIsWrappedNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(f[this.$config.public.supportedChainId]).toLowerCase()},outputIsNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(c).toLowerCase()},outputIsWrappedNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(f[this.$config.public.supportedChainId]).toLowerCase()}},methods:{async swap(){this.waiting=!0;const n=I(this.inputTokenAmount,this.inputToken?.decimals),e=j(window);let i;try{const a=await Ct(this.address,this.inputToken,this.outputToken,n,this.outputTokenAmountWei,this.routerAddress,e);i=this.toast({component:N,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+a,"_blank").focus()});const s=await this.waitForTxReceipt(a);s.status==="success"?(this.toast.dismiss(i),this.toast("You have successfully swapped "+this.inputToken.symbol+" for "+this.outputToken.symbol+"!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+a,"_blank").focus()}),this.$emit("changeInputTokenBalance"),this.waiting=!1,document.getElementById("closeSwapTokensModal"+this.modalId).click()):(this.waiting=!1,this.toast.dismiss(i),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+a,"_blank").focus()}),console.log(s))}catch(a){try{let s=a.message.split("Details:")[1];s=s.split("Version: viem")[0],s=s.replace(/"/g,""),s=s.replace("execution reverted:","Error:"),console.log(s),this.toast(s,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1;return}finally{this.toast.dismiss(i),this.waiting=!1}this.waiting=!1}},setup(){const{address:n}=R(),{waitForTxReceipt:e}=x(),i=H(),{slippage:a}=E();return{address:n,slippage:a,toast:i,waitForTxReceipt:e}}},It=["id","aria-labelledby"],Bt={class:"modal-dialog"},St={class:"modal-content"},Nt={class:"modal-header"},Wt=["id"],Mt=["id"],Ot={class:"modal-body"},Et={class:"input-group mb-3"},Ft={class:"input-group-text",id:"basic-addon1"},Lt=["value"],Ut={class:"input-group mb-3"},Vt={class:"input-group-text",id:"basic-addon1"},Ht=["value"],Dt={key:0},Rt={class:"modal-footer"},Pt=["disabled"],jt={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function Yt(n,e,i,a,s,t){return l(),p("div",{class:"modal fade",id:"swapTokensModal"+i.modalId,tabindex:"-1","aria-labelledby":"swapTokensModalLabel"+i.modalId,"aria-hidden":"true"},[o("div",Bt,[o("div",St,[o("div",Nt,[o("h1",{class:"modal-title fs-5",id:"swapTokensModalLabel"+i.modalId},"Swap tokens",8,Wt),o("button",{id:"closeSwapTokensModal"+i.modalId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,Mt)]),o("div",Ot,[e[1]||(e[1]=o("p",null,"Double-check the swap amounts:",-1)),o("div",Et,[o("span",Ft,d(i.inputToken?.symbol),1),o("input",{type:"text",class:"form-control",value:i.inputTokenAmount,disabled:""},null,8,Lt)]),e[2]||(e[2]=o("h4",{class:"text-center mt-2"},[o("i",{class:"bi bi-arrow-down"})],-1)),o("div",Ut,[o("span",Vt,d(i.outputToken?.symbol),1),o("input",{type:"text",class:"form-control",value:i.outputTokenAmount,disabled:""},null,8,Ht)]),t.bothTokensAreNativeCoinOrWrappedToken?h("",!0):(l(),p("small",Dt,[o("em",null," You will get at least "+d(i.outputTokenAmount)+" "+d(i.outputToken?.symbol)+", but probably more ("+d(a.slippage)+"% slippage). ",1)]))]),o("div",Rt,[o("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...r)=>t.swap&&t.swap(...r)),disabled:s.waiting},[s.waiting?(l(),p("span",jt)):h("",!0),e[3]||(e[3]=O(" Swap tokens ",-1))],8,Pt)])])])],8,It)}const zt=W(xt,[["render",Yt]]),Kt={name:"UniV2Swap",props:["outputPlaceholder","poweredBy","routerAddress","swapId","tokens"],data(){return{debounce:null,filterTextInput:"",filterTextOutput:"",inputToken:null,inputTokenAllowance:0,inputTokenAmount:null,inputTokenBalance:null,outputText:"0",outputToken:null,outputTokenAmountWei:null,preswapCheck:!1,priceImpact:0,timeout:800,tokenList:[]}},components:{ConnectWalletButton:Q,UniV2SwapTokensModal:zt,SwitchChainButton:K,TokenApprovalModal:At},mounted(){this.tokenList=this.getFilteredTokens(this.tokens.tokens),this.selectInputToken(this.tokenList[0]),this.selectOutputToken(this.tokenList[1]),this.outputPlaceholder&&(this.outputText=this.outputPlaceholder)},computed:{allowanceTooLow(){return Number(this.inputTokenAllowance)<Number(this.inputTokenAmount)},bothTokensAreNativeCoinOrWrappedTokenOrSame(){return this.inputToken.address==c&&this.outputToken.address==f[this.$config.public.supportedChainId]||this.inputToken.address==f[this.$config.public.supportedChainId]&&this.outputToken.address==c||this.inputToken.address==c&&this.outputToken.address==c||this.inputToken.address==f[this.$config.public.supportedChainId]&&this.outputToken.address==f[this.$config.public.supportedChainId]?!0:this.inputToken.address==this.outputToken.address},bothTokensAreTheSame(){return this.inputToken.address==this.outputToken.address},filteredTokensInput(){const n=new RegExp(this.filterTextInput,"i");return this.tokenList.filter(e=>n.test(e.symbol))},filteredTokensOutput(){const n=new RegExp(this.filterTextOutput,"i");return this.tokenList.filter(e=>n.test(e.symbol))},formatInputTokenBalance(){return this.inputTokenBalance?this.inputTokenBalance==0?0:this.inputTokenBalance>100?Number(this.inputTokenBalance).toFixed(2):this.inputTokenBalance>1?Number(this.inputTokenBalance).toFixed(4):this.inputTokenBalance>.01?Number(this.inputTokenBalance).toFixed(6):this.inputTokenBalance>1e-4?Number(this.inputTokenBalance).toFixed(8):Number(this.inputTokenBalance).toFixed(10):0},inputAmountLessThanBalance(){return this.inputTokenAmount&&this.inputTokenBalance?Number(this.inputTokenAmount)<=Number(this.inputTokenBalance):!1},inputIsWrappedNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(f[this.$config.public.supportedChainId]).toLowerCase()},isSupportedChain(){return this.chainId===this.$config.public.supportedChainId},outputIsNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(c).toLowerCase()},outputTokenAmount(){if(this.outputTokenAmountWei){let n=Z(String(this.outputTokenAmountWei),this.outputToken.decimals);return n==0?0:n>100?Number(n).toFixed(2):n>1?Number(n).toFixed(4):n>.01?Number(n).toFixed(6):n>1e-4?Number(n).toFixed(8):Number(n).toFixed(10)}return null},priceImpactTooHigh(){return this.priceImpact>this.$config.public.swapPriceImpactMaxBps},unwrappingWrappedNativeCoin(){return!!(this.inputIsWrappedNativeCoin&&this.outputIsNativeCoin)}},methods:{getTokenAllowance:z,getTokenBalance:Y,changeInputTokenAllowance(n){this.inputTokenAllowance=Number(n)},getFilteredTokens(n){return n.filter(e=>e.swap)},async getOutputAmount(){if(this.inputTokenAmount){if(this.bothTokensAreNativeCoinOrWrappedTokenOrSame)this.outputTokenAmountWei=I(this.inputTokenAmount,this.inputToken.decimals);else{const n=await vt(this.inputToken,this.outputToken,this.inputTokenAmount,this.routerAddress),e=this.siteSettings.getSlippageBps();this.outputTokenAmountWei=n-n/BigInt(1e4)*BigInt(e)}this.priceImpact=await _t(this.inputToken,this.outputToken,this.inputTokenAmount,this.routerAddress)}else this.outputTokenAmountWei=null},getOutputAmountWithTimeout(){this.debounce&&clearTimeout(this.debounce);const n=this;this.debounce=setTimeout(()=>{n.getOutputAmount()},n.timeout)},async selectInputToken(n){this.inputTokenAllowance=0,this.outputTokenAmountWei=null,this.inputToken=n,this.inputTokenAmount=null,this.isActivated&&(this.inputTokenBalance=await this.getTokenBalance(n,this.address)),n.address==c?this.inputTokenAllowance=Number(X):this.inputTokenAllowance=await this.getTokenAllowance(n,this.address,this.routerAddress)},selectOutputToken(n){this.outputToken=n,this.outputTokenAmountWei=null},setMaxInputTokenAmount(){this.inputTokenAmount=String(this.inputTokenBalance),this.getOutputAmount()},subtractInputTokenBalance(){this.inputTokenBalance=Number(this.inputTokenBalance)-Number(this.inputTokenAmount)},togglePreswapCheck(){this.preswapCheck=!this.preswapCheck}},setup(){const{address:n,chainId:e,isActivated:i}=R(),a=E();return{address:n,chainId:e,isActivated:i,siteSettings:a}},watch:{async isActivated(){this.address&&this.inputToken&&(this.inputTokenBalance=await this.getTokenBalance(this.inputToken,this.address))}}},Qt={class:"input-group mb-1"},Xt={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Zt={class:"dropdown-menu p-2"},qt=["onClick"],Gt={class:"cursor-pointer hover-color"},Jt={class:"input-group mt-4"},$t={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},te={class:"dropdown-menu p-2"},ee=["onClick"],ne=["value","placeholder"],oe={key:0},se={class:"d-flex justify-content-center mt-4"},ie={key:2,disabled:!0,class:"btn btn-outline-primary",type:"button"},ae=["data-bs-target"],ue=["disabled","data-bs-target"],re={key:5,disabled:!0,class:"btn btn-outline-primary",type:"button"},le={key:6,disabled:!0,class:"btn btn-outline-primary",type:"button"},de={key:7,disabled:!0,class:"btn btn-outline-primary",type:"button"},pe={key:1,class:"text-center mt-4"};function ce(n,e,i,a,s,t){const r=C("ConnectWalletButton"),T=C("SwitchChainButton"),k=C("TokenApprovalModal"),b=C("UniV2SwapTokensModal");return l(),p("div",null,[o("div",Qt,[o("button",Xt,d(s.inputToken?.symbol),1),o("ul",Zt,[B(o("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":e[0]||(e[0]=u=>s.filterTextInput=u)},null,512),[[S,s.filterTextInput]]),(l(!0),p(M,null,L(t.filteredTokensInput,u=>(l(),p("li",{key:u.address,class:"cursor-pointer"},[o("span",{onClick:m=>t.selectInputToken(u),class:"dropdown-item"},d(u.symbol)+" ("+d(u.name)+")",9,qt)]))),128))]),B(o("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>s.inputTokenAmount=u),type:"text",class:"form-control",placeholder:"0.00",onKeyup:e[2]||(e[2]=(...u)=>t.getOutputAmountWithTimeout&&t.getOutputAmountWithTimeout(...u))},null,544),[[S,s.inputTokenAmount]]),o("button",{onClick:e[3]||(e[3]=(...u)=>t.setMaxInputTokenAmount&&t.setMaxInputTokenAmount(...u)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},[...e[8]||(e[8]=[o("small",null,"MAX",-1)])])]),o("small",{onClick:e[4]||(e[4]=(...u)=>t.setMaxInputTokenAmount&&t.setMaxInputTokenAmount(...u))},[e[9]||(e[9]=o("em",null,"Balance: ",-1)),o("em",Gt,d(t.formatInputTokenBalance)+" "+d(s.inputToken?.symbol),1)]),o("h4",{onClick:e[5]||(e[5]=(...u)=>t.getOutputAmount&&t.getOutputAmount(...u)),class:"text-center mt-2 cursor-pointer"},[...e[10]||(e[10]=[o("i",{class:"bi bi-arrow-down"},null,-1)])]),o("div",Jt,[o("button",$t,d(s.outputToken?.symbol),1),o("ul",te,[B(o("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":e[6]||(e[6]=u=>s.filterTextOutput=u)},null,512),[[S,s.filterTextOutput]]),(l(!0),p(M,null,L(t.filteredTokensOutput,u=>(l(),p("li",{key:u.address,class:"cursor-pointer"},[o("span",{onClick:m=>t.selectOutputToken(u),class:"dropdown-item"},d(u.symbol)+" ("+d(u.name)+")",9,ee)]))),128))]),o("input",{type:"text",class:"form-control",value:t.outputTokenAmount,placeholder:s.outputText,disabled:""},null,8,ne)]),t.outputTokenAmount&&!t.bothTokensAreNativeCoinOrWrappedTokenOrSame?(l(),p("small",oe,[o("em",null," You will get at least "+d(t.outputTokenAmount)+" "+d(s.outputToken.symbol)+", but probably more ("+d(a.siteSettings.slippage)+"% slippage). ",1)])):h("",!0),o("div",se,[!a.isActivated&&!t.isSupportedChain?(l(),U(r,{key:0,class:"btn-outline-primary",btnText:"Connect wallet"})):h("",!0),a.isActivated&&!t.isSupportedChain?(l(),U(T,{key:1})):h("",!0),a.isActivated&&t.isSupportedChain&&!s.inputTokenAmount?(l(),p("button",ie," Swap tokens ")):h("",!0),a.isActivated&&t.isSupportedChain&&s.inputTokenAmount&&t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&t.allowanceTooLow&&!t.unwrappingWrappedNativeCoin&&!t.priceImpactTooHigh?(l(),p("button",{key:3,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#tokenApprovalModal"+i.swapId}," Approve token ",8,ae)):h("",!0),_(k,{modalId:i.swapId,token:s.inputToken,amount:s.inputTokenAmount,routerAddress:i.routerAddress,onSetApprovalAmount:t.changeInputTokenAllowance},null,8,["modalId","token","amount","routerAddress","onSetApprovalAmount"]),a.isActivated&&t.isSupportedChain&&s.inputTokenAmount&&t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&!t.priceImpactTooHigh&&!t.priceImpactTooHigh&&(!t.allowanceTooLow||t.unwrappingWrappedNativeCoin)?(l(),p("button",{key:4,disabled:!s.inputToken||!s.outputToken||!s.inputTokenAmount||!t.outputTokenAmount||!a.isActivated||t.bothTokensAreTheSame||!t.inputAmountLessThanBalance,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#swapTokensModal"+i.swapId,onClick:e[7]||(e[7]=(...u)=>t.getOutputAmount&&t.getOutputAmount(...u))}," Swap tokens ",8,ue)):h("",!0),_(b,{modalId:i.swapId,inputToken:s.inputToken,inputTokenAmount:s.inputTokenAmount,outputToken:s.outputToken,outputTokenAmount:t.outputTokenAmount,outputTokenAmountWei:s.outputTokenAmountWei,routerAddress:i.routerAddress,onChangeInputTokenBalance:t.subtractInputTokenBalance},null,8,["modalId","inputToken","inputTokenAmount","outputToken","outputTokenAmount","outputTokenAmountWei","routerAddress","onChangeInputTokenBalance"]),a.isActivated&&t.isSupportedChain&&s.inputTokenAmount&&!t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&!t.priceImpactTooHigh?(l(),p("button",re," Balance too low ")):h("",!0),a.isActivated&&t.isSupportedChain&&s.inputTokenAmount&&t.bothTokensAreTheSame&&!t.priceImpactTooHigh?(l(),p("button",le," Both tokens are the same ")):h("",!0),a.isActivated&&t.isSupportedChain&&s.inputTokenAmount&&t.priceImpactTooHigh?(l(),p("button",de," Price impact too high ")):h("",!0)]),i.poweredBy?(l(),p("p",pe,[o("small",null,[o("em",null,"Powered by "+d(i.poweredBy)+".",1)])])):h("",!0)])}const me=W(Kt,[["render",ce]]),he={name:"SwapUniV2",components:{UniV2Swap:me},setup(){return{tokens:$}}},ke={class:"scroll-500"},be={class:"card border"},Te={class:"card-body mb-3"},fe={class:"fs-3"},ge={class:"d-flex justify-content-center mt-5"},ye={class:"col-12 col-lg-8"};function we(n,e,i,a,s,t){const r=q,T=G,k=J,b=C("UniV2Swap");return l(),p(M,null,[_(k,null,{default:V(()=>[_(r,null,{default:V(()=>[O("Swap | "+d(n.$config.public.projectMetadataTitle),1)]),_:1}),_(T,{property:"og:title",content:"Token Swap | "+n.$config.public.projectMetadataTitle},null,8,["content"])]),_:1}),o("div",ke,[o("div",be,[o("div",Te,[o("p",fe,[o("i",{class:"bi bi-arrow-left-circle cursor-pointer",onClick:e[0]||(e[0]=u=>n.$router.back())})]),e[1]||(e[1]=o("h3",{class:"mt-3"},"Token Swap",-1)),o("div",ge,[o("div",ye,[_(b,{routerAddress:n.$config.public.swapRouterAddress,swapId:"SwapPage1",tokens:a.tokens},null,8,["routerAddress","tokens"])])])])])])],64)}const ve=W(he,[["render",we]]);export{ve as default};
