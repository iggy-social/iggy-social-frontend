import{_ as b,A as m,r as f,c as i,o as d,a as e,t as r,G as p,g as c,b as h,d as v,p as _,v as U}from"#entry";import{F as k}from"./BkS6ZyWH.js";const T={name:"FileUploadModal",props:["title","componentId","infoText","maxFileSize","storageType"],emits:["processFileUrl"],components:{FileUploadInput:k},data(){return{currentTab:"upload",pastedLink:null}},mounted(){this.fileUploadEnabled||(this.currentTab="paste")},computed:{arBalance(){if(this.arweaveBalance){const l=Number(this.arweaveBalance).toFixed(6);return Number.parseFloat(l)}return 0},arweaveBalanceTooLow(){return this.storageType!=="arweave"?!1:this.arBalance<this.$config.public.arweaveMinBalance},fileUploadEnabled(){return this.$config.public.fileUploadEnabled},getTitle(){return this.title||"Upload file"}},methods:{processUploadedFileUrl(l){this.$emit("processFileUrl",l),document.getElementById("closeFileUploadModal"+this.componentId).click()},handleCloseClick(){const l=document.getElementById("closeFileUploadModal"+this.componentId);l&&l.blur()}},setup(){const{arweaveBalance:l}=m();return{arweaveBalance:l}},watch:{fileUploadEnabled(){this.fileUploadEnabled?this.currentTab="upload":this.currentTab="paste"}}},F=["id","aria-labelledby"],g={class:"modal-dialog"},w={class:"modal-content"},y={class:"modal-header"},B=["id"],C=["id"],x={class:"modal-body mb-4"},I={class:"nav nav-tabs nav-fill"},E={class:"nav-item"},L=["disabled"],M={class:"nav-item"},S={class:"tab-content mt-3"},A={key:0},N={key:0},P={key:1},z={class:"text-danger"},V=["href"],D={key:1},R=["disabled"];function G(l,t,s,j,a,o){const u=f("FileUploadInput");return d(),i("div",{class:"modal fade",id:"fileUploadModal"+s.componentId,"aria-labelledby":"fileUploadModalLabel"+s.componentId},[e("div",g,[e("div",w,[e("div",y,[e("h1",{class:"modal-title fs-5",id:"fileUploadModalLabel"+s.componentId},r(o.getTitle),9,B),e("button",{id:"closeFileUploadModal"+s.componentId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...n)=>o.handleCloseClick&&o.handleCloseClick(...n))},null,8,C)]),e("div",x,[e("ul",I,[e("li",E,[e("button",{disabled:!this.fileUploadEnabled,class:p(["nav-link",a.currentTab==="upload"?"active":""]),onClick:t[1]||(t[1]=n=>a.currentTab="upload")}," Upload ",10,L)]),e("li",M,[e("button",{class:p(["nav-link",a.currentTab==="paste"?"active":""]),onClick:t[2]||(t[2]=n=>a.currentTab="paste")}," Paste Link ",2)])]),e("div",S,[a.currentTab==="upload"?(d(),i("div",A,[s.infoText?(d(),i("p",N,r(s.infoText),1)):c("",!0),o.arweaveBalanceTooLow?(d(),i("div",P,[t[6]||(t[6]=e("p",{class:"text-danger"}," Error: Arweave is used as file storage. Current balance in the Arweave wallet is insufficient to do the upload. ",-1)),e("p",null,[e("span",z,"Please send AR tokens to this wallet (min. "+r(l.$config.public.arweaveMinBalance)+" AR) to enable uploads: ",1),e("a",{href:"https://arscan.io/address/"+this.$config.public.arweaveAddress,target:"_blank"},r(this.$config.public.arweaveAddress),9,V),t[5]||(t[5]=v(". ",-1))])])):c("",!0),h(u,{btnCls:"btn btn-primary",disable:o.arweaveBalanceTooLow,maxFileSize:s.maxFileSize,storageType:s.storageType,onProcessUploadedFileUrl:o.processUploadedFileUrl},null,8,["disable","maxFileSize","storageType","onProcessUploadedFileUrl"])])):c("",!0),a.currentTab==="paste"?(d(),i("div",D,[t[7]||(t[7]=e("p",null,"Paste file link",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>a.pastedLink=n),type:"text",class:"form-control mb-3",placeholder:"Enter http link to file"},null,512),[[U,a.pastedLink]]),e("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=n=>o.processUploadedFileUrl(a.pastedLink)),disabled:!a.pastedLink}," Submit link ",8,R)])):c("",!0)])])])])],8,F)}const J=b(T,[["render",G]]);export{J as F};
