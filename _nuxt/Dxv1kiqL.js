import{_ as S,W as B,j as U,i as V,z as x,$ as P,c as p,o as l,a as s,t as d,d as W,n as C,v as I,g as h,a0 as H,Q as c,a1 as D,s as M,a2 as y,l as R,Z as j,a3 as Y,a4 as z,S as K,C as Q,a5 as X,y as Z,r as v,F as N,R as O,f as F,b as _,w as L,T as q,M as G,H as J}from"#entry";import{t as $}from"./RD6MkrwO.js";const tt={name:"TokenApprovalModal",props:["amount","modalId","routerAddress","token"],emits:["setApprovalAmount"],components:{WaitingToast:B},data(){return{waiting:!1,selectedOption:"unlimited",approvalAmount:0}},mounted(){this.approvalAmount=this.amount},computed:{isUnlimited(){return this.selectedOption==="unlimited"}},methods:{selectOption(n){this.selectedOption=n},async approveToken(){this.waiting=!0;let n=this.approvalAmount;this.isUnlimited&&(n=1e16);const e=x(String(n),this.token.decimals),i={address:this.token.address,abi:P,functionName:"approve",args:[this.routerAddress,BigInt(e)]};let a;try{const o=await this.writeData(i);a=this.toast({component:B,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o,"_blank").focus()});const t=await this.waitForTxReceipt(o);t.status==="success"?(this.toast.dismiss(a),this.toast("You have successfully approved "+this.token.symbol+"!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o,"_blank").focus()}),this.$emit("setApprovalAmount",n),this.waiting=!1,document.getElementById("closeTokenApprovalModal"+this.modalId).click()):(this.waiting=!1,this.toast.dismiss(a),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o,"_blank").focus()}),console.log(t))}catch(o){try{let t=o.message.split("Details:")[1];t=t.split("Version: viem")[0],t=t.replace(/"/g,""),t=t.replace("execution reverted:","Error:"),console.log(t),this.toast(t,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1}finally{this.toast.dismiss(a),this.waiting=!1;return}}},setup(){const{writeData:n,waitForTxReceipt:e}=U(),i=V();return{writeData:n,waitForTxReceipt:e,toast:i}},watch:{amount(n,e){n&&(this.approvalAmount=this.amount)}}},et=["id","aria-labelledby"],nt={class:"modal-dialog"},st={class:"modal-content"},ot={class:"modal-header"},it=["id"],at=["id"],ut={class:"modal-body"},rt={class:"row mt-3"},lt={class:"col-lg-8"},dt={class:"input-group-text"},pt=["checked"],ct={class:"input-group-text"},mt=["checked"],ht=["disabled"],kt={class:"input-group-text",id:"basic-addon2"},bt={class:"modal-footer"},Tt=["disabled"],ft={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},yt={key:1},gt={key:2};function wt(n,e,i,a,o,t){return l(),p("div",{class:"modal fade",id:"tokenApprovalModal"+i.modalId,tabindex:"-1","aria-labelledby":"tokenApprovalModalLabel"+i.modalId,"aria-hidden":"true"},[s("div",nt,[s("div",st,[s("div",ot,[s("h1",{class:"modal-title fs-5",id:"tokenApprovalModalLabel"+i.modalId},"Approve "+d(i.token?.symbol)+" token",9,it),s("button",{id:"closeTokenApprovalModal"+i.modalId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,at)]),s("div",ut,[W(" Approve "+d(i.token?.symbol)+" tokens for swapping: ",1),s("div",rt,[s("div",lt,[s("div",{class:"input-group",onClick:e[0]||(e[0]=r=>t.selectOption("unlimited"))},[s("div",dt,[s("input",{class:"form-check-input mt-0",type:"radio",checked:t.isUnlimited},null,8,pt)]),e[4]||(e[4]=s("input",{value:"Unlimited",type:"text",class:"form-control",disabled:""},null,-1))]),s("div",{class:"input-group mt-2",onClick:e[2]||(e[2]=r=>t.selectOption("limited"))},[s("div",ct,[s("input",{class:"form-check-input mt-0",type:"radio",checked:!t.isUnlimited},null,8,mt)]),C(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.approvalAmount=r),type:"text",class:"form-control",disabled:o.waiting},null,8,ht),[[I,o.approvalAmount]]),s("span",kt,d(i.token?.symbol),1)])])]),e[5]||(e[5]=s("p",{class:"mt-3"},[s("small",null,[s("em",null," If you want to do more swaps without approvals, set a big enough amount or choose unlimited. ")])],-1))]),s("div",bt,[s("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=(...r)=>t.approveToken&&t.approveToken(...r)),disabled:o.waiting},[o.waiting?(l(),p("span",ft)):h("",!0),t.isUnlimited?(l(),p("span",yt,"Approve unlimited")):h("",!0),t.isUnlimited?h("",!0):(l(),p("span",gt,"Approve "+d(o.approvalAmount)+" "+d(i.token?.symbol),1))],8,Tt)])])])],8,et)}const At=S(tt,[["render",wt]]),T={1:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",10:"0x4200000000000000000000000000000000000006",14:"0x1d80c49bbbcd1c0911346656b529df9e5c2f783d",19:"0x02f0826ef6aD107Cfc861152B32B52fD11BaB9ED",56:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",100:"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",137:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270",250:"0x21be370d5312f44cb42ce377bc9b8a0cef1a4c83",324:"0x5aea5775959fbc2557cc8789bc1bf90a239d9a91",1101:"0x4f9a0e7fd2bf6067db6994cf12e4495df938e6e9",42161:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",43114:"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7",421614:"0xce314209aB485bE222CE85F653Ac918f54532503",11155111:"0xf531B8F309Be94191af87605CfBf600D71C2cFe0",666666666:"0xEb54dACB4C2ccb64F8074eceEa33b5eBb38E5387"};async function _t(n,e,i,a){const o=[{name:"getPriceImpact",type:"function",stateMutability:"view",inputs:[{name:"tokenIn",type:"address"},{name:"tokenOut",type:"address"},{name:"amountIn",type:"uint256"}],outputs:[{name:"impact",type:"uint256"}]}],t=x(i,n.decimals),r=await D({address:a,abi:o,functionName:"getPriceImpact",args:[n.address,e.address,BigInt(t)]});return r?Number(r):(console.warn("Price impact read returned null, returning 0"),0)}async function vt(n,e,i,a){const o=H(),t=x(i,n.decimals);let r=[n.address,e.address];const k=T[String(o.public.supportedChainId)];if(n.address!==c&&n.address!==k&&e.address!==c&&e.address!==k&&(r=[n.address,k,e.address]),(n.address===c||n.address===k)&&(e.address===c||e.address===k))return t;const m=await D({address:a,abi:[{name:"getAmountsOut",type:"function",stateMutability:"view",inputs:[{name:"amountIn",type:"uint256"},{name:"path",type:"address[]"}],outputs:[{name:"amounts",type:"uint256[]"}]}],functionName:"getAmountsOut",args:[t,r]});return!m||m.length===0?(console.warn("Output amounts read returned null or empty array, returning 0"),BigInt(0)):m[m.length-1]}async function xt(n,e,i,a,o,t,r){const k=H(),{swapDeadline:w}=M(),m=BigInt(Math.floor(Date.now()/1e3)+60*Number(w.value)),u=String(T[String(k.public.supportedChainId)]).toLowerCase(),b=String(e.address).toLowerCase(),f=String(i.address).toLowerCase(),E=[{name:"deposit",type:"function",stateMutability:"payable",inputs:[],outputs:[]},{name:"withdraw",type:"function",stateMutability:"nonpayable",inputs:[{name:"wad",type:"uint256"}],outputs:[]}];if(b===c&&f===u)return y({address:u,abi:E,functionName:"deposit",value:a});if(b===u&&f===c)return y({address:u,abi:E,functionName:"withdraw",args:[a]});{const A=[{name:"swapExactTokensForTokens",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForTokensWithReferrer",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactETHForTokens",type:"function",stateMutability:"payable",inputs:[{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactETHForTokensWithReferrer",type:"function",stateMutability:"payable",inputs:[{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForETH",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForETHWithReferrer",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]}];let g=[b,f];return b===c&&f!==u&&f!==c?r===c?y({address:t,abi:A,functionName:"swapExactETHForTokens",args:[o,g,n,m],value:a}):y({address:t,abi:A,functionName:"swapExactETHForTokensWithReferrer",args:[o,g,n,m,r],value:a}):b!==c&&b!==u&&f===c?r===c?y({address:t,abi:A,functionName:"swapExactTokensForETH",args:[a,o,g,n,m]}):y({address:t,abi:A,functionName:"swapExactTokensForETHWithReferrer",args:[a,o,g,n,m,r]}):(b!==u&&f!==u&&(g=[b,u,f]),r===c?y({address:t,abi:A,functionName:"swapExactTokensForTokens",args:[a,o,g,n,m]}):y({address:t,abi:A,functionName:"swapExactTokensForTokensWithReferrer",args:[a,o,g,n,m,r]}))}}const Ct={name:"UniV2SwapTokensModal",props:["inputToken","inputTokenAmount","modalId","outputToken","outputTokenAmount","outputTokenAmountWei","routerAddress"],emits:["changeInputTokenBalance"],data(){return{waiting:!1}},components:{WaitingToast:B},computed:{bothTokensAreNativeCoinOrWrappedToken(){return!!(this.inputIsNativeCoin&&this.outputIsWrappedNativeCoin||this.inputIsWrappedNativeCoin&&this.outputIsNativeCoin)},inputIsNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(c).toLowerCase()},inputIsWrappedNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(T[this.$config.public.supportedChainId]).toLowerCase()},outputIsNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(c).toLowerCase()},outputIsWrappedNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(T[this.$config.public.supportedChainId]).toLowerCase()}},methods:{async swap(){this.waiting=!0;const n=x(this.inputTokenAmount,this.inputToken?.decimals),e=j(window);let i;try{const a=await xt(this.address,this.inputToken,this.outputToken,n,this.outputTokenAmountWei,this.routerAddress,e);i=this.toast({component:B,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+a,"_blank").focus()});const o=await this.waitForTxReceipt(a);o.status==="success"?(this.toast.dismiss(i),this.toast("You have successfully swapped "+this.inputToken.symbol+" for "+this.outputToken.symbol+"!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+a,"_blank").focus()}),this.$emit("changeInputTokenBalance"),this.waiting=!1,document.getElementById("closeSwapTokensModal"+this.modalId).click()):(this.waiting=!1,this.toast.dismiss(i),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+a,"_blank").focus()}),console.log(o))}catch(a){try{let o=a.message.split("Details:")[1];o=o.split("Version: viem")[0],o=o.replace(/"/g,""),o=o.replace("execution reverted:","Error:"),console.log(o),this.toast(o,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1;return}finally{this.toast.dismiss(i),this.waiting=!1}this.waiting=!1}},setup(){const{address:n}=R(),{waitForTxReceipt:e}=U(),i=V(),{slippage:a}=M();return{address:n,slippage:a,toast:i,waitForTxReceipt:e}}},It=["id","aria-labelledby"],Bt={class:"modal-dialog"},St={class:"modal-content"},Nt={class:"modal-header"},Wt=["id"],Mt=["id"],Et={class:"modal-body"},Ot={class:"input-group mb-3"},Ft={class:"input-group-text",id:"basic-addon1"},Lt=["value"],Ut={class:"input-group mb-3"},Vt={class:"input-group-text",id:"basic-addon1"},Ht=["value"],Dt={key:0},Rt={class:"modal-footer"},Pt=["disabled"],jt={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function Yt(n,e,i,a,o,t){return l(),p("div",{class:"modal fade",id:"swapTokensModal"+i.modalId,tabindex:"-1","aria-labelledby":"swapTokensModalLabel"+i.modalId,"aria-hidden":"true"},[s("div",Bt,[s("div",St,[s("div",Nt,[s("h1",{class:"modal-title fs-5",id:"swapTokensModalLabel"+i.modalId},"Swap tokens",8,Wt),s("button",{id:"closeSwapTokensModal"+i.modalId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,Mt)]),s("div",Et,[e[1]||(e[1]=s("p",null,"Double-check the swap amounts:",-1)),s("div",Ot,[s("span",Ft,d(i.inputToken?.symbol),1),s("input",{type:"text",class:"form-control",value:i.inputTokenAmount,disabled:""},null,8,Lt)]),e[2]||(e[2]=s("h4",{class:"text-center mt-2"},[s("i",{class:"bi bi-arrow-down"})],-1)),s("div",Ut,[s("span",Vt,d(i.outputToken?.symbol),1),s("input",{type:"text",class:"form-control",value:i.outputTokenAmount,disabled:""},null,8,Ht)]),t.bothTokensAreNativeCoinOrWrappedToken?h("",!0):(l(),p("small",Dt,[s("em",null," You will get at least "+d(i.outputTokenAmount)+" "+d(i.outputToken?.symbol)+", but probably more ("+d(a.slippage)+"% slippage). ",1)]))]),s("div",Rt,[s("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...r)=>t.swap&&t.swap(...r)),disabled:o.waiting},[o.waiting?(l(),p("span",jt)):h("",!0),e[3]||(e[3]=W(" Swap tokens ",-1))],8,Pt)])])])],8,It)}const zt=S(Ct,[["render",Yt]]),Kt={name:"UniV2Swap",props:["outputPlaceholder","poweredBy","routerAddress","swapId","tokens"],data(){return{debounce:null,filterTextInput:"",filterTextOutput:"",inputToken:null,inputTokenAllowance:0,inputTokenAmount:null,inputTokenBalance:null,outputText:"0",outputToken:null,outputTokenAmountWei:null,preswapCheck:!1,priceImpact:0,timeout:800,tokenList:[]}},components:{ConnectWalletButton:Q,UniV2SwapTokensModal:zt,SwitchChainButton:K,TokenApprovalModal:At},mounted(){this.tokenList=this.getFilteredTokens(this.tokens.tokens),this.selectInputToken(this.tokenList[0]),this.selectOutputToken(this.tokenList[1]),this.outputPlaceholder&&(this.outputText=this.outputPlaceholder)},computed:{allowanceTooLow(){return Number(this.inputTokenAllowance)<Number(this.inputTokenAmount)},bothTokensAreNativeCoinOrWrappedTokenOrSame(){return this.inputToken.address==c&&this.outputToken.address==T[this.$config.public.supportedChainId]||this.inputToken.address==T[this.$config.public.supportedChainId]&&this.outputToken.address==c||this.inputToken.address==c&&this.outputToken.address==c||this.inputToken.address==T[this.$config.public.supportedChainId]&&this.outputToken.address==T[this.$config.public.supportedChainId]?!0:this.inputToken.address==this.outputToken.address},bothTokensAreTheSame(){return this.inputToken.address==this.outputToken.address},filteredTokensInput(){const n=new RegExp(this.filterTextInput,"i");return this.tokenList.filter(e=>n.test(e.symbol))},filteredTokensOutput(){const n=new RegExp(this.filterTextOutput,"i");return this.tokenList.filter(e=>n.test(e.symbol))},formatInputTokenBalance(){return this.inputTokenBalance?this.inputTokenBalance==0?0:this.inputTokenBalance>100?Number(this.inputTokenBalance).toFixed(2):this.inputTokenBalance>1?Number(this.inputTokenBalance).toFixed(4):this.inputTokenBalance>.01?Number(this.inputTokenBalance).toFixed(6):this.inputTokenBalance>1e-4?Number(this.inputTokenBalance).toFixed(8):Number(this.inputTokenBalance).toFixed(10):0},inputAmountLessThanBalance(){return this.inputTokenAmount&&this.inputTokenBalance?Number(this.inputTokenAmount)<=Number(this.inputTokenBalance):!1},inputIsWrappedNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(T[this.$config.public.supportedChainId]).toLowerCase()},isSupportedChain(){return this.chainId===this.$config.public.supportedChainId},outputIsNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(c).toLowerCase()},outputTokenAmount(){if(this.outputTokenAmountWei){let n=Z(String(this.outputTokenAmountWei),this.outputToken.decimals);return n==0?0:n>100?Number(n).toFixed(2):n>1?Number(n).toFixed(4):n>.01?Number(n).toFixed(6):n>1e-4?Number(n).toFixed(8):Number(n).toFixed(10)}return null},priceImpactTooHigh(){return this.priceImpact>this.$config.public.swapPriceImpactMaxBps},unwrappingWrappedNativeCoin(){return!!(this.inputIsWrappedNativeCoin&&this.outputIsNativeCoin)}},methods:{getTokenAllowance:z,getTokenBalance:Y,changeInputTokenAllowance(n){this.inputTokenAllowance=Number(n)},getFilteredTokens(n){return n.filter(e=>e.swap)},async getOutputAmount(){if(this.inputTokenAmount){if(this.bothTokensAreNativeCoinOrWrappedTokenOrSame)this.outputTokenAmountWei=x(this.inputTokenAmount,this.inputToken.decimals);else{const n=await vt(this.inputToken,this.outputToken,this.inputTokenAmount,this.routerAddress),e=this.siteSettings.getSlippageBps();this.outputTokenAmountWei=n-n/BigInt(1e4)*BigInt(e)}this.priceImpact=await _t(this.inputToken,this.outputToken,this.inputTokenAmount,this.routerAddress)}else this.outputTokenAmountWei=null},getOutputAmountWithTimeout(){this.debounce&&clearTimeout(this.debounce);const n=this;this.debounce=setTimeout(()=>{n.getOutputAmount()},n.timeout)},async selectInputToken(n){this.inputTokenAllowance=0,this.outputTokenAmountWei=null,this.inputToken=n,this.inputTokenAmount=null,this.isActivated&&(this.inputTokenBalance=await this.getTokenBalance(n,this.address)),n.address==c?this.inputTokenAllowance=Number(X):this.inputTokenAllowance=await this.getTokenAllowance(n,this.address,this.routerAddress)},selectOutputToken(n){this.outputToken=n,this.outputTokenAmountWei=null},setMaxInputTokenAmount(){this.inputTokenAmount=String(this.inputTokenBalance),this.getOutputAmount()},subtractInputTokenBalance(){this.inputTokenBalance=Number(this.inputTokenBalance)-Number(this.inputTokenAmount)},togglePreswapCheck(){this.preswapCheck=!this.preswapCheck}},setup(){const{address:n,chainId:e,isActivated:i}=R(),a=M();return{address:n,chainId:e,isActivated:i,siteSettings:a}},watch:{async isActivated(){this.address&&this.inputToken&&(this.inputTokenBalance=await this.getTokenBalance(this.inputToken,this.address))}}},Qt={class:"input-group mb-1"},Xt={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Zt={class:"dropdown-menu p-2"},qt=["onClick"],Gt={class:"cursor-pointer hover-color"},Jt={class:"input-group mt-4"},$t={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},te={class:"dropdown-menu p-2"},ee=["onClick"],ne=["value","placeholder"],se={key:0},oe={class:"d-flex justify-content-center mt-4"},ie={key:2,disabled:!0,class:"btn btn-outline-primary",type:"button"},ae=["data-bs-target"],ue=["disabled","data-bs-target"],re={key:5,disabled:!0,class:"btn btn-outline-primary",type:"button"},le={key:6,disabled:!0,class:"btn btn-outline-primary",type:"button"},de={key:7,disabled:!0,class:"btn btn-outline-primary",type:"button"},pe={key:1,class:"text-center mt-4"};function ce(n,e,i,a,o,t){const r=v("ConnectWalletButton"),k=v("SwitchChainButton"),w=v("TokenApprovalModal"),m=v("UniV2SwapTokensModal");return l(),p("div",null,[s("div",Qt,[s("button",Xt,d(o.inputToken?.symbol),1),s("ul",Zt,[C(s("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":e[0]||(e[0]=u=>o.filterTextInput=u)},null,512),[[I,o.filterTextInput]]),(l(!0),p(N,null,O(t.filteredTokensInput,u=>(l(),p("li",{key:u.address,class:"cursor-pointer"},[s("span",{onClick:b=>t.selectInputToken(u),class:"dropdown-item"},d(u.symbol)+" ("+d(u.name)+")",9,qt)]))),128))]),C(s("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>o.inputTokenAmount=u),type:"text",class:"form-control",placeholder:"0.00",onKeyup:e[2]||(e[2]=(...u)=>t.getOutputAmountWithTimeout&&t.getOutputAmountWithTimeout(...u))},null,544),[[I,o.inputTokenAmount]]),s("button",{onClick:e[3]||(e[3]=(...u)=>t.setMaxInputTokenAmount&&t.setMaxInputTokenAmount(...u)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},[...e[8]||(e[8]=[s("small",null,"MAX",-1)])])]),s("small",{onClick:e[4]||(e[4]=(...u)=>t.setMaxInputTokenAmount&&t.setMaxInputTokenAmount(...u))},[e[9]||(e[9]=s("em",null,"Balance: ",-1)),s("em",Gt,d(t.formatInputTokenBalance)+" "+d(o.inputToken?.symbol),1)]),s("h4",{onClick:e[5]||(e[5]=(...u)=>t.getOutputAmount&&t.getOutputAmount(...u)),class:"text-center mt-2 cursor-pointer"},[...e[10]||(e[10]=[s("i",{class:"bi bi-arrow-down"},null,-1)])]),s("div",Jt,[s("button",$t,d(o.outputToken?.symbol),1),s("ul",te,[C(s("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":e[6]||(e[6]=u=>o.filterTextOutput=u)},null,512),[[I,o.filterTextOutput]]),(l(!0),p(N,null,O(t.filteredTokensOutput,u=>(l(),p("li",{key:u.address,class:"cursor-pointer"},[s("span",{onClick:b=>t.selectOutputToken(u),class:"dropdown-item"},d(u.symbol)+" ("+d(u.name)+")",9,ee)]))),128))]),s("input",{type:"text",class:"form-control",value:t.outputTokenAmount,placeholder:o.outputText,disabled:""},null,8,ne)]),t.outputTokenAmount&&!t.bothTokensAreNativeCoinOrWrappedTokenOrSame?(l(),p("small",se,[s("em",null," You will get at least "+d(t.outputTokenAmount)+" "+d(o.outputToken.symbol)+", but probably more ("+d(a.siteSettings.slippage)+"% slippage). ",1)])):h("",!0),s("div",oe,[!a.isActivated&&!t.isSupportedChain?(l(),F(r,{key:0,class:"btn-outline-primary",btnText:"Connect wallet"})):h("",!0),a.isActivated&&!t.isSupportedChain?(l(),F(k,{key:1})):h("",!0),a.isActivated&&t.isSupportedChain&&!o.inputTokenAmount?(l(),p("button",ie," Swap tokens ")):h("",!0),a.isActivated&&t.isSupportedChain&&o.inputTokenAmount&&t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&t.allowanceTooLow&&!t.unwrappingWrappedNativeCoin&&!t.priceImpactTooHigh?(l(),p("button",{key:3,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#tokenApprovalModal"+i.swapId}," Approve token ",8,ae)):h("",!0),_(w,{modalId:i.swapId,token:o.inputToken,amount:o.inputTokenAmount,routerAddress:i.routerAddress,onSetApprovalAmount:t.changeInputTokenAllowance},null,8,["modalId","token","amount","routerAddress","onSetApprovalAmount"]),a.isActivated&&t.isSupportedChain&&o.inputTokenAmount&&t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&!t.priceImpactTooHigh&&!t.priceImpactTooHigh&&(!t.allowanceTooLow||t.unwrappingWrappedNativeCoin)?(l(),p("button",{key:4,disabled:!o.inputToken||!o.outputToken||!o.inputTokenAmount||!t.outputTokenAmount||!a.isActivated||t.bothTokensAreTheSame||!t.inputAmountLessThanBalance,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#swapTokensModal"+i.swapId,onClick:e[7]||(e[7]=(...u)=>t.getOutputAmount&&t.getOutputAmount(...u))}," Swap tokens ",8,ue)):h("",!0),_(m,{modalId:i.swapId,inputToken:o.inputToken,inputTokenAmount:o.inputTokenAmount,outputToken:o.outputToken,outputTokenAmount:t.outputTokenAmount,outputTokenAmountWei:o.outputTokenAmountWei,routerAddress:i.routerAddress,onChangeInputTokenBalance:t.subtractInputTokenBalance},null,8,["modalId","inputToken","inputTokenAmount","outputToken","outputTokenAmount","outputTokenAmountWei","routerAddress","onChangeInputTokenBalance"]),a.isActivated&&t.isSupportedChain&&o.inputTokenAmount&&!t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&!t.priceImpactTooHigh?(l(),p("button",re," Balance too low ")):h("",!0),a.isActivated&&t.isSupportedChain&&o.inputTokenAmount&&t.bothTokensAreTheSame&&!t.priceImpactTooHigh?(l(),p("button",le," Both tokens are the same ")):h("",!0),a.isActivated&&t.isSupportedChain&&o.inputTokenAmount&&t.priceImpactTooHigh?(l(),p("button",de," Price impact too high ")):h("",!0)]),i.poweredBy?(l(),p("p",pe,[s("small",null,[s("em",null,"Powered by "+d(i.poweredBy)+".",1)])])):h("",!0)])}const me=S(Kt,[["render",ce]]),he={name:"SwapUniV2",components:{UniV2Swap:me},setup(){return{tokens:$}}},ke={class:"scroll-500"},be={class:"card border"},Te={class:"card-body mb-3"},fe={class:"fs-3"},ye={class:"d-flex justify-content-center mt-5"},ge={class:"col-12 col-lg-8"};function we(n,e,i,a,o,t){const r=q,k=G,w=J,m=v("UniV2Swap");return l(),p(N,null,[_(w,null,{default:L(()=>[_(r,null,{default:L(()=>[W("Swap | "+d(n.$config.public.projectMetadataTitle),1)]),_:1}),_(k,{property:"og:title",content:"Token Swap | "+n.$config.public.projectMetadataTitle},null,8,["content"])]),_:1}),s("div",ke,[s("div",be,[s("div",Te,[s("p",fe,[s("i",{class:"bi bi-arrow-left-circle cursor-pointer",onClick:e[0]||(e[0]=u=>n.$router.back())})]),e[1]||(e[1]=s("h3",{class:"mt-3"},"Token Swap",-1)),s("div",ye,[s("div",ge,[_(m,{routerAddress:n.$config.public.swapRouterAddress,swapId:"SwapPage1",tokens:a.tokens},null,8,["routerAddress","tokens"])])])])])])],64)}const ve=S(he,[["render",we]]);export{ve as default};
