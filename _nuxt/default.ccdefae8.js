import{H as ae,T as oe,M as ne,L as re}from"./components.1554103d.js";import{p as de,a as w,l as k,T as le,o as n,b as d,f as t,e as c,w as p,m as h,c as y,t as g,i as f,a6 as V,U,r as b,F as x,x as D,u as ce,D as _,I as $,C,G as he,q as ue,v as N,A as H,Q as j,y as M,z as L,$ as me,s as fe,a7 as ge,a8 as be,L as pe,K as _e,J as we}from"./entry.addc5d6b.js";import{u as K}from"./notifications.578fe67b.js";import{u as I}from"./site.7a2a72d1.js";import{u as P}from"./user.3fb0ff61.js";import{C as O}from"./ConnectWalletButton.9b3f39e5.js";import{S as F}from"./SwitchChainButton.02ff1200.js";import{g as z}from"./textUtils.e0c86127.js";import{P as ve,g as B,a as Se}from"./domainUtils.1c5d3b36.js";import{g as Y}from"./balanceUtils.0a70ba8d.js";import{t as ye}from"./tokens.8eeff16c.js";import{M as ke}from"./MintedPostImage.5b657c99.js";import{W as A}from"./WaitingToast.07259318.js";import{s as E,f as Ne,d as $e}from"./storageUtils.d97aeb57.js";import{S as Ce}from"./SimpleSwap.dc7fb48f.js";import{K as Me}from"./KeysList.d47ec8fe.js";import{S as G}from"./ShareReferralLink.c4d850d0.js";import{F as Pe}from"./FindUser.000ef264.js";import"./composables.79494c29.js";const R=de({id:"sidebars",state:()=>({leftSidebar:!1,mainContent:!0,rightSidebar:!1}),getters:{showLeftSidebar:e=>e.leftSidebar,showMainContent:e=>e.mainContent,showRightSidebar:e=>e.rightSidebar},actions:{setLeftSidebar(e){this.leftSidebar=e},setMainContent(e){this.mainContent=e},setRightSidebar(e){this.rightSidebar=e}}});async function Le(e,s,r,a,o){await e.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:s,symbol:r,decimals:a,image:o}}})}const q=""+globalThis.__publicAssetsURL("img/logo.svg"),De={name:"Navbar",components:{ConnectWalletButton:O,SwitchChainButton:F},computed:{showDomainOrAddress(){return this.userStore.getDefaultDomain?z(this.userStore.getDefaultDomain):this.address?this.shortenAddress(this.address):"Profile"}},methods:{addToMetaMask(){Le(window.ethereum,this.$config.chatTokenAddress,this.$config.chatTokenSymbol,18,this.$config.chatTokenImage)},changeColorMode(e){this.siteStore.setColorMode(e),document.documentElement.setAttribute("data-bs-theme",this.siteStore.getColorMode)},async disconnectWallet(){this.disconnect()}},setup(){const{disconnect:e}=V(),{address:s,isActivated:r}=k(),a=I(),o=P();return{address:s,disconnect:e,isActivated:r,shortenAddress:le,siteStore:a,userStore:o}}},Ae={class:"navbar navbar-expand-lg navbar-bg-custom"},Ue={class:"container-fluid mx-3"},Re=t("img",{src:q,alt:"Chat logo",height:"45"},null,-1),Te={class:"navbar-nav justify-content-end flex-grow-1"},We={key:0,class:"nav-item"},xe=t("span",{class:"nav-link cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#referralModal"}," Earn referral fees! \u{1F911} ",-1),Ie=[xe],Oe={key:1,class:"nav-item"},Fe={key:3,class:"nav-item dropdown"},Be={class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},Ee={class:"dropdown-menu dropdown-menu-end"},Ve=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#chatSettingsModal"},"Settings",-1),He=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#changeUsernameModal"},"Change username",-1),je=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#findUserModal"},"Find user",-1),Ke=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#referralModal"},"Share referral link",-1),ze={key:4,class:"nav-item dropdown"},Ye={class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},Ge={class:"dropdown-menu dropdown-menu-end"},qe={class:"nav-item cursor-pointer"},Ze=t("i",{class:"bi bi-brightness-high"},null,-1),Je=[Ze],Qe=t("i",{class:"bi bi-moon-fill"},null,-1),Xe=[Qe];function et(e,s,r,a,o,i){const l=U,u=b("ConnectWalletButton"),m=b("SwitchChainButton");return n(),d("nav",Ae,[t("div",Ue,[c(l,{class:"navbar-brand",to:"/"},{default:p(()=>[Re]),_:1}),t("ul",Te,[a.isActivated?(n(),d("li",We,Ie)):h("",!0),a.isActivated?h("",!0):(n(),d("li",Oe,[c(u,{class:"nav-link cursor-pointer",btnText:"Connect wallet"})])),a.isActivated?(n(),y(m,{key:2,navbar:!0,dropdown:!0})):h("",!0),a.isActivated?(n(),d("li",Fe,[t("a",Be,g(i.showDomainOrAddress),1),t("div",Ee,[c(l,{class:"dropdown-item cursor-pointer",to:"/profile"},{default:p(()=>[f("Profile")]),_:1}),Ve,He,je,Ke,t("span",{class:"dropdown-item cursor-pointer",onClick:s[0]||(s[0]=(...v)=>i.disconnectWallet&&i.disconnectWallet(...v))},"Disconnect")])])):h("",!0),a.isActivated&&e.$config.chatTokenAddress?(n(),d("li",ze,[t("a",Ye,g(a.userStore.getChatTokenBalance)+" "+g(e.$config.chatTokenSymbol),1),t("div",Ge,[c(l,{class:"dropdown-item cursor-pointer",to:"/airdrop"},{default:p(()=>[f("Claim "+g(e.$config.chatTokenSymbol)+" airdrop",1)]),_:1}),c(l,{class:"dropdown-item cursor-pointer",to:"/stake"},{default:p(()=>[f("Stake & earn weekly "+g(e.$config.tokenSymbol)+" rewards",1)]),_:1}),t("span",{class:"dropdown-item cursor-pointer",onClick:s[1]||(s[1]=(...v)=>i.addToMetaMask&&i.addToMetaMask(...v))},"Add "+g(e.$config.chatTokenSymbol)+" to MetaMask",1)])])):h("",!0),t("li",qe,[a.siteStore.getColorMode==="dark"?(n(),d("span",{key:0,class:"nav-link",onClick:s[2]||(s[2]=v=>i.changeColorMode("light"))},Je)):h("",!0),a.siteStore.getColorMode==="light"?(n(),d("span",{key:1,class:"nav-link",onClick:s[3]||(s[3]=v=>i.changeColorMode("dark"))},Xe)):h("",!0)])])])])}const tt=w(De,[["render",et]]),st={name:"NavbarMobile",props:["lSidebar","rSidebar"],components:{ConnectWalletButton:O,SwitchChainButton:F},computed:{isSupportedChain(){return this.chainId===this.$config.supportedChainId}},methods:{toggleLeftSidebar(){this.sidebarStore.setRightSidebar(!1),this.sidebarStore.showLeftSidebar?(this.sidebarStore.setLeftSidebar(!1),this.lSidebar.hide(),this.sidebarStore.setMainContent(!0)):(this.sidebarStore.setLeftSidebar(!0),this.lSidebar.show(),this.sidebarStore.setMainContent(!1))},toggleRightSidebar(){this.lSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.showRightSidebar?(this.sidebarStore.setRightSidebar(!1),this.sidebarStore.setMainContent(!0)):(this.sidebarStore.setRightSidebar(!0),this.sidebarStore.setMainContent(!1))}},setup(){const{chainId:e,isActivated:s}=k(),r=R();return{chainId:e,isActivated:s,sidebarStore:r}}},it={class:"navbar sticky-top navbar-expand-lg navbar-mobile"},at={class:"container-fluid"},ot={key:0,class:"navbar-toggler-icon"},nt={key:1,class:"bi bi-x-lg"},rt=t("img",{src:q,alt:"Chat logo",height:"40"},null,-1),dt={key:0,class:"navbar-toggler-icon"},lt={key:1,class:"bi bi-x-lg"},ct={key:0,class:"card border m-3"},ht={class:"card-body d-flex justify-content-center"};function ut(e,s,r,a,o,i){const l=U,u=b("ConnectWalletButton"),m=b("SwitchChainButton");return n(),d(x,null,[t("nav",it,[t("div",at,[t("button",{onClick:s[0]||(s[0]=(...v)=>i.toggleLeftSidebar&&i.toggleLeftSidebar(...v)),class:"nav-item btn navbar-toggler nav-btn-left",type:"button"},[a.sidebarStore.showLeftSidebar?h("",!0):(n(),d("span",ot)),a.sidebarStore.showLeftSidebar?(n(),d("span",nt)):h("",!0)]),c(l,{class:"navbar-brand mx-auto",to:"/"},{default:p(()=>[rt]),_:1}),t("button",{onClick:s[1]||(s[1]=(...v)=>i.toggleRightSidebar&&i.toggleRightSidebar(...v)),class:"nav-item btn navbar-toggler nav-btn-right",type:"button"},[a.sidebarStore.showRightSidebar?h("",!0):(n(),d("span",dt)),a.sidebarStore.showRightSidebar?(n(),d("span",lt)):h("",!0)])])]),!i.isSupportedChain||!a.isActivated?(n(),d("div",ct,[t("div",ht,[a.isActivated?h("",!0):(n(),y(u,{key:0,class:"btn btn-primary",btnText:"Connect wallet"})),a.isActivated&&!i.isSupportedChain?(n(),y(m,{key:1})):h("",!0)])])):h("",!0)],64)}const mt=w(st,[["render",ut]]),ft={name:"SidebarLeft",props:["lSidebar","isMobile"],components:{ProfileImage:ve},computed:{getUserAp(){return this.userStore.getCurentUserActivityPoints>0?this.userStore.getCurentUserActivityPoints:0}},methods:{getActivityPoints:Y,closeLeftSidebar(){this.isMobile&&(this.lSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setMainContent(!0))},async fetchActivityPoints(){if(this.$config.activityPointsAddress&&this.address){this.toast.info("Refreshing activity points...",{timeout:2e3});const e=await this.getActivityPoints(this.address);this.userStore.setCurrentUserActivityPoints(e)}}},setup(){const{address:e,isActivated:s}=k(),r=D(),a=K(),o=R(),i=P();return{address:e,isActivated:s,notificationsStore:a,sidebarStore:o,toast:r,userStore:i}}},gt={class:"col col-lg-auto px-0 mt-1"},bt={class:"sidebar-nav list-group border-0 rounded-0 text-sm-start min-vh-100"},pt={class:"card m-2 p-2 bg-light"},_t={key:0,class:"text-center"},wt={key:0,class:"mt-3"},vt={key:1,class:"mt-2"},St=t("hr",null,null,-1),yt={class:"nav nav-pills flex-column"},kt={class:"list-group"},Nt={class:"list-group"},$t={class:"list-group"},Ct=t("hr",null,null,-1),Mt=t("i",{class:"bi bi-rocket-takeoff"},null,-1),Pt=t("i",{class:"bi bi-bell"},null,-1),Lt={key:0,class:"badge text-bg-secondary"},Dt=t("i",{class:"bi bi-person"},null,-1),At=t("i",{class:"bi bi-award"},null,-1),Ut=t("i",{class:"bi bi-send"},null,-1),Rt=t("i",{class:"bi bi-search"},null,-1),Tt=t("i",{class:"bi bi-cash-stack"},null,-1),Wt=t("i",{class:"bi bi-arrow-down-up"},null,-1),xt=t("i",{class:"bi bi-key"},null,-1),It=t("i",{class:"bi bi-gift"},null,-1),Ot=["href"],Ft=t("i",{class:"bi bi-box2"},null,-1),Bt=t("small",null,[t("i",{class:"bi bi-box-arrow-up-right ms-1"})],-1),Et=t("i",{class:"bi bi-binoculars"},null,-1),Vt=t("i",{class:"bi bi-patch-question"},null,-1);function Ht(e,s,r,a,o,i){const l=b("ProfileImage"),u=U;return n(),d("div",gt,[t("div",{id:"sidebar1",class:_(["collapse collapse-horizontal",e.$config.sidebarLeftSticky?"sticky-lg-top":""])},[t("div",bt,[t("div",pt,[a.isActivated?(n(),d("div",_t,[c(u,{to:"/profile"},{default:p(()=>[(n(),y(l,{key:a.userStore.getOrbisImage,onClick:i.closeLeftSidebar,class:"img-fluid mt-3 rounded-circle w-30 sidebar-profile-image",address:a.address,domain:a.userStore.getDefaultDomain,image:a.userStore.getOrbisImage},null,8,["onClick","address","domain","image"]))]),_:1}),a.userStore.getDefaultDomain?(n(),d("h6",wt,g(ce(z)(a.userStore.getDefaultDomain)),1)):h("",!0),e.$config.activityPointsAddress&&e.$config.showFeatures.activityPoints?(n(),d("div",vt,[c(u,{to:"/activity-points",class:"btn btn-outline-primary btn-sm mt-2 mb-2"},{default:p(()=>[f(g(i.getUserAp)+" AP ",1)]),_:1})])):h("",!0),St])):h("",!0),t("ul",yt,[t("ul",kt,[c(u,{to:"/",class:_(["list-group-item cursor-pointer hover-color bg-light border-0",e.$route.path==="/"?"active":""]),onClick:i.closeLeftSidebar},{default:p(()=>[f(" General discussion ")]),_:1},8,["class","onClick"])]),t("ul",Nt,[c(u,{to:"/memes-images",class:_(["list-group-item cursor-pointer hover-color bg-light border-0",e.$route.path.startsWith("/memes-images")?"active":""]),onClick:i.closeLeftSidebar},{default:p(()=>[f(" Share images & NFTs ")]),_:1},8,["class","onClick"])]),t("ul",$t,[c(u,{to:"/shill",class:_(["list-group-item cursor-pointer hover-color bg-light border-0",e.$route.path.startsWith("/shill")?"active":""]),onClick:i.closeLeftSidebar},{default:p(()=>[f(" Shill & discuss projects ")]),_:1},8,["class","onClick"])]),Ct,e.$config.nftLaunchpadBondingAddress&&e.$config.showFeatures.nftLaunchpad?(n(),d("li",{key:0,class:"nav-item p-1",onClick:s[0]||(s[0]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/nft")?"active":""]),"aria-current":"page",to:"/nft"},{default:p(()=>[Mt,f(" NFT Launchpad ")]),_:1},8,["class"])])):h("",!0),a.isActivated?(n(),d("li",{key:1,class:"nav-item p-1",onClick:s[1]||(s[1]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/notifications")?"active":""]),"aria-current":"page",to:"/notifications"},{default:p(()=>[Pt,f(" Notifications "),!a.notificationsStore.getLoadingNotifications&&a.notificationsStore.getUnreadNotificationsCount>0?(n(),d("span",Lt,g(a.notificationsStore.getUnreadNotificationsCount),1)):h("",!0)]),_:1},8,["class"])])):h("",!0),a.isActivated?(n(),d("li",{key:2,class:"nav-item p-1",onClick:s[2]||(s[2]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/profile")?"active":""]),"aria-current":"page",to:"/profile"},{default:p(()=>[Dt,f(" Profile ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.activityPoints&&e.$config.activityPointsAddress?(n(),d("li",{key:3,class:"nav-item p-1",onClick:s[3]||(s[3]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/activity-points")?"active":""]),"aria-current":"page",to:"/activity-points"},{default:p(()=>[At,f(" Activity Points ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.sendTokens?(n(),d("li",{key:4,class:"nav-item p-1",onClick:s[4]||(s[4]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/send-tokens")?"active":""]),"aria-current":"page",to:"/send-tokens"},{default:p(()=>[Ut,f(" Send Tokens ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.searchPosts?(n(),d("li",{key:5,class:"nav-item p-1",onClick:s[5]||(s[5]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/search-posts")?"active":""]),"aria-current":"page",to:"/search-posts"},{default:p(()=>[Rt,f(" Search Posts ")]),_:1},8,["class"])])):h("",!0),e.$config.stakingContractAddress&&e.$config.showFeatures.stake?(n(),d("li",{key:6,class:"nav-item p-1",onClick:s[6]||(s[6]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/stake")?"active":""]),"aria-current":"page",to:"/stake"},{default:p(()=>[Tt,f(" Stake & Earn ")]),_:1},8,["class"])])):h("",!0),e.$config.swapRouterAddress&&e.$config.showFeatures.swap?(n(),d("li",{key:7,class:"nav-item p-1",onClick:s[7]||(s[7]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/swap")?"active":""]),"aria-current":"page",to:"/swap"},{default:p(()=>[Wt,f(" Swap ")]),_:1},8,["class"])])):h("",!0),e.$config.keysAddress&&e.$config.showFeatures.friendKeys?(n(),d("li",{key:8,class:"nav-item p-1",onClick:s[8]||(s[8]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/keys")?"active":""]),"aria-current":"page",to:"/keys"},{default:p(()=>[xt,f(" Friend Keys ")]),_:1},8,["class"])])):h("",!0),(e.$config.airdropClaimDomainsAddress||e.$config.airdropApAddress)&&e.$config.showFeatures.airdrop?(n(),d("li",{key:9,class:"nav-item p-1",onClick:s[9]||(s[9]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/airdrop")?"active":""]),"aria-current":"page",to:"/airdrop"},{default:p(()=>[It,f(" Airdrop ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.governance?(n(),d("li",{key:10,class:"nav-item p-1",onClick:s[10]||(s[10]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[t("a",{class:"nav-link",href:e.$config.governanceUrl,target:"_blank"},[Ft,f(" Governance "),Bt],8,Ot)])):h("",!0),t("li",{class:"nav-item p-1",onClick:s[11]||(s[11]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/find-user")?"active":""]),"aria-current":"page",to:"/find-user"},{default:p(()=>[Et,f(" Find User ")]),_:1},8,["class"])]),t("li",{class:"nav-item p-1",onClick:s[12]||(s[12]=(...m)=>i.closeLeftSidebar&&i.closeLeftSidebar(...m))},[c(u,{class:_(["nav-link",e.$route.path.startsWith("/about")?"active":""]),"aria-current":"page",to:"/about"},{default:p(()=>[Vt,f(" About ")]),_:1},8,["class"])])])])])],2)])}const jt=w(ft,[["render",Ht]]),Kt={name:"MintedPostsWidget",emits:["closeRightSidebar"],data(){return{numberOfPosts:this.$config.randomPostsNumber,randomNumbers:[]}},components:{MintedPostImage:ke},mounted(){this.fetchRandomMintedPosts()},computed:{getImageColumnWidth(){return this.$config.randomPostsNumber===1?"col-12":"col-12 mt-4"},getWidgetTitle(){return this.$config.randomPostsNumber===1?"Random Minted Post":"Random Minted Posts"}},methods:{async fetchRandomMintedPosts(){let e=this.$getFallbackProvider(this.$config.supportedChainId);this.isActivated&&this.chainId===this.$config.supportedChainId&&(e=this.signer);const s=new $(["function counter() external view returns (uint256)"]),a=await new C(this.$config.iggyPostAddress,s,e).counter();if(Number(a)>1)for(this.randomNumbers=[];this.randomNumbers.length<this.numberOfPosts;){const o=Math.floor(Math.random()*(a-1))+1;this.randomNumbers.includes(o)||this.randomNumbers.push(o)}}},setup(){const{isActivated:e,chainId:s,signer:r}=k();return{isActivated:e,chainId:s,signer:r}}},zt={key:0,class:"card m-2 bg-light"},Yt={class:"card-header bg-light"},Gt={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},qt={class:"card-body sidebar-card-body"},Zt={class:"row"},Jt={class:"card-footer bg-light text-body-secondary text-center"},Qt=["href"],Xt=t("i",{class:"bi bi-box-arrow-up-right ms-1"},null,-1);function es(e,s,r,a,o,i){const l=b("MintedPostImage");return o.randomNumbers.length>0?(n(),d("div",zt,[t("div",Yt,[o.randomNumbers.length<o.numberOfPosts?(n(),d("span",Gt)):h("",!0),f(" "+g(i.getWidgetTitle),1)]),t("div",qt,[t("div",Zt,[(n(!0),d(x,null,he(o.randomNumbers,u=>(n(),d("div",{class:_(i.getImageColumnWidth),key:u},[c(l,{id:u,onClick:s[0]||(s[0]=m=>e.$emit("closeRightSidebar"))},null,8,["id"])],2))),128))])]),t("div",Jt,[t("a",{href:e.$config.marketplacePostNftUrl,class:"btn btn-outline-primary mb-3",target:"_blank"},[f(" See all minted posts "),Xt],8,Qt)])])):h("",!0)}const ts=w(Kt,[["render",es]]),ss={name:"NameMintWidget",data(){return{domainName:null,isMinter:!1,loadingData:!1,loadingMint:!1,paused:!0,price:null,price1char:null,price2char:null,price3char:null,price4char:null,price5char:null}},components:{ConnectWalletButton:O,SwitchChainButton:F,WaitingToast:A},mounted(){this.fetchDomainData()},computed:{balanceTooLow(){const e=ue(this.balance);return Number(e)<Number(this.getNamePrice)},domainNotValid(){return this.domainName===""?{invalid:!0,message:null}:this.domainName===null?{invalid:!0,message:null}:this.domainName.includes(".")?{invalid:!0,message:"Dots not allowed"}:this.domainName.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:this.domainName.includes("%")?{invalid:!0,message:"% not allowed"}:this.domainName.includes("&")?{invalid:!0,message:"& not allowed"}:this.domainName.includes("?")?{invalid:!0,message:"? not allowed"}:this.domainName.includes("#")?{invalid:!0,message:"# not allowed"}:this.domainName.includes("/")?{invalid:!0,message:"/ not allowed"}:this.domainName.includes(",")?{invalid:!0,message:"Comma not allowed"}:this.domainName.includes("\\")||this.domainName.includes("\xAD")||this.domainName.includes("	")||this.domainName.includes("\u034F")||this.domainName.includes("\u061C")||this.domainName.includes("\u070F")||this.domainName.includes("\u115F")||this.domainName.includes("\u1160")||this.domainName.includes("\u1680")||this.domainName.includes("\u17B4")||this.domainName.includes("\u17B5")||this.domainName.includes("\u180E")||this.domainName.includes("\u2000")||this.domainName.includes("\u2001")||this.domainName.includes("\u2002")||this.domainName.includes("\u2003")||this.domainName.includes("\u2004")||this.domainName.includes("\u2005")||this.domainName.includes("\u2006")||this.domainName.includes("\u2007")||this.domainName.includes("\u2008")||this.domainName.includes("\u2009")||this.domainName.includes("\u200A")||this.domainName.includes("\u200B")||this.domainName.includes("\u200C")||this.domainName.includes("\u200D")||this.domainName.includes("\u200E")||this.domainName.includes("\u200F")||this.domainName.includes("\u202F")||this.domainName.includes("\u205F")||this.domainName.includes("\u2060")||this.domainName.includes("\u2061")||this.domainName.includes("\u2062")||this.domainName.includes("\u2063")||this.domainName.includes("\u2064")||this.domainName.includes("\u206A")||this.domainName.includes("\u206B")||this.domainName.includes("\u206C")||this.domainName.includes("\u206D")||this.domainName.includes("\u206E")||this.domainName.includes("\u206F")||this.domainName.includes("\u3000")||this.domainName.includes("\u2800")||this.domainName.includes("\u3164")||this.domainName.includes("\uFFA0")||this.domainName.includes("\u{110B1}")||this.domainName.includes("\u{1BCA0}")||this.domainName.includes("\u{1BCA1}")||this.domainName.includes("\u{1BCA2}")||this.domainName.includes("\u{1BCA3}")||this.domainName.includes("\u{1D159}")||this.domainName.includes("\u{1D173}")||this.domainName.includes("\u{1D174}")||this.domainName.includes("\u{1D175}")||this.domainName.includes("\u{1D176}")||this.domainName.includes("\u{1D177}")||this.domainName.includes("\u{1D178}")||this.domainName.includes("\u{1D179}")||this.domainName.includes("\u{1D17A}")||this.domainName.includes("\v")||this.domainName.includes("\f")||this.domainName.includes("\x85")?{invalid:!0,message:"This character is not allowed"}:{invalid:!1,message:"Domain name is valid"}},getNamePrice(){return this.$config.punkNumberOfPrices===1?this.price:this.domainName?this.domainName.match(/./gu).length===1?this.price1char:this.domainName.match(/./gu).length===2?this.price2char:this.domainName.match(/./gu).length===3?this.price3char:this.domainName.match(/./gu).length===4?this.price4char:this.domainName.match(/./gu).length>=5?this.price5char:this.price5char:this.price5char},isSupportedChain(){return this.chainId===this.$config.supportedChainId}},methods:{getDomainName:B,async fetchDomainData(){this.loadingData=!0,this.isMinter=this.$config.punkMinterAddress!=="";const e=new $(["function buyingEnabled() view returns (bool)","function paused() view returns (bool)","function price() view returns (uint256)","function price1char() view returns (uint256)","function price2char() view returns (uint256)","function price3char() view returns (uint256)","function price4char() view returns (uint256)","function price5char() view returns (uint256)","function referral() view returns (uint256)","function referralFee() view returns (uint256)"]);let s;this.isMinter?s=this.$config.punkMinterAddress:s=this.$config.punkTldAddress;let r=this.$getFallbackProvider(this.$config.supportedChainId);const a=new C(s,e,r);this.isMinter?this.paused=await a.paused():this.paused=!await a.buyingEnabled(),this.$config.punkNumberOfPrices===1?this.price=N(await a.price(),this.$config.tokenDecimals):this.$config.punkNumberOfPrices===5&&(this.price1char=N(await a.price1char(),this.$config.tokenDecimals),this.price2char=N(await a.price2char(),this.$config.tokenDecimals),this.price3char=N(await a.price3char(),this.$config.tokenDecimals),this.price4char=N(await a.price4char(),this.$config.tokenDecimals),this.price5char=N(await a.price5char(),this.$config.tokenDecimals)),this.isMinter?this.referralFee=await a.referralFee():this.referralFee=await a.referral(),this.loadingData=!1},async fetchUserDomain(){if(this.isActivated){let e;this.signer?e=await this.getDomainName(this.address,this.signer):e=await this.getDomainName(this.address),e?(this.userStore.setDefaultDomain(e+this.$config.tldName),E(window,this.address,e+this.$config.tldName)):this.userStore.setDefaultDomain(null)}},async mintName(){if(this.loadingMint=!0,this.isActivated&&!this.domainNotValid.invalid){const e=new $(["function getDomainHolder(string) view returns (address)"]);if(await new C(this.$config.punkTldAddress,e,this.signer).getDomainHolder(this.domainName.toLowerCase())!==H){this.toast("This name is already taken",{type:"error"}),this.loadingMint=!1;return}try{const a=new $(["function mint(string memory _domainName, address _domainHolder, address _referrer) external payable returns(uint256)"]);let o;this.isMinter?o=this.$config.punkMinterAddress:o=this.$config.punkTldAddress;const l=await new C(o,a,this.signer).mint(this.domainName.toLowerCase(),this.address,Ne(window),{value:j(this.getNamePrice,this.$config.tokenDecimals)}),u=this.toast({component:A,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),m=await l.wait();m.status===1?(this.toast.dismiss(u),this.fetchUserDomain(),this.toast("You have successfully minted a name!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.loadingMint=!1):(this.toast.dismiss(u),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.loadingMint=!1,console.log(m))}catch(a){console.log("error: "+a),this.toast("Error: "+a,{type:"error"}),this.loadingMint=!1;return}}}},setup(){const{address:e,balance:s,chainId:r,isActivated:a,signer:o}=k(),i=D(),l=P();return{address:e,balance:s,chainId:r,isActivated:a,signer:o,toast:i,userStore:l}}},is={class:"card m-2 bg-light"},as={class:"card-header bg-light"},os={class:"card-body sidebar-card-body"},ns={class:"input-group mb-3"},rs={class:"input-group-text",id:"mint-name"},ds={key:0,class:"text-danger"},ls=t("i",{class:"bi bi-exclamation-octagon"},null,-1),cs={class:"text-center"},hs=["disabled"],us={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},ms={key:1},fs={key:2};function gs(e,s,r,a,o,i){const l=b("ConnectWalletButton"),u=b("SwitchChainButton");return n(),d("div",is,[t("div",as,"Get a "+g(e.$config.tldName)+" name",1),t("div",os,[t("p",null," Get yourself a "+g(e.$config.tldName)+" username and start chatting with other community members. ",1),t("div",ns,[M(t("input",{type:"text",class:"form-control text-end",placeholder:"enter name","aria-describedby":"mint-name","onUpdate:modelValue":s[0]||(s[0]=m=>o.domainName=m)},null,512),[[L,o.domainName]]),t("span",rs,g(e.$config.tldName),1)]),i.domainNotValid.invalid&&i.domainNotValid.message?(n(),d("p",ds,[t("small",null,[ls,f(" "+g(i.domainNotValid.message),1)])])):h("",!0),t("p",null," Minting price: "+g(i.getNamePrice)+" "+g(e.$config.tokenSymbol),1),t("div",cs,[a.isActivated&&i.isSupportedChain?(n(),d("button",{key:0,class:"btn btn-outline-primary mt-2 mb-2",disabled:o.paused||i.domainNotValid.invalid||i.balanceTooLow},[o.loadingMint||o.loadingData?(n(),d("span",us)):h("",!0),o.loadingData?(n(),d("span",ms,"Loading data...")):h("",!0),!o.loadingMint&&!o.loadingData&&i.balanceTooLow?(n(),d("span",fs,"Balance too low")):h("",!0),!o.loadingMint&&!o.loadingData&&!i.balanceTooLow?(n(),d("span",{key:3,onClick:s[1]||(s[1]=(...m)=>i.mintName&&i.mintName(...m))},"Mint username")):h("",!0)],8,hs)):h("",!0),a.isActivated?h("",!0):(n(),y(l,{key:1,class:"btn btn-outline-primary mt-2 mb-2",btnText:"Connect Wallet"})),a.isActivated&&!i.isSupportedChain?(n(),y(u,{key:2})):h("",!0)])])])}const bs=w(ss,[["render",gs]]),ps={name:"SimpleSwapWidget",props:["poweredBy","routerAddress","title","tokens"],components:{SimpleSwap:Ce}},_s={class:"card m-2 bg-light"},ws={class:"card-header bg-light"},vs={class:"card-body sidebar-card-body"};function Ss(e,s,r,a,o,i){const l=b("SimpleSwap");return n(),d("div",_s,[t("div",ws,g(r.title),1),t("div",vs,[c(l,{class:"mt-3",routerAddress:r.routerAddress,swapId:"SidebarRight1",tokens:r.tokens,poweredBy:r.poweredBy},null,8,["routerAddress","tokens","poweredBy"])])])}const ys=w(ps,[["render",Ss]]),ks={name:"KeysListWidget",components:{KeysList:Me},setup(){const{isActivated:e}=k();return{isActivated:e}}},Ns={class:"card m-2 bg-light"},$s=t("div",{class:"card-header bg-light"},"Featured Friend Keys",-1),Cs={class:"card-body sidebar-card-body"},Ms={class:"d-flex justify-content-center mt-4"};function Ps(e,s,r,a,o,i){const l=b("KeysList"),u=U;return n(),d("div",Ns,[$s,t("div",Cs,[c(l),t("div",Ms,[c(u,{class:"btn btn-outline-primary",to:"/keys"},{default:p(()=>[f("Get a Friend Key")]),_:1})])])])}const Ls=w(ks,[["render",Ps]]),Ds={name:"ReferralWidget",components:{ShareReferralLink:G}},As={class:"card m-2 bg-light"},Us=t("div",{class:"card-header bg-light"},"Your referral link \u{1F911}",-1),Rs={class:"card-body sidebar-card-body"},Ts=t("p",null,"Share your referral link and earn referral fees!",-1);function Ws(e,s,r,a,o,i){const l=b("ShareReferralLink");return n(),d("div",As,[Us,t("div",Rs,[Ts,c(l)])])}const xs=w(Ds,[["render",Ws]]),Is={name:"SidebarRight",props:["rSidebar","isMobile"],components:{KeysListWidget:Ls,MintedPostsWidget:ts,NameMintWidget:bs,ReferralWidget:xs,SimpleSwapWidget:ys},methods:{closeRightSidebar(){this.isMobile&&(this.sidebarStore.setRightSidebar(!1),this.sidebarStore.setMainContent(!0))}},setup(){return{sidebarStore:R(),tokens:ye}}},Os={class:"col-auto col-lg-3 px-0 mt-1"},Fs={id:"sidebar-nav",class:"list-group border-0 rounded-0 text-sm-start min-vh-100"},Bs={key:0,class:"card m-2 bg-light"},Es={class:"card-header bg-light"},Vs={class:"card-body sidebar-card-body"},Hs=["src"],js={key:3,class:"card m-2 bg-light"},Ks={class:"card-header bg-light"},zs={class:"card-body sidebar-card-body"},Ys=["href"],Gs=t("i",{class:"bi bi-box-arrow-up-right ms-1"},null,-1);function qs(e,s,r,a,o,i){const l=b("NameMintWidget"),u=b("ReferralWidget"),m=b("SimpleSwapWidget"),v=b("MintedPostsWidget");return n(),d("div",Os,[t("div",{id:"sidebar2",class:_(["collapse collapse-horizontal",{show:a.sidebarStore.showRightSidebar}])},[t("div",Fs,[c(l),c(u),e.$config.showFeatures.spotify?(n(),d("div",Bs,[t("div",Es,g(e.$config.projectName)+" Playlist",1),t("div",Vs,[t("iframe",{style:{"border-radius":"12px"},src:"https://open.spotify.com/embed/playlist/"+e.$config.spotifyPlaylistId+"?utm_source=generator&theme=0",width:"100%",height:"352",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,Hs)])])):h("",!0),e.$config.swapRouterAddress&&e.$config.showFeatures.swap?(n(),y(m,{key:1,routerAddress:e.$config.swapRouterAddress,tokens:a.tokens,title:"Swap tokens"},null,8,["routerAddress","tokens"])):h("",!0),e.$config.showFeatures.randomMintedPosts?(n(),y(v,{key:2,onCloseRightSidebar:i.closeRightSidebar},null,8,["onCloseRightSidebar"])):h("",!0),e.$config.newsletterLink&&e.$config.showFeatures.newsletter?(n(),d("div",js,[t("div",Ks,g(e.$config.projectName)+" Newsletter",1),t("div",zs,[t("a",{class:"btn btn-outline-primary mt-2 mb-2",target:"_blank",href:e.$config.newsletterLink},[f(" Join our newsletter! "),Gs],8,Ys)])])):h("",!0)])],2)])}const Zs=w(Is,[["render",qs]]),Js={name:"ChatSettingsModal",data(){return{showRepliesOnHomeFeed:null}},mounted(){window.localStorage.getItem("showOnlyMasterPosts")?window.localStorage.getItem("showOnlyMasterPosts")=="true"?this.showRepliesOnHomeFeed=!1:this.showRepliesOnHomeFeed=!0:this.$config.showRepliesOnHomepage?(this.siteStore.setShowOnlyMasterPosts("false"),this.showRepliesOnHomeFeed=!0):(this.siteStore.setShowOnlyMasterPosts("true"),this.showRepliesOnHomeFeed=!1)},computed:{slippage:{get(){return this.siteStore.getSlippage},set(e){this.siteStore.setSlippage(e)}},deadline:{get(){return this.siteStore.getSwapDeadline},set(e){this.siteStore.setSwapDeadline(e)}}},methods:{toggleShowOnlyMasterPosts(){this.siteStore.getShowOnlyMasterPosts==="true"?this.siteStore.setShowOnlyMasterPosts("false"):this.siteStore.setShowOnlyMasterPosts("true")}},setup(){return{siteStore:I()}}},Qs={class:"modal fade",id:"chatSettingsModal",tabindex:"-1","aria-labelledby":"chatSettingsModalLabel","aria-hidden":"true"},Xs={class:"modal-dialog"},ei={class:"modal-content"},ti=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"chatSettingsModalLabel"},"Settings"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),si={class:"modal-body"},ii=t("p",null,[t("strong",null,"Chat")],-1),ai={class:"form-check"},oi=["checked"],ni=t("label",{class:"form-check-label",for:"flexCheckChecked"}," Show replies in home feed ",-1),ri=t("hr",null,null,-1),di=t("p",null,[t("strong",null,"Swap")],-1),li={class:"row"},ci={class:"col-sm-6 mb-2"},hi={class:"input-group flex-nowrap"},ui=t("span",{class:"input-group-text",id:"addon-wrapping"},"Slippage",-1),mi=t("span",{class:"input-group-text",id:"addon-wrapping"},"%",-1),fi={class:"col-sm-6 mb-2"},gi={class:"input-group flex-nowrap"},bi=t("span",{class:"input-group-text",id:"addon-wrapping"},"Deadline",-1),pi=t("span",{class:"input-group-text",id:"addon-wrapping"},"min",-1);function _i(e,s,r,a,o,i){return n(),d("div",Qs,[t("div",Xs,[t("div",ei,[ti,t("div",si,[ii,t("div",ai,[t("input",{class:"form-check-input",type:"checkbox",id:"flexCheckChecked",checked:o.showRepliesOnHomeFeed,onClick:s[0]||(s[0]=(...l)=>i.toggleShowOnlyMasterPosts&&i.toggleShowOnlyMasterPosts(...l))},null,8,oi),ni]),ri,di,t("div",li,[t("div",ci,[t("div",hi,[ui,M(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=l=>i.slippage=l),"aria-describedby":"addon-wrapping"},null,512),[[L,i.slippage]]),mi])]),t("div",fi,[t("div",gi,[bi,M(t("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>i.deadline=l),type:"text",class:"form-control","aria-describedby":"addon-wrapping"},null,512),[[L,i.deadline]]),pi])])])])])])])}const wi=w(Js,[["render",_i]]),vi={name:"VerifyAccountOwnership",methods:{async connectToOrbis(){let e=this.$getFallbackProvider(this.$config.supportedChainId),s=await this.$orbis.connect_v2({provider:e.provider,lit:!1});s.status==200?(this.userStore.setIsConnectedToOrbis(!0),this.$orbis.session&&(this.userStore.setDid(this.$orbis.session.did._id),this.userStore.setDidParent(this.$orbis.session.did._parentId)),document.getElementById("closeVerifyAccountModal").click()):(console.log("Error verifying account: ",s),this.toast(s.result,{type:"error"}))}},setup(){const e=P(),s=D();return{userStore:e,toast:s}}},Si={class:"modal fade",id:"verifyAccountModal",tabindex:"-1","aria-labelledby":"verifyAccountModalLabel","aria-hidden":"true"},yi={class:"modal-dialog",role:"document"},ki={class:"modal-content"},Ni=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Verify Account Ownership"),t("button",{id:"closeVerifyAccountModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"})])],-1),$i={class:"modal-body p-3 mb-3"},Ci=t("p",null," Verify that you really own this account/wallet. This will allow you to use chat, change profile image, and set some other settings. ",-1);function Mi(e,s,r,a,o,i){return n(),d("div",Si,[t("div",yi,[t("div",ki,[Ni,t("div",$i,[Ci,t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...l)=>i.connectToOrbis&&i.connectToOrbis(...l))}," Verify your account ")])])])])}const Pi=w(vi,[["render",Mi]]),Li={name:"ReferralModal",components:{ShareReferralLink:G}},Di={class:"modal fade",id:"referralModal",tabindex:"-1","aria-labelledby":"referralModalLabel","aria-hidden":"true"},Ai={class:"modal-dialog"},Ui={class:"modal-content"},Ri=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"referralModalLabel"},"Share referral link"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ti={class:"modal-body"},Wi={key:0},xi=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);function Ii(e,s,r,a,o,i){const l=b("ShareReferralLink");return n(),d("div",Di,[t("div",Ai,[t("div",Ui,[Ri,t("div",Ti,[t("p",null,[f("Share your referral link and earn referral fees"),e.$config.showFeatures.activityPoints?(n(),d("span",Wi," (and activity points)")):h("",!0),f("! \u{1F911}")]),c(l)]),xi])])])}const Oi=w(Li,[["render",Ii]]),Fi={name:"ChangeUsernameModal",data(){return{domainName:null,loading:!1}},computed:{domainNotValid(){return this.domainName===""?{invalid:!0,message:null}:this.domainName===null?{invalid:!0,message:null}:this.domainName.includes(".")?{invalid:!0,message:"Dots not allowed"}:this.domainName.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:this.domainName.includes("%")?{invalid:!0,message:"% not allowed"}:this.domainName.includes("&")?{invalid:!0,message:"& not allowed"}:this.domainName.includes("?")?{invalid:!0,message:"? not allowed"}:this.domainName.includes("#")?{invalid:!0,message:"# not allowed"}:this.domainName.includes("/")?{invalid:!0,message:"/ not allowed"}:this.domainName.includes(",")?{invalid:!0,message:"Comma not allowed"}:this.domainName.includes("\\")||this.domainName.includes("\xAD")||this.domainName.includes("	")||this.domainName.includes("\u034F")||this.domainName.includes("\u061C")||this.domainName.includes("\u070F")||this.domainName.includes("\u115F")||this.domainName.includes("\u1160")||this.domainName.includes("\u1680")||this.domainName.includes("\u17B4")||this.domainName.includes("\u17B5")||this.domainName.includes("\u180E")||this.domainName.includes("\u2000")||this.domainName.includes("\u2001")||this.domainName.includes("\u2002")||this.domainName.includes("\u2003")||this.domainName.includes("\u2004")||this.domainName.includes("\u2005")||this.domainName.includes("\u2006")||this.domainName.includes("\u2007")||this.domainName.includes("\u2008")||this.domainName.includes("\u2009")||this.domainName.includes("\u200A")||this.domainName.includes("\u200B")||this.domainName.includes("\u200C")||this.domainName.includes("\u200D")||this.domainName.includes("\u200E")||this.domainName.includes("\u200F")||this.domainName.includes("\u202F")||this.domainName.includes("\u205F")||this.domainName.includes("\u2060")||this.domainName.includes("\u2061")||this.domainName.includes("\u2062")||this.domainName.includes("\u2063")||this.domainName.includes("\u2064")||this.domainName.includes("\u206A")||this.domainName.includes("\u206B")||this.domainName.includes("\u206C")||this.domainName.includes("\u206D")||this.domainName.includes("\u206E")||this.domainName.includes("\u206F")||this.domainName.includes("\u3000")||this.domainName.includes("\u2800")||this.domainName.includes("\u3164")||this.domainName.includes("\uFFA0")||this.domainName.includes("\u{110B1}")||this.domainName.includes("\u{1BCA0}")||this.domainName.includes("\u{1BCA1}")||this.domainName.includes("\u{1BCA2}")||this.domainName.includes("\u{1BCA3}")||this.domainName.includes("\u{1D159}")||this.domainName.includes("\u{1D173}")||this.domainName.includes("\u{1D174}")||this.domainName.includes("\u{1D175}")||this.domainName.includes("\u{1D176}")||this.domainName.includes("\u{1D177}")||this.domainName.includes("\u{1D178}")||this.domainName.includes("\u{1D179}")||this.domainName.includes("\u{1D17A}")||this.domainName.includes("\v")||this.domainName.includes("\f")||this.domainName.includes("\x85")?{invalid:!0,message:"This character is not allowed"}:{invalid:!1,message:"Domain name is valid"}}},methods:{getDomainName:B,async changeUsername(){if(this.loading=!0,this.isActivated&&!this.domainNotValid.invalid){const e=new $(["function editDefaultDomain(string calldata _domainName) external"]),s=new C(this.$config.punkTldAddress,e,this.signer);try{const r=await s.editDefaultDomain(this.domainName.toLowerCase()),a=this.toast({component:A,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),o=await r.wait();o.status===1?(this.toast.dismiss(a),this.fetchUserDomain(),this.toast("You have successfully changed your username!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),this.loading=!1,document.getElementById("closeChangeUsernameModal").click()):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),this.loading=!1,console.log(o))}catch(r){console.log("error: "+r),this.toast("Error: "+r,{type:"error"}),this.loading=!1;return}}},async fetchUserDomain(){if(this.isActivated){let e;this.signer?e=await this.getDomainName(this.address,this.signer):e=await this.getDomainName(this.address),e?(this.userStore.setDefaultDomain(e+this.$config.tldName),E(window,this.address,e+this.$config.tldName)):this.userStore.setDefaultDomain(null)}}},setup(){const{address:e,isActivated:s,signer:r}=k(),a=D(),o=P();return{address:e,isActivated:s,signer:r,toast:a,userStore:o}}},Bi={class:"modal fade",id:"changeUsernameModal",tabindex:"-1","aria-labelledby":"changeUsernameModalLabel","aria-hidden":"true"},Ei={class:"modal-dialog"},Vi={class:"modal-content"},Hi=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"changeUsernameModalLabel"},"Change your username"),t("button",{id:"closeChangeUsernameModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ji={class:"modal-body"},Ki=t("p",null,"Enter your new main username (you must own it):",-1),zi={class:"input-group mb-3"},Yi={class:"input-group-text"},Gi={key:0,class:"text-danger"},qi=t("i",{class:"bi bi-exclamation-octagon"},null,-1),Zi={class:"modal-footer"},Ji=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Qi=["disabled"],Xi={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function ea(e,s,r,a,o,i){return n(),d("div",Bi,[t("div",Ei,[t("div",Vi,[Hi,t("div",ji,[Ki,t("div",zi,[M(t("input",{type:"text",class:"form-control text-end",placeholder:"enter name","onUpdate:modelValue":s[0]||(s[0]=l=>o.domainName=l)},null,512),[[L,o.domainName]]),t("span",Yi,g(e.$config.tldName),1)]),i.domainNotValid.invalid&&i.domainNotValid.message?(n(),d("p",Gi,[t("small",null,[qi,f(" "+g(i.domainNotValid.message),1)])])):h("",!0)]),t("div",Zi,[Ji,t("button",{type:"button",disabled:o.loading||i.domainNotValid.invalid,class:"btn btn-primary",onClick:s[1]||(s[1]=(...l)=>i.changeUsername&&i.changeUsername(...l))},[o.loading?(n(),d("span",Xi)):h("",!0),f(" Submit ")],8,Qi)])])])])}const ta=w(Fi,[["render",ea]]),sa={name:"ChangeUserPostMintPriceModal",data(){return{defaultPostPrice:null,loading:!1,inputDisabled:!1,isModalOpen:!1,observer:null,selectedPostPrice:null,userHasCustomPrice:!1}},mounted(){this.observer=new MutationObserver(e=>{for(const s of e){const r=s.target.getAttribute(s.attributeName);this.$nextTick(()=>{this.onModalOpen(r,s.oldValue)})}}),this.observer.observe(this.$refs.modalRef,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})},beforeUnmount(){this.observer.disconnect()},methods:{async getDefaultPostPrice(){if(this.isActivated){this.inputDisabled=!0;try{const e=new $(["function getAuthorsDefaultPrice(address) public view returns (uint256)","function defaultPrice() external view returns (uint256)"]),s=new C(this.$config.iggyPostAddress,e,this.signer),r=await s.getAuthorsDefaultPrice(this.address),a=await s.defaultPrice();this.defaultPostPrice=N(a,this.$config.tokenDecimals);let o;r.isZero()?(o=a,this.userHasCustomPrice=!1):(o=r,this.userHasCustomPrice=!0),this.selectedPostPrice=N(o,this.$config.tokenDecimals)}catch(e){console.log("Failed to get default post price: "+e)}finally{this.inputDisabled=!1}}},async changeDefaultPostPrice(){if(this.loading=!0,this.inputDisabled=!0,this.isActivated){const e=new $(["function authorSetDefaultPrice(uint256 _price) external"]),s=new C(this.$config.iggyPostAddress,e,this.signer),r=j(this.selectedPostPrice,this.$config.tokenDecimals);try{if(r.isNegative()){this.toast("Error: Cannot set a negative price",{type:"error"});return}const a=await s.authorSetDefaultPrice(r),o=this.toast({component:A,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),i=await a.wait();i.status===1?(this.toast.dismiss(o),this.toast("You have successfully changed your default post price!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),document.getElementById("closeChangeDefaultPostPriceModal").click()):(this.toast.dismiss(o),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+a.hash,"_blank").focus()}),console.log(i))}catch(a){console.log("error: "+a),this.toast("Error: "+a,{type:"error"});return}finally{this.getDefaultPostPrice(),this.loading=!1,this.inputDisabled=!1}}},onModalOpen(e){e.split(" ").includes("show")?this.isModalOpen=!0:this.isModalOpen=!1}},setup(){const{address:e,isActivated:s,signer:r}=k(),a=D();return{address:e,isActivated:s,signer:r,toast:a}},watch:{isModalOpen(){this.isModalOpen&&this.getDefaultPostPrice()}}},ia={ref:"modalRef",class:"modal fade",id:"changeDefaultPostPriceModal",tabindex:"-1","aria-labelledby":"changeDefaultPostPriceModalLabel","aria-hidden":"true"},aa={class:"modal-dialog"},oa={class:"modal-content"},na=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"changeDefaultPostPriceModalLabel"},"Change Post Mint Price"),t("button",{id:"closeChangeDefaultPostPriceModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ra={class:"modal-body"},da={key:0},la={key:1},ca=t("p",null," You can set a custom price for your posts via this form: ",-1),ha={class:"row"},ua={class:"col-sm-6 mb-2"},ma={class:"input-group flex-nowrap"},fa=["disabled"],ga={class:"input-group-text",id:"addon-wrapping"},ba={class:"modal-footer"},pa=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),_a=["disabled"],wa={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function va(e,s,r,a,o,i){return n(),d("div",ia,[t("div",aa,[t("div",oa,[na,t("div",ra,[o.userHasCustomPrice?h("",!0):(n(),d("p",da," You currently do not have a custom price set up, so the price of minting your posts is the default post minting price of "+g(o.defaultPostPrice)+" "+g(e.$config.tokenSymbol)+". ",1)),o.userHasCustomPrice?(n(),d("p",la," Your current custom price for minting your posts is "+g(o.selectedPostPrice)+" "+g(e.$config.tokenSymbol)+". ",1)):h("",!0),ca,t("div",ha,[t("div",ua,[t("div",ma,[M(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=l=>o.selectedPostPrice=l),"aria-describedby":"addon-wrapping",disabled:o.inputDisabled},null,8,fa),[[L,o.selectedPostPrice]]),t("span",ga,g(e.$config.tokenSymbol),1)])]),t("small",null,[t("em",null,"If you set it to 0, the post mint price will be the default price of "+g(o.defaultPostPrice)+" "+g(e.$config.tokenSymbol),1)])])]),t("div",ba,[pa,t("button",{type:"button",disabled:o.loading,class:"btn btn-primary",onClick:s[1]||(s[1]=(...l)=>i.changeDefaultPostPrice&&i.changeDefaultPostPrice(...l))},[o.loading?(n(),d("span",wa)):h("",!0),f(" Submit ")],8,_a)])])])],512)}const Sa=w(sa,[["render",va]]),ya={name:"FindUserModal",components:{FindUser:Pe},methods:{closeModal(){document.getElementById("closeFindUserModal").click()}}},ka={class:"modal fade",id:"findUserModal",tabindex:"-1","aria-labelledby":"findUserModalLabel","aria-hidden":"true"},Na={class:"modal-dialog"},$a={class:"modal-content"},Ca=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"findUserModalLabel"},"Find user"),t("button",{id:"closeFindUserModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ma={class:"modal-body"},Pa=t("p",null,"Find user by their domain name:",-1);function La(e,s,r,a,o,i){const l=b("FindUser");return n(),d("div",ka,[t("div",Na,[t("div",$a,[Ca,t("div",Ma,[Pa,c(l,{onCloseModal:i.closeModal},null,8,["onCloseModal"])])])])])}const Da=w(ya,[["render",La]]),Aa=""+new URL("metamask.ee003f7b.png",import.meta.url).href,Ua=""+new URL("rabby.c4b282ef.png",import.meta.url).href,Ra=""+new URL("bifrost.58f773ff.png",import.meta.url).href,Ta=""+new URL("zerion.213df4fe.png",import.meta.url).href,Wa=""+new URL("coinbase.6efcbd0e.png",import.meta.url).href,xa=""+new URL("brave.0cb22c92.png",import.meta.url).href,Ia=""+new URL("trust.00f61f13.png",import.meta.url).href,Oa=""+new URL("imtoken.555e248e.png",import.meta.url).href,Fa={data(){return{breakpoint:1e3,isMounted:!1,lSidebar:null,referrer:null,rSidebar:null,width:null}},components:{ChangeUsernameModal:ta,ChangeUserPostMintPriceModal:Sa,ChatSettingsModal:wi,FindUserModal:Da,NavbarDesktop:tt,NavbarMobile:mt,ReferralModal:Oi,SidebarLeft:jt,SidebarRight:Zs,VerifyAccountOwnership:Pi},mounted(){this.isMounted=!0,document.documentElement.setAttribute("data-bs-theme",this.siteStore.getColorMode),this.lSidebar=new bootstrap.Collapse("#sidebar1",{toggle:!1}),this.rSidebar=new bootstrap.Collapse("#sidebar2",{toggle:!1}),this.width=window.innerWidth,this.width<this.breakpoint?(this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setRightSidebar(!1),this.lSidebar.hide(),this.rSidebar.hide()):(this.lSidebar.show(),this.sidebarStore.setLeftSidebar(!0),this.sidebarStore.setRightSidebar(!0)),window.addEventListener("resize",this.onWidthChange),this.isActivated||(localStorage.getItem("connected")=="metamask"?this.connectMetaMask():localStorage.getItem("connected")=="coinbase"&&this.connectCoinbase()),new bootstrap.Popover(document.body,{selector:"[data-bs-toggle='popover']"}),this.siteStore.setFileUploadEnabled(this.$config.fileUploadEnabled),this.referrer=this.$route.query.ref,this.referrer&&this.parseReferrer()},unmounted(){window.removeEventListener("resize",onWidthChange)},computed:{isConnectedToOrbis(){return this.userStore.getIsConnectedToOrbis},isMobile(){return this.width<this.breakpoint},orbisAddress(){if(this.userStore.getDidParent)return this.userStore.getDidParent.split(":").pop()}},methods:{getActivityPoints:Y,getDomainHolder:Se,getDomainName:B,async connectCoinbase(){await this.connectWith(this.coinbaseConnector),localStorage.setItem("connected","coinbase"),document.getElementById("closeConnectModal").click()},async connectMetaMask(){await this.connectWith(this.mmConnector),localStorage.setItem("connected","metamask"),document.getElementById("closeConnectModal").click()},async fetchActivityPoints(){if(this.$config.activityPointsAddress){const e=await this.getActivityPoints(this.address,this.signer);this.userStore.setCurrentUserActivityPoints(e)}},async fetchChatTokenBalance(){if(this.$config.chatTokenAddress){const e=new $(["function balanceOf(address owner) view returns (uint256)"]),r=await new C(this.$config.chatTokenAddress,e,this.signer).balanceOf(this.address);this.userStore.setChatTokenBalanceWei(r)}},async fetchOrbisNotifications(){if(this.userStore.getIsConnectedToOrbis){this.notificationsStore.setLoadingNotifications(!0);let{data:e,error:s,status:r}=await this.$orbis.getNotificationsCount({type:"social",context:this.$config.chatChannels.general});r===200&&e?.count_new_notifications?this.notificationsStore.setUnreadNotificationsCount(e.count_new_notifications):s&&console.log("New notifications count error",s);let{data:a,error:o,status:i}=await this.$orbis.getNotifications({type:"social",context:this.$config.chatChannels.general});if(i===200&&a){const l=a.filter(function(u){return u.status==="new"});this.notificationsStore.setNotifications(l)}else o&&console.log("Notifications fetching error",o);this.notificationsStore.setLoadingNotifications(!1)}},async fetchOrbisProfile(){if(this.isActivated){let{data:e,error:s}=await this.$orbis.getDids(this.address);if(e[0].did){const r=await this.$orbis.getProfile(e[0].did);r&&r.data.details.profile&&this.userStore.setOrbisImage(r.data.details.profile.pfp),r&&(this.userStore.setFollowers(r.data.count_followers),this.userStore.setFollowing(r.data.count_following),this.userStore.setLastActivityTimestamp(r.data.last_activity_timestamp)),this.fetchOrbisNotifications()}}},async fetchUserDomain(){if(this.chainId===this.$config.supportedChainId&&this.address!=this.userStore.getCurrentUserAddress){this.userStore.setCurrentUserAddress(this.address);let e;this.signer?e=await this.getDomainName(this.address,this.signer):e=await this.getDomainName(this.address),e?(this.userStore.setDefaultDomain(e+this.$config.tldName),E(window,this.address,e+this.$config.tldName)):this.userStore.setDefaultDomain(null),this.fetchActivityPoints(),this.fetchChatTokenBalance()}},async getOrbisDids(){const e=await this.$orbis.isConnected();this.userStore.setIsConnectedToOrbis(e),this.$orbis.session&&(this.userStore.setDid(this.$orbis.session.did._id),this.userStore.setDidParent(this.$orbis.session.did._parentId))},onWidthChange(){this.width=window.innerWidth},async orbisLogout(){await this.$orbis.logout(),this.userStore.setIsConnectedToOrbis(!1),this.userStore.setDid(null),this.userStore.setDidParent(null),this.userStore.setOrbisImage(null)},async parseReferrer(){if(!this.referrer.startsWith("0x")){let e=this.referrer;this.referrer.includes(this.$config.tldName)&&(e=this.referrer.split(".")[0]),this.referrer=await this.getDomainHolder(e)}this.address&&String(this.address).toLowerCase()===String(this.referrer).toLowerCase()||me(this.referrer)&&this.referrer!=H&&$e(window,this.referrer)}},setup(){const e=fe(),s=K(),r=R(),a=I(),o=P(),{address:i,chainId:l,isActivated:u,signer:m}=k(),{connectWith:v}=V(),T=new ge({appName:e.projectName,jsonRpcUrl:e.rpcCustom}),W=new be({appUrl:e.projectUrl});return{address:i,chainId:l,coinbaseConnector:T,connectWith:v,isActivated:u,mmConnector:W,signer:m,notificationsStore:s,sidebarStore:r,siteStore:a,userStore:o}},watch:{address(e,s){e.startsWith("0x")&&s.startsWith("0x")&&String(e).toLowerCase()!==String(s).toLowerCase()&&this.orbisLogout(),e&&this.fetchUserDomain()},chainId(e,s){e&&this.fetchUserDomain()},isActivated(e,s){s===!0&&e===!1?(console.log("user disconnected"),localStorage.setItem("connected",""),this.orbisLogout()):this.userStore.getDid||this.getOrbisDids()},isConnectedToOrbis(e,s){e&&s===!1&&this.fetchOrbisProfile()},orbisAddress(e,s){e&&this.address&&String(e).toLowerCase()!=String(this.address).toLowerCase()&&(console.log("Logging out of Orbis because the address in signed Orbis credentials does not matched the current user's address."),this.orbisLogout())},width(e,s){e>this.breakpoint?(this.lSidebar.show(),this.rSidebar.show(),this.sidebarStore.setLeftSidebar(!0),this.sidebarStore.setMainContent(!0),this.sidebarStore.setRightSidebar(!0)):(this.lSidebar.hide(),this.rSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setMainContent(!0),this.sidebarStore.setRightSidebar(!1))}}},Ba={class:"container-fluid page-container"},Ea={class:"row flex-nowrap"},Va={class:"col col-lg-4 ps-md-2 pt-2 main-containter"},Ha={class:"modal modal-sm fade",id:"connectModal",tabindex:"-1","aria-labelledby":"connectModalLabel","aria-hidden":"true"},ja={class:"modal-dialog",role:"document"},Ka={class:"modal-content"},za=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Connect your wallet"),t("button",{id:"closeConnectModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"})])],-1),Ya={class:"modal-body row"},Ga=t("img",{src:Aa,class:"card-img-top card-img-wallet",alt:"MetaMask"},null,-1),qa=t("small",{class:"text-center mb-3 text-muted"},"MetaMask",-1),Za=[Ga,qa],Ja=t("img",{src:Ua,class:"card-img-top card-img-wallet",alt:"Rabby"},null,-1),Qa=t("small",{class:"text-center mb-3 text-muted"},"Rabby",-1),Xa=[Ja,Qa],eo=t("img",{src:Ra,class:"card-img-top card-img-wallet",alt:"Bifrost"},null,-1),to=t("small",{class:"text-center mb-3 text-muted"},"Bifrost",-1),so=[eo,to],io=t("img",{src:Ta,class:"card-img-top card-img-wallet",alt:"Zerion"},null,-1),ao=t("small",{class:"text-center mb-3 text-muted"},"Zerion",-1),oo=[io,ao],no=t("img",{src:Wa,class:"card-img-top card-img-wallet",alt:"Coinbase"},null,-1),ro=t("small",{class:"text-center mb-3 text-muted"},"Coinbase",-1),lo=[no,ro],co=t("img",{src:xa,class:"card-img-top card-img-wallet",alt:"Brave"},null,-1),ho=t("small",{class:"text-center mb-3 text-muted"},"Brave",-1),uo=[co,ho],mo=t("img",{src:Ia,class:"card-img-top card-img-wallet",alt:"Trust Wallet"},null,-1),fo=t("small",{class:"text-center mb-3 text-muted"},"Trust Wallet",-1),go=[mo,fo],bo=t("img",{src:Oa,class:"card-img-top card-img-wallet",alt:"imToken"},null,-1),po=t("small",{class:"text-center mb-3 text-muted"},"imToken",-1),_o=[bo,po];function wo(e,s,r,a,o,i){const l=oe,u=ne,m=re,v=ae,T=b("NavbarDesktop"),W=b("NavbarMobile"),Z=b("SidebarLeft"),J=b("SidebarRight"),Q=b("ChatSettingsModal"),X=b("ChangeUsernameModal"),ee=b("ChangeUserPostMintPriceModal"),te=b("FindUserModal"),se=b("ReferralModal"),ie=b("VerifyAccountOwnership");return n(),d(x,null,[t("div",null,[c(v,null,{default:p(()=>[c(l,null,{default:p(()=>[f(g(e.$config.projectMetadataTitle),1)]),_:1}),c(u,{name:"description",content:e.$config.projectDescription},null,8,["content"]),c(m,{rel:"icon",type:"image/x-icon",href:e.$config.favicon},null,8,["href"]),c(u,{property:"og:title",content:e.$config.projectMetadataTitle},null,8,["content"]),c(u,{property:"og:description",content:e.$config.projectDescription},null,8,["content"]),c(u,{property:"og:image",content:e.$config.projectUrl+e.$config.previewImage},null,8,["content"]),c(u,{name:"twitter:card",content:"summary_large_image"}),c(u,{name:"twitter:site",content:e.$config.projectTwitter},null,8,["content"]),c(u,{name:"twitter:creator",content:e.$config.projectTwitter},null,8,["content"]),c(u,{name:"twitter:title",content:e.$config.projectMetadataTitle},null,8,["content"]),c(u,{name:"twitter:description",content:e.$config.projectDescription},null,8,["content"]),c(u,{name:"twitter:image",content:e.$config.projectUrl+e.$config.previewImage},null,8,["content"])]),_:1}),i.isMobile?h("",!0):(n(),y(T,{key:0})),i.isMobile?(n(),y(W,{key:1,lSidebar:o.lSidebar,rSidebar:o.rSidebar},null,8,["lSidebar","rSidebar"])):h("",!0),t("div",Ba,[t("div",Ea,[c(Z,{lSidebar:o.lSidebar,isMobile:i.isMobile},null,8,["lSidebar","isMobile"]),M(t("main",Va,[_e(e.$slots,"default")],512),[[pe,a.sidebarStore.showMainContent]]),c(J,{rSidebar:o.rSidebar,isMobile:i.isMobile},null,8,["rSidebar","isMobile"])])]),t("div",Ha,[t("div",ja,[t("div",Ka,[za,t("div",Ya,[t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[0]||(s[0]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},Za),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[1]||(s[1]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},Xa),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[2]||(s[2]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},so),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[3]||(s[3]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},oo),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[4]||(s[4]=(...S)=>i.connectCoinbase&&i.connectCoinbase(...S))},lo),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[5]||(s[5]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},uo),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[6]||(s[6]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},go),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[7]||(s[7]=(...S)=>i.connectMetaMask&&i.connectMetaMask(...S))},_o)])])])]),c(Q),c(X),c(ee),c(te),c(se),c(ie)]),(n(),y(we("script"),null,{default:p(()=>[f(" var global = global || window; ")]),_:1}))],64)}const Fo=w(Fa,[["render",wo]]);export{Fo as default};
