import{a as h,q as f,I as m,C as p,l as g,o,b as c,f as t,F as _,G as b,e as y,w as x,i as k,t as d,m as F,U as w}from"./entry.b8ec6072.js";const N={name:"KeysList",data(){return{featuredKeys:this.$config.keysFeatured,domainObjects:[],waiting:!1}},mounted(){this.getKeysPrices()},methods:{formatPrice(s){const e=Number(f(s));return e>1?e.toFixed(2):e>.1?e.toFixed(4):e>.01?e.toFixed(5):e>.001?e.toFixed(6):e>1e-4?e.toFixed(7):e>1e-5?e.toFixed(8):e>1e-6?e.toFixed(9):e},async getKeysPrices(){this.waiting=!0,this.domainObjects=[];const s=new m(["function getBuyPriceAfterFee(string memory domainName, uint256 amount) public view returns (uint256)"]);let e=this.$getFallbackProvider(this.$config.supportedChainId);this.isActivated&&this.chainId===this.$config.supportedChainId&&(e=this.signer);const i=new p(this.$config.keysAddress,s,e);for(let r=0;r<this.featuredKeys.length;r++){const n=this.featuredKeys[r],u=await i.getBuyPriceAfterFee(n,1);this.domainObjects.push({name:n,price:this.formatPrice(u)})}this.domainObjects.sort((r,n)=>Number(r.price)<Number(n.price)?1:-1),this.waiting=!1}},setup(){const{address:s,chainId:e,isActivated:i,signer:r}=g();return{address:s,chainId:e,isActivated:i,signer:r}}},K={class:"table bg-transparent text-center"},$=t("thead",null,[t("tr",null,[t("th",{class:"bg-transparent",scope:"col"},"Domain"),t("th",{class:"bg-transparent",scope:"col"},"Key price")])],-1),v={class:"bg-transparent text-break"},C={class:"bg-transparent text-nowrap"},I={key:0,class:"d-flex justify-content-center mb-3"},P=t("span",{class:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"},null,-1),j=[P];function A(s,e,i,r,n,u){const l=w;return o(),c("div",null,[t("table",K,[$,t("tbody",null,[(o(!0),c(_,null,b(n.domainObjects,a=>(o(),c("tr",{key:a.name},[t("td",v,[y(l,{to:"/keys?username="+a.name},{default:x(()=>[k(d(a.name)+d(s.$config.tldName),1)]),_:2},1032,["to"])]),t("td",C,d(a.price)+" "+d(s.$config.tokenSymbol),1)]))),128))])]),n.waiting?(o(),c("div",I,j)):F("",!0)])}const O=h(N,[["render",A]]);export{O as K};
