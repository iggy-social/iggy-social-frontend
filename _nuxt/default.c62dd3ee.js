import{H as se,T as ie,M as ae,L as ne}from"./components.56e6a5ad.js";import{m as oe,a as v,l as y,S as re,o as n,b as d,f as t,e as m,w as b,z as h,c as k,t as g,i as f,ad as V,T as P,r as p,v as R,u as de,F as I,G as H,D as S,I as $,C,s as N,A as j,P as le,x as L,y as D,Z as ce,q as me,ae as he,af as E,ag as ue,ah as fe,L as ge,K as be,J as pe}from"./entry.aee60644.js";import{u as K}from"./notifications.999b2a53.js";import{u as O}from"./site.0f992440.js";import{u as M}from"./user.7db81bad.js";import{C as z}from"./ConnectWalletButton.74b66575.js";import{S as _e,u as we}from"./SwitchChainButton.9d1a5579.js";import{g as q}from"./textUtils.387abd46.js";import{P as Se}from"./ProfileImage.a920971f.js";import{g as G}from"./balanceUtils.ffb613a2.js";import{t as ve}from"./tokens.f7a97a02.js";import{M as ke}from"./MintedPostImage.c16ce3b6.js";import{W as U}from"./WaitingToast.5cc085b0.js";import{g as B,a as ye}from"./domainUtils.4739dbcd.js";import{s as F,f as Ne,d as $e}from"./storageUtils.3e5f031c.js";import{S as Ce}from"./SimpleSwap.7a6e7b76.js";import{K as Me}from"./KeysList.d9806693.js";import{S as Z}from"./ShareReferralLink.6901bf8f.js";import"./composables.a55b05b4.js";const T=oe({id:"sidebars",state:()=>({leftSidebar:!1,mainContent:!0,rightSidebar:!1}),getters:{showLeftSidebar:e=>e.leftSidebar,showMainContent:e=>e.mainContent,showRightSidebar:e=>e.rightSidebar},actions:{setLeftSidebar(e){this.leftSidebar=e},setMainContent(e){this.mainContent=e},setRightSidebar(e){this.rightSidebar=e}}});async function Le(e,s,r,a,o){await e.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:s,symbol:r,decimals:a,image:o}}})}const Y=""+globalThis.__publicAssetsURL("img/logo.svg"),Ae={name:"Navbar",components:{ConnectWalletButton:z,SwitchChainButton:_e},computed:{showDomainOrAddress(){return this.userStore.getDefaultDomain?q(this.userStore.getDefaultDomain):this.address?this.shortenAddress(this.address):"Profile"}},methods:{addToMetaMask(){Le(window.ethereum,this.$config.chatTokenAddress,this.$config.chatTokenSymbol,18,this.$config.chatTokenImage)},changeColorMode(e){this.siteStore.setColorMode(e),document.documentElement.setAttribute("data-bs-theme",this.siteStore.getColorMode)},async disconnectWallet(){this.disconnect()}},setup(){const{disconnect:e}=V(),{address:s,isActivated:r}=y(),a=O(),o=M();return{address:s,disconnect:e,isActivated:r,shortenAddress:re,siteStore:a,userStore:o}}},De={class:"navbar navbar-expand-lg navbar-bg-custom"},Pe={class:"container-fluid mx-3"},Re=t("img",{src:Y,alt:"Chat logo",height:"45"},null,-1),Te={class:"navbar-nav justify-content-end flex-grow-1"},We={key:0,class:"nav-item"},xe=t("span",{class:"nav-link cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#referralModal"}," Earn referral fees! \u{1F911} ",-1),Ue=[xe],Ie={key:1,class:"nav-item"},Oe={key:3,class:"nav-item dropdown"},Be={class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},Fe={class:"dropdown-menu dropdown-menu-end"},Ee=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#chatSettingsModal"},"Settings",-1),Ve=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#changeUsernameModal"},"Change username",-1),He=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#referralModal"},"Share referral link",-1),je={key:4,class:"nav-item dropdown"},Ke={class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},ze={class:"dropdown-menu dropdown-menu-end"},qe={class:"nav-item cursor-pointer"},Ge=t("i",{class:"bi bi-brightness-high"},null,-1),Ze=[Ge],Ye=t("i",{class:"bi bi-moon-fill"},null,-1),Je=[Ye];function Qe(e,s,r,a,o,i){const c=P,l=p("ConnectWalletButton"),u=p("SwitchChainButton");return n(),d("nav",De,[t("div",Pe,[m(c,{class:"navbar-brand",to:"/"},{default:b(()=>[Re]),_:1}),t("ul",Te,[a.isActivated?(n(),d("li",We,Ue)):h("",!0),a.isActivated?h("",!0):(n(),d("li",Ie,[m(l,{class:"nav-link cursor-pointer",btnText:"Connect wallet"})])),a.isActivated?(n(),k(u,{key:2,navbar:!0,dropdown:!0})):h("",!0),a.isActivated?(n(),d("li",Oe,[t("a",Be,g(i.showDomainOrAddress),1),t("div",Fe,[m(c,{class:"dropdown-item cursor-pointer",to:"/profile"},{default:b(()=>[f("Profile")]),_:1}),Ee,Ve,He,t("span",{class:"dropdown-item cursor-pointer",onClick:s[0]||(s[0]=(...w)=>i.disconnectWallet&&i.disconnectWallet(...w))},"Disconnect")])])):h("",!0),a.isActivated&&e.$config.chatTokenAddress?(n(),d("li",je,[t("a",Ke,g(a.userStore.getChatTokenBalance)+" "+g(e.$config.chatTokenSymbol),1),t("div",ze,[m(c,{class:"dropdown-item cursor-pointer",to:"/airdrop"},{default:b(()=>[f("Claim "+g(e.$config.chatTokenSymbol)+" airdrop",1)]),_:1}),m(c,{class:"dropdown-item cursor-pointer",to:"/stake"},{default:b(()=>[f("Stake & earn weekly "+g(e.$config.tokenSymbol)+" rewards",1)]),_:1}),t("span",{class:"dropdown-item cursor-pointer",onClick:s[1]||(s[1]=(...w)=>i.addToMetaMask&&i.addToMetaMask(...w))},"Add "+g(e.$config.chatTokenSymbol)+" to MetaMask",1)])])):h("",!0),t("li",qe,[a.siteStore.getColorMode==="dark"?(n(),d("span",{key:0,class:"nav-link",onClick:s[2]||(s[2]=w=>i.changeColorMode("light"))},Ze)):h("",!0),a.siteStore.getColorMode==="light"?(n(),d("span",{key:1,class:"nav-link",onClick:s[3]||(s[3]=w=>i.changeColorMode("dark"))},Je)):h("",!0)])])])])}const Xe=v(Ae,[["render",Qe]]),et={name:"NavbarMobile",props:["lSidebar","rSidebar"],methods:{toggleLeftSidebar(){this.sidebarStore.setRightSidebar(!1),this.sidebarStore.showLeftSidebar?(this.sidebarStore.setLeftSidebar(!1),this.lSidebar.hide(),this.sidebarStore.setMainContent(!0)):(this.sidebarStore.setLeftSidebar(!0),this.lSidebar.show(),this.sidebarStore.setMainContent(!1))},toggleRightSidebar(){this.lSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.showRightSidebar?(this.sidebarStore.setRightSidebar(!1),this.sidebarStore.setMainContent(!0)):(this.sidebarStore.setRightSidebar(!0),this.sidebarStore.setMainContent(!1))}},setup(){return{sidebarStore:T()}}},tt={class:"navbar sticky-top navbar-expand-lg navbar-mobile"},st={class:"container-fluid"},it={key:0,class:"navbar-toggler-icon"},at={key:1,class:"bi bi-x-lg"},nt=t("img",{src:Y,alt:"Chat logo",height:"40"},null,-1),ot={key:0,class:"navbar-toggler-icon"},rt={key:1,class:"bi bi-x-lg"};function dt(e,s,r,a,o,i){const c=P;return n(),d("nav",tt,[t("div",st,[t("button",{onClick:s[0]||(s[0]=(...l)=>i.toggleLeftSidebar&&i.toggleLeftSidebar(...l)),class:"nav-item btn navbar-toggler nav-btn-left",type:"button"},[a.sidebarStore.showLeftSidebar?h("",!0):(n(),d("span",it)),a.sidebarStore.showLeftSidebar?(n(),d("span",at)):h("",!0)]),m(c,{class:"navbar-brand mx-auto",to:"/"},{default:b(()=>[nt]),_:1}),t("button",{onClick:s[1]||(s[1]=(...l)=>i.toggleRightSidebar&&i.toggleRightSidebar(...l)),class:"nav-item btn navbar-toggler nav-btn-right",type:"button"},[a.sidebarStore.showRightSidebar?h("",!0):(n(),d("span",ot)),a.sidebarStore.showRightSidebar?(n(),d("span",rt)):h("",!0)])])])}const lt=v(et,[["render",dt]]),ct={name:"SidebarLeft",props:["lSidebar","isMobile"],components:{ProfileImage:Se},computed:{getUserAp(){return this.userStore.getCurentUserActivityPoints>0?this.userStore.getCurentUserActivityPoints:0},filteredCategories(){let e=[];for(let s=0;s<this.$config.orbisCategories.length;s++)this.$config.orbisCategories[s].hidden===!1&&e.push({slug:this.$config.orbisCategories[s].slug,title:this.$config.orbisCategories[s].title});return e}},methods:{getActivityPoints:G,closeLeftSidebar(){this.isMobile&&(this.lSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setMainContent(!0))},selectTagIndex(e){this.chatStore.setSelectedTagIndex(e),this.closeLeftSidebar()}},setup(){const{address:e,isActivated:s}=y(),r=R(),a=we(),o=K(),i=T(),c=M();return{address:e,chatStore:a,isActivated:s,notificationsStore:o,sidebarStore:i,toast:r,userStore:c}}},mt={class:"col col-lg-auto px-0 mt-1"},ht={class:"sidebar-nav list-group border-0 rounded-0 text-sm-start min-vh-100"},ut={class:"card m-2 p-2 bg-light"},ft={key:0,class:"text-center"},gt={key:0,class:"mt-3"},bt={key:1,class:"mt-2"},pt=t("hr",null,null,-1),_t={class:"nav nav-pills flex-column"},wt={class:"list-group"},St=t("hr",null,null,-1),vt=t("i",{class:"bi bi-rocket-takeoff"},null,-1),kt=t("i",{class:"bi bi-bell"},null,-1),yt={key:0,class:"badge text-bg-secondary"},Nt=t("i",{class:"bi bi-person"},null,-1),$t=t("i",{class:"bi bi-award"},null,-1),Ct=t("i",{class:"bi bi-send"},null,-1),Mt=t("i",{class:"bi bi-cash-stack"},null,-1),Lt=t("i",{class:"bi bi-arrow-down-up"},null,-1),At=t("i",{class:"bi bi-key"},null,-1),Dt=t("i",{class:"bi bi-gift"},null,-1),Pt=["href"],Rt=t("i",{class:"bi bi-box2"},null,-1),Tt=t("small",null,[t("i",{class:"bi bi-box-arrow-up-right ms-1"})],-1),Wt=t("i",{class:"bi bi-patch-question"},null,-1);function xt(e,s,r,a,o,i){const c=p("ProfileImage"),l=P;return n(),d("div",mt,[t("div",{id:"sidebar1",class:S(["collapse collapse-horizontal",e.$config.sidebarLeftSticky?"sticky-lg-top":""])},[t("div",ht,[t("div",ut,[a.isActivated?(n(),d("div",ft,[m(l,{to:"/profile"},{default:b(()=>[(n(),k(c,{key:a.userStore.getOrbisImage,onClick:i.closeLeftSidebar,class:"img-fluid mt-3 rounded-circle w-30 sidebar-profile-image",address:a.address,domain:a.userStore.getDefaultDomain,image:a.userStore.getOrbisImage},null,8,["onClick","address","domain","image"]))]),_:1}),a.userStore.getDefaultDomain?(n(),d("h6",gt,g(de(q)(a.userStore.getDefaultDomain)),1)):h("",!0),e.$config.activityPointsAddress&&e.$config.showFeatures.activityPoints?(n(),d("div",bt,[m(l,{to:"/activity-points",class:"btn btn-outline-primary btn-sm mt-2 mb-2"},{default:b(()=>[f(g(i.getUserAp)+" AP ",1)]),_:1})])):h("",!0),pt])):h("",!0),t("ul",_t,[t("ul",wt,[(n(!0),d(I,null,H(i.filteredCategories,(u,w)=>(n(),k(l,{to:"/",class:S(["list-group-item cursor-pointer hover-color bg-light border-0",a.chatStore.getSelectedTagIndex===w&&e.$route.path==="/"?"active":""]),key:u.slug,onClick:A=>i.selectTagIndex(w)},{default:b(()=>[f(g(u.title),1)]),_:2},1032,["class","onClick"]))),128))]),St,e.$config.nftLaunchpadBondingAddress&&e.$config.showFeatures.nftLaunchpad?(n(),d("li",{key:0,class:"nav-item p-1",onClick:s[0]||(s[0]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/nft")?"active":""]),"aria-current":"page",to:"/nft"},{default:b(()=>[vt,f(" NFT Launchpad ")]),_:1},8,["class"])])):h("",!0),a.isActivated?(n(),d("li",{key:1,class:"nav-item p-1",onClick:s[1]||(s[1]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/notifications")?"active":""]),"aria-current":"page",to:"/notifications"},{default:b(()=>[kt,f(" Notifications "),!a.notificationsStore.getLoadingNotifications&&a.notificationsStore.getUnreadNotificationsCount>0?(n(),d("span",yt,g(a.notificationsStore.getUnreadNotificationsCount),1)):h("",!0)]),_:1},8,["class"])])):h("",!0),a.isActivated?(n(),d("li",{key:2,class:"nav-item p-1",onClick:s[2]||(s[2]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/profile")?"active":""]),"aria-current":"page",to:"/profile"},{default:b(()=>[Nt,f(" Profile ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.activityPoints&&e.$config.activityPointsAddress?(n(),d("li",{key:3,class:"nav-item p-1",onClick:s[3]||(s[3]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/activity-points")?"active":""]),"aria-current":"page",to:"/activity-points"},{default:b(()=>[$t,f(" Activity Points ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.sendTokens?(n(),d("li",{key:4,class:"nav-item p-1",onClick:s[4]||(s[4]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/send-tokens")?"active":""]),"aria-current":"page",to:"/send-tokens"},{default:b(()=>[Ct,f(" Send tokens ")]),_:1},8,["class"])])):h("",!0),e.$config.stakingContractAddress&&e.$config.showFeatures.stake?(n(),d("li",{key:5,class:"nav-item p-1",onClick:s[5]||(s[5]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/stake")?"active":""]),"aria-current":"page",to:"/stake"},{default:b(()=>[Mt,f(" Stake & Earn ")]),_:1},8,["class"])])):h("",!0),e.$config.swapRouterAddress&&e.$config.showFeatures.swap?(n(),d("li",{key:6,class:"nav-item p-1",onClick:s[6]||(s[6]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/swap")?"active":""]),"aria-current":"page",to:"/swap"},{default:b(()=>[Lt,f(" Swap ")]),_:1},8,["class"])])):h("",!0),e.$config.keysAddress&&e.$config.showFeatures.friendKeys?(n(),d("li",{key:7,class:"nav-item p-1",onClick:s[7]||(s[7]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/keys")?"active":""]),"aria-current":"page",to:"/keys"},{default:b(()=>[At,f(" Friend Keys ")]),_:1},8,["class"])])):h("",!0),(e.$config.airdropClaimDomainsAddress||e.$config.airdropApAddress)&&e.$config.showFeatures.airdrop?(n(),d("li",{key:8,class:"nav-item p-1",onClick:s[8]||(s[8]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/airdrop")?"active":""]),"aria-current":"page",to:"/airdrop"},{default:b(()=>[Dt,f(" Airdrop ")]),_:1},8,["class"])])):h("",!0),e.$config.showFeatures.governance?(n(),d("li",{key:9,class:"nav-item p-1",onClick:s[9]||(s[9]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[t("a",{class:"nav-link",href:e.$config.governanceUrl,target:"_blank"},[Rt,f(" Governance "),Tt],8,Pt)])):h("",!0),t("li",{class:"nav-item p-1",onClick:s[10]||(s[10]=(...u)=>i.closeLeftSidebar&&i.closeLeftSidebar(...u))},[m(l,{class:S(["nav-link",e.$route.path.startsWith("/about")?"active":""]),"aria-current":"page",to:"/about"},{default:b(()=>[Wt,f(" About ")]),_:1},8,["class"])])])])])],2)])}const Ut=v(ct,[["render",xt]]),It={name:"MintedPostsWidget",emits:["closeRightSidebar"],data(){return{numberOfPosts:this.$config.randomPostsNumber,randomNumbers:[]}},components:{MintedPostImage:ke},mounted(){this.fetchRandomMintedPosts()},computed:{getImageColumnWidth(){return this.$config.randomPostsNumber===1?"col-12":"col-12 mt-4"},getWidgetTitle(){return this.$config.randomPostsNumber===1?"Random Minted Post":"Random Minted Posts"}},methods:{async fetchRandomMintedPosts(){let e=this.$getFallbackProvider(this.$config.supportedChainId);this.isActivated&&this.chainId===this.$config.supportedChainId&&(e=this.signer);const s=new $(["function counter() external view returns (uint256)"]),a=await new C(this.$config.iggyPostAddress,s,e).counter();if(Number(a)>1)for(this.randomNumbers=[];this.randomNumbers.length<this.numberOfPosts;){const o=Math.floor(Math.random()*(a-1))+1;this.randomNumbers.includes(o)||this.randomNumbers.push(o)}}},setup(){const{isActivated:e,chainId:s,signer:r}=y();return{isActivated:e,chainId:s,signer:r}}},Ot={key:0,class:"card m-2 bg-light"},Bt={class:"card-header bg-light"},Ft={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Et={class:"card-body sidebar-card-body"},Vt={class:"row"},Ht={class:"card-footer bg-light text-body-secondary text-center"},jt=["href"],Kt=t("i",{class:"bi bi-box-arrow-up-right ms-1"},null,-1);function zt(e,s,r,a,o,i){const c=p("MintedPostImage");return o.randomNumbers.length>0?(n(),d("div",Ot,[t("div",Bt,[o.randomNumbers.length<o.numberOfPosts?(n(),d("span",Ft)):h("",!0),f(" "+g(i.getWidgetTitle),1)]),t("div",Et,[t("div",Vt,[(n(!0),d(I,null,H(o.randomNumbers,l=>(n(),d("div",{class:S(i.getImageColumnWidth),key:l},[m(c,{id:l,onClick:s[0]||(s[0]=u=>e.$emit("closeRightSidebar"))},null,8,["id"])],2))),128))])]),t("div",Ht,[t("a",{href:e.$config.marketplacePostNftUrl,class:"btn btn-outline-primary mb-3",target:"_blank"},[f(" See all minted posts "),Kt],8,jt)])])):h("",!0)}const qt=v(It,[["render",zt]]),Gt={name:"NameMintWidget",data(){return{domainName:null,isMinter:!1,loadingData:!1,loadingMint:!1,paused:!0,price:null,price1char:null,price2char:null,price3char:null,price4char:null,price5char:null}},components:{ConnectWalletButton:z,WaitingToast:U},mounted(){this.fetchDomainData()},computed:{domainNotValid(){return this.domainName===""?{invalid:!0,message:null}:this.domainName===null?{invalid:!0,message:null}:this.domainName.includes(".")?{invalid:!0,message:"Dots not allowed"}:this.domainName.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:this.domainName.includes("%")?{invalid:!0,message:"% not allowed"}:this.domainName.includes("&")?{invalid:!0,message:"& not allowed"}:this.domainName.includes("?")?{invalid:!0,message:"? not allowed"}:this.domainName.includes("#")?{invalid:!0,message:"# not allowed"}:this.domainName.includes("/")?{invalid:!0,message:"/ not allowed"}:this.domainName.includes(",")?{invalid:!0,message:"Comma not allowed"}:this.domainName.includes("\\")||this.domainName.includes("\xAD")||this.domainName.includes("	")||this.domainName.includes("\u034F")||this.domainName.includes("\u061C")||this.domainName.includes("\u070F")||this.domainName.includes("\u115F")||this.domainName.includes("\u1160")||this.domainName.includes("\u1680")||this.domainName.includes("\u17B4")||this.domainName.includes("\u17B5")||this.domainName.includes("\u180E")||this.domainName.includes("\u2000")||this.domainName.includes("\u2001")||this.domainName.includes("\u2002")||this.domainName.includes("\u2003")||this.domainName.includes("\u2004")||this.domainName.includes("\u2005")||this.domainName.includes("\u2006")||this.domainName.includes("\u2007")||this.domainName.includes("\u2008")||this.domainName.includes("\u2009")||this.domainName.includes("\u200A")||this.domainName.includes("\u200B")||this.domainName.includes("\u200C")||this.domainName.includes("\u200D")||this.domainName.includes("\u200E")||this.domainName.includes("\u200F")||this.domainName.includes("\u202F")||this.domainName.includes("\u205F")||this.domainName.includes("\u2060")||this.domainName.includes("\u2061")||this.domainName.includes("\u2062")||this.domainName.includes("\u2063")||this.domainName.includes("\u2064")||this.domainName.includes("\u206A")||this.domainName.includes("\u206B")||this.domainName.includes("\u206C")||this.domainName.includes("\u206D")||this.domainName.includes("\u206E")||this.domainName.includes("\u206F")||this.domainName.includes("\u3000")||this.domainName.includes("\u2800")||this.domainName.includes("\u3164")||this.domainName.includes("\uFFA0")||this.domainName.includes("\u{110B1}")||this.domainName.includes("\u{1BCA0}")||this.domainName.includes("\u{1BCA1}")||this.domainName.includes("\u{1BCA2}")||this.domainName.includes("\u{1BCA3}")||this.domainName.includes("\u{1D159}")||this.domainName.includes("\u{1D173}")||this.domainName.includes("\u{1D174}")||this.domainName.includes("\u{1D175}")||this.domainName.includes("\u{1D176}")||this.domainName.includes("\u{1D177}")||this.domainName.includes("\u{1D178}")||this.domainName.includes("\u{1D179}")||this.domainName.includes("\u{1D17A}")||this.domainName.includes("\v")||this.domainName.includes("\f")||this.domainName.includes("\x85")?{invalid:!0,message:"This character is not allowed"}:{invalid:!1,message:"Domain name is valid"}},getNamePrice(){return this.$config.punkNumberOfPrices===1?this.price:this.domainName?this.domainName.match(/./gu).length===1?this.price1char:this.domainName.match(/./gu).length===2?this.price2char:this.domainName.match(/./gu).length===3?this.price3char:this.domainName.match(/./gu).length===4?this.price4char:this.domainName.match(/./gu).length>=5?this.price5char:this.price5char:this.price5char}},methods:{getDomainName:B,async fetchDomainData(){this.loadingData=!0,this.isMinter=this.$config.punkMinterAddress!=="";const e=new $(["function buyingEnabled() view returns (bool)","function paused() view returns (bool)","function price() view returns (uint256)","function price1char() view returns (uint256)","function price2char() view returns (uint256)","function price3char() view returns (uint256)","function price4char() view returns (uint256)","function price5char() view returns (uint256)","function referral() view returns (uint256)","function referralFee() view returns (uint256)"]);let s;this.isMinter?s=this.$config.punkMinterAddress:s=this.$config.punkTldAddress;let r=this.$getFallbackProvider(this.$config.supportedChainId);const a=new C(s,e,r);this.isMinter?this.paused=await a.paused():this.paused=!await a.buyingEnabled(),this.$config.punkNumberOfPrices===1?this.price=N(await a.price(),this.$config.tokenDecimals):this.$config.punkNumberOfPrices===5&&(this.price1char=N(await a.price1char(),this.$config.tokenDecimals),this.price2char=N(await a.price2char(),this.$config.tokenDecimals),this.price3char=N(await a.price3char(),this.$config.tokenDecimals),this.price4char=N(await a.price4char(),this.$config.tokenDecimals),this.price5char=N(await a.price5char(),this.$config.tokenDecimals)),this.isMinter?this.referralFee=await a.referralFee():this.referralFee=await a.referral(),this.loadingData=!1},async fetchUserDomain(){if(this.isActivated){let e;this.signer?e=await this.getDomainName(this.address,this.signer):e=await this.getDomainName(this.address),e?(this.userStore.setDefaultDomain(e+this.$config.tldName),F(window,this.address,e+this.$config.tldName)):this.userStore.setDefaultDomain(null)}},async mintName(){if(this.loadingMint=!0,this.isActivated&&!this.domainNotValid.invalid){const e=new $(["function getDomainHolder(string) view returns (address)"]);if(await new C(this.$config.punkTldAddress,e,this.signer).getDomainHolder(this.domainName.toLowerCase())!==j){this.toast("This name is already taken",{type:"error"}),this.loadingMint=!1;return}try{const a=new $(["function mint(string memory _domainName, address _domainHolder, address _referrer) external payable returns(uint256)"]);let o;this.isMinter?o=this.$config.punkMinterAddress:o=this.$config.punkTldAddress;const c=await new C(o,a,this.signer).mint(this.domainName.toLowerCase(),this.address,Ne(window),{value:le(this.getNamePrice,this.$config.tokenDecimals)}),l=this.toast({component:U,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+c.hash,"_blank").focus()}),u=await c.wait();u.status===1?(this.toast.dismiss(l),this.fetchUserDomain(),this.toast("You have successfully minted a name!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+c.hash,"_blank").focus()}),this.loadingMint=!1):(this.toast.dismiss(l),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+c.hash,"_blank").focus()}),this.loadingMint=!1,console.log(u))}catch(a){console.log("error: "+a),this.toast("Error: "+a,{type:"error"}),this.loadingMint=!1;return}}}},setup(){const{address:e,isActivated:s,signer:r}=y(),a=R(),o=M();return{address:e,isActivated:s,signer:r,toast:a,userStore:o}}},Zt={class:"card m-2 bg-light"},Yt={class:"card-header bg-light"},Jt={class:"card-body sidebar-card-body"},Qt={class:"input-group mb-3"},Xt={class:"input-group-text",id:"mint-name"},es={key:0,class:"text-danger"},ts=t("i",{class:"bi bi-exclamation-octagon"},null,-1),ss={class:"text-center"},is=["disabled"],as={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},ns={key:1};function os(e,s,r,a,o,i){const c=p("ConnectWalletButton");return n(),d("div",Zt,[t("div",Yt,"Get a "+g(e.$config.tldName)+" name",1),t("div",Jt,[t("p",null," Get yourself a "+g(e.$config.tldName)+" username and start chatting with other community members. ",1),t("div",Qt,[L(t("input",{type:"text",class:"form-control text-end",placeholder:"enter name","aria-describedby":"mint-name","onUpdate:modelValue":s[0]||(s[0]=l=>o.domainName=l)},null,512),[[D,o.domainName]]),t("span",Xt,g(e.$config.tldName),1)]),i.domainNotValid.invalid&&i.domainNotValid.message?(n(),d("p",es,[t("small",null,[ts,f(" "+g(i.domainNotValid.message),1)])])):h("",!0),t("p",null," Minting price: "+g(i.getNamePrice)+" "+g(e.$config.tokenSymbol),1),t("div",ss,[a.isActivated?(n(),d("button",{key:0,class:"btn btn-outline-primary mt-2 mb-2",disabled:o.paused||i.domainNotValid.invalid},[o.loadingMint||o.loadingData?(n(),d("span",as)):h("",!0),o.loadingData?(n(),d("span",ns,"Loading data...")):(n(),d("span",{key:2,onClick:s[1]||(s[1]=(...l)=>i.mintName&&i.mintName(...l))},"Mint username"))],8,is)):h("",!0)]),a.isActivated?h("",!0):(n(),k(c,{key:1,class:"btn btn-outline-primary mt-2 mb-2",btnText:"Connect Wallet"}))])])}const rs=v(Gt,[["render",os]]),ds={name:"SimpleSwapWidget",props:["poweredBy","routerAddress","title","tokens"],components:{SimpleSwap:Ce}},ls={class:"card m-2 bg-light"},cs={class:"card-header bg-light"},ms={class:"card-body sidebar-card-body"};function hs(e,s,r,a,o,i){const c=p("SimpleSwap");return n(),d("div",ls,[t("div",cs,g(r.title),1),t("div",ms,[m(c,{class:"mt-3",routerAddress:r.routerAddress,swapId:"SidebarRight1",tokens:r.tokens,poweredBy:r.poweredBy},null,8,["routerAddress","tokens","poweredBy"])])])}const us=v(ds,[["render",hs]]),fs={name:"KeysListWidget",components:{KeysList:Me},setup(){const{isActivated:e}=y();return{isActivated:e}}},gs={class:"card m-2 bg-light"},bs=t("div",{class:"card-header bg-light"},"Featured Friend Keys",-1),ps={class:"card-body sidebar-card-body"},_s={class:"d-flex justify-content-center mt-4"};function ws(e,s,r,a,o,i){const c=p("KeysList"),l=P;return n(),d("div",gs,[bs,t("div",ps,[m(c),t("div",_s,[m(l,{class:"btn btn-outline-primary",to:"/keys"},{default:b(()=>[f("Get a Friend Key")]),_:1})])])])}const Ss=v(fs,[["render",ws]]),vs={name:"ReferralWidget",components:{ShareReferralLink:Z}},ks={class:"card m-2 bg-light"},ys=t("div",{class:"card-header bg-light"},"Your referral link \u{1F911}",-1),Ns={class:"card-body sidebar-card-body"},$s=t("p",null,"Share your referral link and earn referral fees!",-1);function Cs(e,s,r,a,o,i){const c=p("ShareReferralLink");return n(),d("div",ks,[ys,t("div",Ns,[$s,m(c)])])}const Ms=v(vs,[["render",Cs]]),Ls={name:"SidebarRight",props:["rSidebar","isMobile"],components:{KeysListWidget:Ss,MintedPostsWidget:qt,NameMintWidget:rs,ReferralWidget:Ms,SimpleSwapWidget:us},methods:{closeRightSidebar(){this.isMobile&&(this.sidebarStore.setRightSidebar(!1),this.sidebarStore.setMainContent(!0))}},setup(){return{sidebarStore:T(),tokens:ve}}},As={class:"col-auto col-lg-3 px-0 mt-1"},Ds={id:"sidebar-nav",class:"list-group border-0 rounded-0 text-sm-start min-vh-100"},Ps={key:0,class:"card m-2 bg-light"},Rs={class:"card-header bg-light"},Ts={class:"card-body sidebar-card-body"},Ws=["src"],xs={key:3,class:"card m-2 bg-light"},Us={class:"card-header bg-light"},Is={class:"card-body sidebar-card-body"},Os=["href"],Bs=t("i",{class:"bi bi-box-arrow-up-right ms-1"},null,-1);function Fs(e,s,r,a,o,i){const c=p("NameMintWidget"),l=p("ReferralWidget"),u=p("SimpleSwapWidget"),w=p("MintedPostsWidget");return n(),d("div",As,[t("div",{id:"sidebar2",class:S(["collapse collapse-horizontal",{show:a.sidebarStore.showRightSidebar}])},[t("div",Ds,[m(c),m(l),e.$config.showFeatures.spotify?(n(),d("div",Ps,[t("div",Rs,g(e.$config.projectName)+" Playlist",1),t("div",Ts,[t("iframe",{style:{"border-radius":"12px"},src:"https://open.spotify.com/embed/playlist/"+e.$config.spotifyPlaylistId+"?utm_source=generator&theme=0",width:"100%",height:"352",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,Ws)])])):h("",!0),e.$config.swapRouterAddress&&e.$config.showFeatures.swap?(n(),k(u,{key:1,routerAddress:e.$config.swapRouterAddress,tokens:a.tokens,title:"Swap tokens"},null,8,["routerAddress","tokens"])):h("",!0),e.$config.showFeatures.randomMintedPosts?(n(),k(w,{key:2,onCloseRightSidebar:i.closeRightSidebar},null,8,["onCloseRightSidebar"])):h("",!0),e.$config.newsletterLink&&e.$config.showFeatures.newsletter?(n(),d("div",xs,[t("div",Us,g(e.$config.projectName)+" Newsletter",1),t("div",Is,[t("a",{class:"btn btn-outline-primary mt-2 mb-2",target:"_blank",href:e.$config.newsletterLink},[f(" Join our newsletter! "),Bs],8,Os)])])):h("",!0)])],2)])}const Es=v(Ls,[["render",Fs]]),Vs={name:"ChatSettingsModal",data(){return{showRepliesOnHomeFeed:null}},mounted(){window.localStorage.getItem("showOnlyMasterPosts")?window.localStorage.getItem("showOnlyMasterPosts")=="true"?this.showRepliesOnHomeFeed=!1:this.showRepliesOnHomeFeed=!0:this.$config.showRepliesOnHomepage?(this.siteStore.setShowOnlyMasterPosts("false"),this.showRepliesOnHomeFeed=!0):(this.siteStore.setShowOnlyMasterPosts("true"),this.showRepliesOnHomeFeed=!1)},computed:{slippage:{get(){return this.siteStore.getSlippage},set(e){this.siteStore.setSlippage(e)}},deadline:{get(){return this.siteStore.getSwapDeadline},set(e){this.siteStore.setSwapDeadline(e)}}},methods:{toggleShowOnlyMasterPosts(){this.siteStore.getShowOnlyMasterPosts==="true"?this.siteStore.setShowOnlyMasterPosts("false"):this.siteStore.setShowOnlyMasterPosts("true")}},setup(){return{siteStore:O()}}},Hs={class:"modal fade",id:"chatSettingsModal",tabindex:"-1","aria-labelledby":"chatSettingsModalLabel","aria-hidden":"true"},js={class:"modal-dialog"},Ks={class:"modal-content"},zs=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"chatSettingsModalLabel"},"Settings"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),qs={class:"modal-body"},Gs=t("p",null,[t("strong",null,"Chat")],-1),Zs={class:"form-check"},Ys=["checked"],Js=t("label",{class:"form-check-label",for:"flexCheckChecked"}," Show replies in home feed ",-1),Qs=t("hr",null,null,-1),Xs=t("p",null,[t("strong",null,"Swap")],-1),ei={class:"row"},ti={class:"col-sm-6 mb-2"},si={class:"input-group flex-nowrap"},ii=t("span",{class:"input-group-text",id:"addon-wrapping"},"Slippage",-1),ai=t("span",{class:"input-group-text",id:"addon-wrapping"},"%",-1),ni={class:"col-sm-6 mb-2"},oi={class:"input-group flex-nowrap"},ri=t("span",{class:"input-group-text",id:"addon-wrapping"},"Deadline",-1),di=t("span",{class:"input-group-text",id:"addon-wrapping"},"min",-1);function li(e,s,r,a,o,i){return n(),d("div",Hs,[t("div",js,[t("div",Ks,[zs,t("div",qs,[Gs,t("div",Zs,[t("input",{class:"form-check-input",type:"checkbox",id:"flexCheckChecked",checked:o.showRepliesOnHomeFeed,onClick:s[0]||(s[0]=(...c)=>i.toggleShowOnlyMasterPosts&&i.toggleShowOnlyMasterPosts(...c))},null,8,Ys),Js]),Qs,Xs,t("div",ei,[t("div",ti,[t("div",si,[ii,L(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=c=>i.slippage=c),"aria-describedby":"addon-wrapping"},null,512),[[D,i.slippage]]),ai])]),t("div",ni,[t("div",oi,[ri,L(t("input",{"onUpdate:modelValue":s[2]||(s[2]=c=>i.deadline=c),type:"text",class:"form-control","aria-describedby":"addon-wrapping"},null,512),[[D,i.deadline]]),di])])])])])])])}const ci=v(Vs,[["render",li]]),mi={name:"VerifyAccountOwnership",methods:{async connectToOrbis(){let e=this.$getFallbackProvider(this.$config.supportedChainId),s=await this.$orbis.connect_v2({provider:e.provider,lit:!1});s.status==200?(this.userStore.setIsConnectedToOrbis(!0),this.$orbis.session&&(this.userStore.setDid(this.$orbis.session.did._id),this.userStore.setDidParent(this.$orbis.session.did._parentId)),document.getElementById("closeVerifyAccountModal").click()):(console.log("Error verifying account: ",s),this.toast(s.result,{type:"error"}))}},setup(){const e=M(),s=R();return{userStore:e,toast:s}}},hi={class:"modal fade",id:"verifyAccountModal",tabindex:"-1","aria-labelledby":"verifyAccountModalLabel","aria-hidden":"true"},ui={class:"modal-dialog",role:"document"},fi={class:"modal-content"},gi=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Verify Account Ownership"),t("button",{id:"closeVerifyAccountModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"})])],-1),bi={class:"modal-body p-3 mb-3"},pi=t("p",null," Verify that you really own this account/wallet. This will allow you to use chat, change profile image, and set some other settings. ",-1);function _i(e,s,r,a,o,i){return n(),d("div",hi,[t("div",ui,[t("div",fi,[gi,t("div",bi,[pi,t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...c)=>i.connectToOrbis&&i.connectToOrbis(...c))}," Verify your account ")])])])])}const wi=v(mi,[["render",_i]]),Si={name:"ReferralModal",components:{ShareReferralLink:Z}},vi={class:"modal fade",id:"referralModal",tabindex:"-1","aria-labelledby":"referralModalLabel","aria-hidden":"true"},ki={class:"modal-dialog"},yi={class:"modal-content"},Ni=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"referralModalLabel"},"Share referral link"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$i={class:"modal-body"},Ci=t("p",null,"Share your referral link and earn referral fees (and activity points)! \u{1F911}",-1),Mi=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);function Li(e,s,r,a,o,i){const c=p("ShareReferralLink");return n(),d("div",vi,[t("div",ki,[t("div",yi,[Ni,t("div",$i,[Ci,m(c)]),Mi])])])}const Ai=v(Si,[["render",Li]]),Di={name:"ChangeUsernameModal",data(){return{domainName:null,loading:!1}},computed:{domainNotValid(){return this.domainName===""?{invalid:!0,message:null}:this.domainName===null?{invalid:!0,message:null}:this.domainName.includes(".")?{invalid:!0,message:"Dots not allowed"}:this.domainName.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:this.domainName.includes("%")?{invalid:!0,message:"% not allowed"}:this.domainName.includes("&")?{invalid:!0,message:"& not allowed"}:this.domainName.includes("?")?{invalid:!0,message:"? not allowed"}:this.domainName.includes("#")?{invalid:!0,message:"# not allowed"}:this.domainName.includes("/")?{invalid:!0,message:"/ not allowed"}:this.domainName.includes(",")?{invalid:!0,message:"Comma not allowed"}:this.domainName.includes("\\")||this.domainName.includes("\xAD")||this.domainName.includes("	")||this.domainName.includes("\u034F")||this.domainName.includes("\u061C")||this.domainName.includes("\u070F")||this.domainName.includes("\u115F")||this.domainName.includes("\u1160")||this.domainName.includes("\u1680")||this.domainName.includes("\u17B4")||this.domainName.includes("\u17B5")||this.domainName.includes("\u180E")||this.domainName.includes("\u2000")||this.domainName.includes("\u2001")||this.domainName.includes("\u2002")||this.domainName.includes("\u2003")||this.domainName.includes("\u2004")||this.domainName.includes("\u2005")||this.domainName.includes("\u2006")||this.domainName.includes("\u2007")||this.domainName.includes("\u2008")||this.domainName.includes("\u2009")||this.domainName.includes("\u200A")||this.domainName.includes("\u200B")||this.domainName.includes("\u200C")||this.domainName.includes("\u200D")||this.domainName.includes("\u200E")||this.domainName.includes("\u200F")||this.domainName.includes("\u202F")||this.domainName.includes("\u205F")||this.domainName.includes("\u2060")||this.domainName.includes("\u2061")||this.domainName.includes("\u2062")||this.domainName.includes("\u2063")||this.domainName.includes("\u2064")||this.domainName.includes("\u206A")||this.domainName.includes("\u206B")||this.domainName.includes("\u206C")||this.domainName.includes("\u206D")||this.domainName.includes("\u206E")||this.domainName.includes("\u206F")||this.domainName.includes("\u3000")||this.domainName.includes("\u2800")||this.domainName.includes("\u3164")||this.domainName.includes("\uFFA0")||this.domainName.includes("\u{110B1}")||this.domainName.includes("\u{1BCA0}")||this.domainName.includes("\u{1BCA1}")||this.domainName.includes("\u{1BCA2}")||this.domainName.includes("\u{1BCA3}")||this.domainName.includes("\u{1D159}")||this.domainName.includes("\u{1D173}")||this.domainName.includes("\u{1D174}")||this.domainName.includes("\u{1D175}")||this.domainName.includes("\u{1D176}")||this.domainName.includes("\u{1D177}")||this.domainName.includes("\u{1D178}")||this.domainName.includes("\u{1D179}")||this.domainName.includes("\u{1D17A}")||this.domainName.includes("\v")||this.domainName.includes("\f")||this.domainName.includes("\x85")?{invalid:!0,message:"This character is not allowed"}:{invalid:!1,message:"Domain name is valid"}}},methods:{getDomainName:B,async changeUsername(){if(this.loading=!0,this.isActivated&&!this.domainNotValid.invalid){const e=new $(["function editDefaultDomain(string calldata _domainName) external"]),s=new C(this.$config.punkTldAddress,e,this.signer);try{const r=await s.editDefaultDomain(this.domainName.toLowerCase()),a=this.toast({component:U,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),o=await r.wait();o.status===1?(this.toast.dismiss(a),this.fetchUserDomain(),this.toast("You have successfully changed your username!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),this.loading=!1,document.getElementById("closeChangeUsernameModal").click()):(this.toast.dismiss(a),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+r.hash,"_blank").focus()}),this.loading=!1,console.log(o))}catch(r){console.log("error: "+r),this.toast("Error: "+r,{type:"error"}),this.loading=!1;return}}},async fetchUserDomain(){if(this.isActivated){let e;this.signer?e=await this.getDomainName(this.address,this.signer):e=await this.getDomainName(this.address),e?(this.userStore.setDefaultDomain(e+this.$config.tldName),F(window,this.address,e+this.$config.tldName)):this.userStore.setDefaultDomain(null)}}},setup(){const{address:e,isActivated:s,signer:r}=y(),a=R(),o=M();return{address:e,isActivated:s,signer:r,toast:a,userStore:o}}},Pi={class:"modal fade",id:"changeUsernameModal",tabindex:"-1","aria-labelledby":"changeUsernameModalLabel","aria-hidden":"true"},Ri={class:"modal-dialog"},Ti={class:"modal-content"},Wi=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"changeUsernameModalLabel"},"Change your username"),t("button",{id:"closeChangeUsernameModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),xi={class:"modal-body"},Ui=t("p",null,"Enter your new main username (you must own it):",-1),Ii={class:"input-group mb-3"},Oi={class:"input-group-text"},Bi={key:0,class:"text-danger"},Fi=t("i",{class:"bi bi-exclamation-octagon"},null,-1),Ei={class:"modal-footer"},Vi=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Hi=["disabled"],ji={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function Ki(e,s,r,a,o,i){return n(),d("div",Pi,[t("div",Ri,[t("div",Ti,[Wi,t("div",xi,[Ui,t("div",Ii,[L(t("input",{type:"text",class:"form-control text-end",placeholder:"enter name","onUpdate:modelValue":s[0]||(s[0]=c=>o.domainName=c)},null,512),[[D,o.domainName]]),t("span",Oi,g(e.$config.tldName),1)]),i.domainNotValid.invalid&&i.domainNotValid.message?(n(),d("p",Bi,[t("small",null,[Fi,f(" "+g(i.domainNotValid.message),1)])])):h("",!0)]),t("div",Ei,[Vi,t("button",{type:"button",disabled:o.loading||i.domainNotValid.invalid,class:"btn btn-primary",onClick:s[1]||(s[1]=(...c)=>i.changeUsername&&i.changeUsername(...c))},[o.loading?(n(),d("span",ji)):h("",!0),f(" Submit ")],8,Hi)])])])])}const zi=v(Di,[["render",Ki]]),qi=""+new URL("metamask.ee003f7b.png",import.meta.url).href,Gi=""+new URL("rabby.c4b282ef.png",import.meta.url).href,Zi=""+new URL("bifrost.58f773ff.png",import.meta.url).href,Yi=""+new URL("zerion.213df4fe.png",import.meta.url).href,Ji=""+new URL("coinbase.6efcbd0e.png",import.meta.url).href,Qi=""+new URL("brave.0cb22c92.png",import.meta.url).href,Xi=""+new URL("trust.00f61f13.png",import.meta.url).href,ea=""+new URL("imtoken.555e248e.png",import.meta.url).href,ta={data(){return{breakpoint:1e3,isMounted:!1,lSidebar:null,referrer:null,rSidebar:null,width:null}},components:{ChangeUsernameModal:zi,ChatSettingsModal:ci,NavbarDesktop:Xe,NavbarMobile:lt,ReferralModal:Ai,SidebarLeft:Ut,SidebarRight:Es,VerifyAccountOwnership:wi},mounted(){this.isMounted=!0,document.documentElement.setAttribute("data-bs-theme",this.siteStore.getColorMode),this.lSidebar=new bootstrap.Collapse("#sidebar1",{toggle:!1}),this.rSidebar=new bootstrap.Collapse("#sidebar2",{toggle:!1}),this.width=window.innerWidth,this.width<this.breakpoint?(this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setRightSidebar(!1),this.lSidebar.hide(),this.rSidebar.hide()):(this.lSidebar.show(),this.sidebarStore.setLeftSidebar(!0),this.sidebarStore.setRightSidebar(!0)),window.addEventListener("resize",this.onWidthChange),this.isActivated||(localStorage.getItem("connected")=="metamask"?this.connectMetaMask():localStorage.getItem("connected")=="walletconnect"?this.connectWalletConnect():localStorage.getItem("connected")=="coinbase"&&this.connectCoinbase()),new bootstrap.Popover(document.body,{selector:"[data-bs-toggle='popover']"}),this.siteStore.setFileUploadEnabled(this.$config.fileUploadEnabled),this.referrer=this.$route.query.ref,this.referrer&&this.parseReferrer()},unmounted(){window.removeEventListener("resize",onWidthChange)},computed:{isConnectedToOrbis(){return this.userStore.getIsConnectedToOrbis},isMobile(){return this.width<this.breakpoint},orbisAddress(){if(this.userStore.getDidParent)return this.userStore.getDidParent.split(":").pop()}},methods:{getActivityPoints:G,getDomainHolder:ye,getDomainName:B,async connectCoinbase(){await this.connectWith(this.coinbaseConnector),localStorage.setItem("connected","coinbase"),document.getElementById("closeConnectModal").click()},async connectMetaMask(){await this.connectWith(this.mmConnector),localStorage.setItem("connected","metamask"),document.getElementById("closeConnectModal").click()},async connectWalletConnect(){await this.connectWith(this.wcConnector),localStorage.setItem("connected","walletconnect"),document.getElementById("closeConnectModal").click()},async fetchActivityPoints(){if(this.$config.activityPointsAddress){const e=await this.getActivityPoints(this.address,this.signer);this.userStore.setCurrentUserActivityPoints(e)}},async fetchChatTokenBalance(){if(this.$config.chatTokenAddress){const e=new $(["function balanceOf(address owner) view returns (uint256)"]),r=await new C(this.$config.chatTokenAddress,e,this.signer).balanceOf(this.address);this.userStore.setChatTokenBalanceWei(r)}},async fetchOrbisNotifications(){if(this.userStore.getIsConnectedToOrbis){this.notificationsStore.setLoadingNotifications(!0);let{data:e,error:s,status:r}=await this.$orbis.getNotificationsCount({type:"social",context:this.$config.orbisContext});r===200&&e?.count_new_notifications?this.notificationsStore.setUnreadNotificationsCount(e.count_new_notifications):s&&console.log("New notifications count error",s);let{data:a,error:o,status:i}=await this.$orbis.getNotifications({type:"social",context:this.$config.orbisContext});if(i===200&&a){const c=a.filter(function(l){return l.status==="new"});this.notificationsStore.setNotifications(c)}else o&&console.log("Notifications fetching error",o);this.notificationsStore.setLoadingNotifications(!1)}},async fetchOrbisProfile(){if(this.isActivated){let{data:e,error:s}=await this.$orbis.getDids(this.address);if(e[0].did){const r=await this.$orbis.getProfile(e[0].did);r&&r.data.details.profile&&this.userStore.setOrbisImage(r.data.details.profile.pfp),r&&(this.userStore.setFollowers(r.data.count_followers),this.userStore.setFollowing(r.data.count_following),this.userStore.setLastActivityTimestamp(r.data.last_activity_timestamp)),this.fetchOrbisNotifications()}}},async fetchUserDomain(){if(this.chainId===this.$config.supportedChainId&&this.address!=this.userStore.getCurrentUserAddress){this.userStore.setCurrentUserAddress(this.address);let e;this.signer?e=await this.getDomainName(this.address,this.signer):e=await this.getDomainName(this.address),e?(this.userStore.setDefaultDomain(e+this.$config.tldName),F(window,this.address,e+this.$config.tldName)):this.userStore.setDefaultDomain(null),this.fetchActivityPoints(),this.fetchChatTokenBalance()}},async getOrbisDids(){const e=await this.$orbis.isConnected();this.userStore.setIsConnectedToOrbis(e),this.$orbis.session&&(this.userStore.setDid(this.$orbis.session.did._id),this.userStore.setDidParent(this.$orbis.session.did._parentId))},onWidthChange(){this.width=window.innerWidth},async orbisLogout(){await this.$orbis.logout(),this.userStore.setIsConnectedToOrbis(!1),this.userStore.setDid(null),this.userStore.setDidParent(null),this.userStore.setOrbisImage(null)},async parseReferrer(){if(!this.referrer.startsWith("0x")){let e=this.referrer;this.referrer.includes(this.$config.tldName)&&(e=this.referrer.split(".")[0]),this.referrer=await this.getDomainHolder(e)}this.address&&String(this.address).toLowerCase()===String(this.referrer).toLowerCase()||ce(this.referrer)&&this.referrer!=j&&$e(window,this.referrer)}},setup(){const e=me(),s=K(),r=T(),a=O(),o=M(),{address:i,chainId:c,isActivated:l,signer:u}=y(),{connectWith:w}=V(),A=new he({appName:e.projectName,jsonRpcUrl:E()[String(e.supportedChainId)]}),W=new ue({appUrl:e.projectUrl}),x=new fe({qrcode:!0,rpc:E()});return{address:i,chainId:c,coinbaseConnector:A,connectWith:w,isActivated:l,mmConnector:W,signer:u,notificationsStore:s,sidebarStore:r,siteStore:a,userStore:o,wcConnector:x}},watch:{address(e,s){e.startsWith("0x")&&s.startsWith("0x")&&String(e).toLowerCase()!==String(s).toLowerCase()&&this.orbisLogout(),e&&this.fetchUserDomain()},chainId(e,s){e&&this.fetchUserDomain()},isActivated(e,s){s===!0&&e===!1?(console.log("user disconnected"),localStorage.setItem("connected",""),this.orbisLogout()):this.userStore.getDid||this.getOrbisDids()},isConnectedToOrbis(e,s){e&&s===!1&&this.fetchOrbisProfile()},orbisAddress(e,s){e&&this.address&&String(e).toLowerCase()!=String(this.address).toLowerCase()&&(console.log("Logging out of Orbis because the address in signed Orbis credentials does not matched the current user's address."),this.orbisLogout())},width(e,s){e>this.breakpoint?(this.lSidebar.show(),this.rSidebar.show(),this.sidebarStore.setLeftSidebar(!0),this.sidebarStore.setMainContent(!0),this.sidebarStore.setRightSidebar(!0)):(this.lSidebar.hide(),this.rSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setMainContent(!0),this.sidebarStore.setRightSidebar(!1))}}},sa={class:"container-fluid page-container"},ia={class:"row flex-nowrap"},aa={class:"col col-lg-4 ps-md-2 pt-2 main-containter"},na={class:"modal modal-sm fade",id:"connectModal",tabindex:"-1","aria-labelledby":"connectModalLabel","aria-hidden":"true"},oa={class:"modal-dialog",role:"document"},ra={class:"modal-content"},da=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Connect your wallet"),t("button",{id:"closeConnectModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"})])],-1),la={class:"modal-body row"},ca=t("img",{src:qi,class:"card-img-top card-img-wallet",alt:"MetaMask"},null,-1),ma=t("small",{class:"text-center mb-3 text-muted"},"MetaMask",-1),ha=[ca,ma],ua=t("img",{src:Gi,class:"card-img-top card-img-wallet",alt:"Rabby"},null,-1),fa=t("small",{class:"text-center mb-3 text-muted"},"Rabby",-1),ga=[ua,fa],ba=t("img",{src:Zi,class:"card-img-top card-img-wallet",alt:"Bifrost"},null,-1),pa=t("small",{class:"text-center mb-3 text-muted"},"Bifrost",-1),_a=[ba,pa],wa=t("img",{src:Yi,class:"card-img-top card-img-wallet",alt:"Zerion"},null,-1),Sa=t("small",{class:"text-center mb-3 text-muted"},"Zerion",-1),va=[wa,Sa],ka=t("img",{src:Ji,class:"card-img-top card-img-wallet",alt:"Coinbase"},null,-1),ya=t("small",{class:"text-center mb-3 text-muted"},"Coinbase",-1),Na=[ka,ya],$a=t("img",{src:Qi,class:"card-img-top card-img-wallet",alt:"Brave"},null,-1),Ca=t("small",{class:"text-center mb-3 text-muted"},"Brave",-1),Ma=[$a,Ca],La=t("img",{src:Xi,class:"card-img-top card-img-wallet",alt:"Trust Wallet"},null,-1),Aa=t("small",{class:"text-center mb-3 text-muted"},"Trust Wallet",-1),Da=[La,Aa],Pa=t("img",{src:ea,class:"card-img-top card-img-wallet",alt:"imToken"},null,-1),Ra=t("small",{class:"text-center mb-3 text-muted"},"imToken",-1),Ta=[Pa,Ra];function Wa(e,s,r,a,o,i){const c=ie,l=ae,u=ne,w=se,A=p("NavbarDesktop"),W=p("NavbarMobile"),x=p("SidebarLeft"),J=p("SidebarRight"),Q=p("VerifyAccountOwnership"),X=p("ChatSettingsModal"),ee=p("ReferralModal"),te=p("ChangeUsernameModal");return n(),d(I,null,[t("div",null,[m(w,null,{default:b(()=>[m(c,null,{default:b(()=>[f(g(e.$config.projectMetadataTitle),1)]),_:1}),m(l,{name:"description",content:e.$config.projectDescription},null,8,["content"]),m(u,{rel:"icon",type:"image/x-icon",href:e.$config.favicon},null,8,["href"]),m(l,{property:"og:title",content:e.$config.projectMetadataTitle},null,8,["content"]),m(l,{property:"og:description",content:e.$config.projectDescription},null,8,["content"]),m(l,{property:"og:image",content:e.$config.projectUrl+e.$config.previewImage},null,8,["content"]),m(l,{name:"twitter:card",content:"summary_large_image"}),m(l,{name:"twitter:site",content:e.$config.projectTwitter},null,8,["content"]),m(l,{name:"twitter:creator",content:e.$config.projectTwitter},null,8,["content"]),m(l,{name:"twitter:title",content:e.$config.projectMetadataTitle},null,8,["content"]),m(l,{name:"twitter:description",content:e.$config.projectDescription},null,8,["content"]),m(l,{name:"twitter:image",content:e.$config.projectUrl+e.$config.previewImage},null,8,["content"])]),_:1}),i.isMobile?h("",!0):(n(),k(A,{key:0})),i.isMobile?(n(),k(W,{key:1,lSidebar:o.lSidebar,rSidebar:o.rSidebar},null,8,["lSidebar","rSidebar"])):h("",!0),t("div",sa,[t("div",ia,[m(x,{lSidebar:o.lSidebar,isMobile:i.isMobile},null,8,["lSidebar","isMobile"]),L(t("main",aa,[be(e.$slots,"default")],512),[[ge,a.sidebarStore.showMainContent]]),m(J,{rSidebar:o.rSidebar,isMobile:i.isMobile},null,8,["rSidebar","isMobile"])])]),t("div",na,[t("div",oa,[t("div",ra,[da,t("div",la,[t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[0]||(s[0]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},ha),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[1]||(s[1]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},ga),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[2]||(s[2]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},_a),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[3]||(s[3]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},va),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[4]||(s[4]=(..._)=>i.connectCoinbase&&i.connectCoinbase(..._))},Na),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[5]||(s[5]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},Ma),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[6]||(s[6]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},Da),t("div",{class:"card col-6 cursor-pointer wallet-img-wrapper",onClick:s[7]||(s[7]=(..._)=>i.connectMetaMask&&i.connectMetaMask(..._))},Ta)])])])]),m(Q),m(X),m(ee),m(te)]),(n(),k(pe("script"),null,{default:b(()=>[f(" var global = global || window; ")]),_:1}))],64)}const en=v(ta,[["render",Wa]]);export{en as default};
