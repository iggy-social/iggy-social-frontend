import{H as Je,T as Ze,M as et}from"./components.de98b0b7.js";import{a1 as xe,a2 as me,N as ye,a3 as Te,a4 as tt,a as R,I as v,C,l as H,x as X,o as p,b as f,f as r,t as c,D as ne,m as k,i as g,q as E,y as q,z as V,u as pe,a0 as F,F as we,Q as ot,v as Be,e as W,w as ke,U as nt,r as K}from"./entry.bf8aec9c.js";import{g as fe}from"./numberUtils.c516b59a.js";import{W as D}from"./WaitingToast.5da5d269.js";import{u as z}from"./user.5a9dd487.js";import{u as We}from"./site.ff78582b.js";import"./composables.79628e0c.js";var Se={},ae={},L={},b={},De={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.toBig=t.split=t.fromBig=void 0;const e=BigInt(2**32-1),o=BigInt(32);function i(u,h=!1){return h?{h:Number(u&e),l:Number(u>>o&e)}:{h:Number(u>>o&e)|0,l:Number(u&e)|0}}t.fromBig=i;function s(u,h=!1){let d=new Uint32Array(u.length),x=new Uint32Array(u.length);for(let B=0;B<u.length;B++){const{h:he,l:Qe}=i(u[B],h);[d[B],x[B]]=[he,Qe]}return[d,x]}t.split=s;const n=(u,h)=>BigInt(u>>>0)<<o|BigInt(h>>>0);t.toBig=n;const a=(u,h,d)=>u>>>d,l=(u,h,d)=>u<<32-d|h>>>d,w=(u,h,d)=>u>>>d|h<<32-d,T=(u,h,d)=>u<<32-d|h>>>d,_=(u,h,d)=>u<<64-d|h>>>d-32,I=(u,h,d)=>u>>>d-32|h<<64-d,m=(u,h)=>h,y=(u,h)=>u,j=(u,h,d)=>u<<d|h>>>32-d,He=(u,h,d)=>h<<d|u>>>32-d,je=(u,h,d)=>h<<d-32|u>>>64-d,Oe=(u,h,d)=>u<<d-32|h>>>64-d;function ge(u,h,d,x){const B=(h>>>0)+(x>>>0);return{h:u+d+(B/2**32|0)|0,l:B|0}}t.add=ge;const qe=(u,h,d)=>(u>>>0)+(h>>>0)+(d>>>0),Ve=(u,h,d,x)=>h+d+x+(u/2**32|0)|0,Ye=(u,h,d,x)=>(u>>>0)+(h>>>0)+(d>>>0)+(x>>>0),Xe=(u,h,d,x,B)=>h+d+x+B+(u/2**32|0)|0,ze=(u,h,d,x,B)=>(u>>>0)+(h>>>0)+(d>>>0)+(x>>>0)+(B>>>0),Ge=(u,h,d,x,B,he)=>h+d+x+B+he+(u/2**32|0)|0,Ke={fromBig:i,split:s,toBig:t.toBig,shrSH:a,shrSL:l,rotrSH:w,rotrSL:T,rotrBH:_,rotrBL:I,rotr32H:m,rotr32L:y,rotlSH:j,rotlSL:He,rotlBH:je,rotlBL:Oe,add:ge,add3L:qe,add3H:Ve,add4L:Ye,add4H:Xe,add5H:Ge,add5L:ze};t.default=Ke})(De);Object.defineProperty(b,"__esModule",{value:!0});b.shake256=b.shake128=b.keccak_512=b.keccak_384=b.keccak_256=b.keccak_224=b.sha3_512=b.sha3_384=b.sha3_256=b.sha3_224=b.Keccak=b.keccakP=void 0;const O=xe,J=De,Q=me,[Ee,Le,$e]=[[],[],[]],st=BigInt(0),G=BigInt(1),it=BigInt(2),at=BigInt(7),rt=BigInt(256),lt=BigInt(113);for(let t=0,e=G,o=1,i=0;t<24;t++){[o,i]=[i,(2*o+3*i)%5],Ee.push(2*(5*i+o)),Le.push((t+1)*(t+2)/2%64);let s=st;for(let n=0;n<7;n++)e=(e<<G^(e>>at)*lt)%rt,e&it&&(s^=G<<(G<<BigInt(n))-G);$e.push(s)}const[ct,ut]=J.default.split($e,!0),Ae=(t,e,o)=>o>32?J.default.rotlBH(t,e,o):J.default.rotlSH(t,e,o),_e=(t,e,o)=>o>32?J.default.rotlBL(t,e,o):J.default.rotlSL(t,e,o);function Me(t,e=24){const o=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)o[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,w=(a+2)%10,T=o[w],_=o[w+1],I=Ae(T,_,1)^o[l],m=_e(T,_,1)^o[l+1];for(let y=0;y<50;y+=10)t[a+y]^=I,t[a+y+1]^=m}let s=t[2],n=t[3];for(let a=0;a<24;a++){const l=Le[a],w=Ae(s,n,l),T=_e(s,n,l),_=Ee[a];s=t[_],n=t[_+1],t[_]=w,t[_+1]=T}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)o[l]=t[a+l];for(let l=0;l<10;l++)t[a+l]^=~o[(l+2)%10]&o[(l+4)%10]}t[0]^=ct[i],t[1]^=ut[i]}o.fill(0)}b.keccakP=Me;class te extends Q.Hash{constructor(e,o,i,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=o,this.outputLen=i,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,O.default.number(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Q.u32)(this.state)}keccak(){Me(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){O.default.exists(this);const{blockLen:o,state:i}=this;e=(0,Q.toBytes)(e);const s=e.length;for(let n=0;n<s;){const a=Math.min(o-this.pos,s-n);for(let l=0;l<a;l++)i[this.pos++]^=e[n++];this.pos===o&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:o,pos:i,blockLen:s}=this;e[i]^=o,(o&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){O.default.exists(this,!1),O.default.bytes(e),this.finish();const o=this.state,{blockLen:i}=this;for(let s=0,n=e.length;s<n;){this.posOut>=i&&this.keccak();const a=Math.min(i-this.posOut,n-s);e.set(o.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return O.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(O.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:o,suffix:i,outputLen:s,rounds:n,enableXOF:a}=this;return e||(e=new te(o,i,s,a,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=i,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}b.Keccak=te;const P=(t,e,o)=>(0,Q.wrapConstructor)(()=>new te(e,t,o));b.sha3_224=P(6,144,224/8);b.sha3_256=P(6,136,256/8);b.sha3_384=P(6,104,384/8);b.sha3_512=P(6,72,512/8);b.keccak_224=P(1,144,224/8);b.keccak_256=P(1,136,256/8);b.keccak_384=P(1,104,384/8);b.keccak_512=P(1,72,512/8);const Pe=(t,e,o)=>(0,Q.wrapConstructorWithOpts)((i={})=>new te(e,t,i.dkLen===void 0?o:i.dkLen,!0));b.shake128=Pe(31,168,128/8);b.shake256=Pe(31,136,256/8);var Y={exports:{}};(function(t,e){var o=ye&&ye.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=e.wrapHash=e.equalsBytes=e.hexToBytes=e.bytesToUtf8=e.utf8ToBytes=e.createView=e.concatBytes=e.toHex=e.bytesToHex=e.assertBytes=e.assertBool=void 0;const i=o(xe),s=me,n=i.default.bool;e.assertBool=n;const a=i.default.bytes;e.assertBytes=a;var l=me;Object.defineProperty(e,"bytesToHex",{enumerable:!0,get:function(){return l.bytesToHex}}),Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return l.bytesToHex}}),Object.defineProperty(e,"concatBytes",{enumerable:!0,get:function(){return l.concatBytes}}),Object.defineProperty(e,"createView",{enumerable:!0,get:function(){return l.createView}}),Object.defineProperty(e,"utf8ToBytes",{enumerable:!0,get:function(){return l.utf8ToBytes}});function w(m){if(!(m instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof m}`);return new TextDecoder().decode(m)}e.bytesToUtf8=w;function T(m){const y=m.startsWith("0x")?m.substring(2):m;return(0,s.hexToBytes)(y)}e.hexToBytes=T;function _(m,y){if(m.length!==y.length)return!1;for(let j=0;j<m.length;j++)if(m[j]!==y[j])return!1;return!0}e.equalsBytes=_;function I(m){return y=>(i.default.bytes(y),m(y))}e.wrapHash=I,e.crypto=(()=>{const m=typeof self=="object"&&"crypto"in self?self.crypto:void 0,y=typeof Te=="function"&&Te.bind(t);return{node:y&&!m?y("crypto"):void 0,web:m}})()})(Y,Y.exports);Object.defineProperty(L,"__esModule",{value:!0});L.keccak512=L.keccak384=L.keccak256=L.keccak224=void 0;const Z=b,re=Y.exports;L.keccak224=(0,re.wrapHash)(Z.keccak_224);L.keccak256=(()=>{const t=(0,re.wrapHash)(Z.keccak_256);return t.create=Z.keccak_256.create,t})();L.keccak384=(0,re.wrapHash)(Z.keccak_384);L.keccak512=(0,re.wrapHash)(Z.keccak_512);var U={};Object.defineProperty(U,"__esModule",{value:!0});U.hex=U.compareBytes=void 0;const dt=Y.exports;function ht(t,e){const o=Math.min(t.length,e.length);for(let i=0;i<o;i++)if(t[i]!==e[i])return t[i]-e[i];return t.length-e.length}U.compareBytes=ht;function pt(t){return"0x"+(0,dt.bytesToHex)(t)}U.hex=pt;var A={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.throwError=void 0;function ft(t){throw new Error(t)}oe.throwError=ft;Object.defineProperty(A,"__esModule",{value:!0});A.renderMerkleTree=A.isValidMerkleTree=A.processMultiProof=A.getMultiProof=A.processProof=A.getProof=A.makeMerkleTree=void 0;const mt=L,be=Y.exports,kt=U,le=oe,ce=(t,e)=>(0,mt.keccak256)((0,be.concatBytes)(...[t,e].sort(kt.compareBytes))),ue=t=>2*t+1,se=t=>2*t+2,Ie=t=>t>0?Math.floor((t-1)/2):(0,le.throwError)("Root has no parent"),Ne=t=>t>0?t-(-1)**(t%2):(0,le.throwError)("Root has no siblings"),Fe=(t,e)=>e>=0&&e<t.length,wt=(t,e)=>Fe(t,ue(e)),bt=(t,e)=>Fe(t,e)&&!wt(t,e),Ue=t=>t instanceof Uint8Array&&t.length===32,Re=(t,e)=>void(bt(t,e)||(0,le.throwError)("Index is not a leaf")),ee=t=>void(Ue(t)||(0,le.throwError)("Merkle tree nodes must be Uint8Array of length 32"));function gt(t){if(t.forEach(ee),t.length===0)throw new Error("Expected non-zero number of leaves");const e=new Array(2*t.length-1);for(const[o,i]of t.entries())e[e.length-1-o]=i;for(let o=e.length-1-t.length;o>=0;o--)e[o]=ce(e[ue(o)],e[se(o)]);return e}A.makeMerkleTree=gt;function yt(t,e){Re(t,e);const o=[];for(;e>0;)o.push(t[Ne(e)]),e=Ie(e);return o}A.getProof=yt;function Tt(t,e){return ee(t),e.forEach(ee),e.reduce(ce,t)}A.processProof=Tt;function At(t,e){if(e.forEach(n=>Re(t,n)),e.sort((n,a)=>a-n),e.slice(1).some((n,a)=>n===e[a]))throw new Error("Cannot prove duplicated index");const o=e.concat(),i=[],s=[];for(;o.length>0&&o[0]>0;){const n=o.shift(),a=Ne(n),l=Ie(n);a===o[0]?(s.push(!0),o.shift()):(s.push(!1),i.push(t[a])),o.push(l)}return e.length===0&&i.push(t[0]),{leaves:e.map(n=>t[n]),proof:i,proofFlags:s}}A.getMultiProof=At;function _t(t){if(t.leaves.forEach(ee),t.proof.forEach(ee),t.proof.length<t.proofFlags.filter(i=>!i).length)throw new Error("Invalid multiproof format");if(t.leaves.length+t.proof.length!==t.proofFlags.length+1)throw new Error("Provided leaves and multiproof are not compatible");const e=t.leaves.concat(),o=t.proof.concat();for(const i of t.proofFlags){const s=e.shift(),n=i?e.shift():o.shift();if(s===void 0||n===void 0)throw new Error("Broken invariant");e.push(ce(s,n))}if(e.length+o.length!==1)throw new Error("Broken invariant");return e.pop()??o.shift()}A.processMultiProof=_t;function vt(t){for(const[e,o]of t.entries()){if(!Ue(o))return!1;const i=ue(e),s=se(e);if(s>=t.length){if(i<t.length)return!1}else if(!(0,be.equalsBytes)(o,ce(t[i],t[s])))return!1}return t.length>0}A.isValidMerkleTree=vt;function Ct(t){if(t.length===0)throw new Error("Expected non-zero number of nodes");const e=[[0,[]]],o=[];for(;e.length>0;){const[i,s]=e.pop();o.push(s.slice(0,-1).map(n=>["   ","\u2502  "][n]).join("")+s.slice(-1).map(n=>["\u2514\u2500 ","\u251C\u2500 "][n]).join("")+i+") "+(0,be.bytesToHex)(t[i])),se(i)<t.length&&(e.push([se(i),s.concat(0)]),e.push([ue(i),s.concat(1)]))}return o.join(`
`)}A.renderMerkleTree=Ct;var de={};Object.defineProperty(de,"__esModule",{value:!0});de.checkBounds=void 0;function xt(t,e){if(e<0||e>=t.length)throw new Error("Index out of bounds")}de.checkBounds=xt;Object.defineProperty(ae,"__esModule",{value:!0});ae.StandardMerkleTree=void 0;const ve=L,S=Y.exports,Bt=tt,M=U,$=A,Ce=de,Wt=oe;function N(t,e){return(0,ve.keccak256)((0,ve.keccak256)((0,S.hexToBytes)(Bt.defaultAbiCoder.encode(e,t))))}class ie{constructor(e,o,i){this.tree=e,this.values=o,this.leafEncoding=i,this.hashLookup=Object.fromEntries(o.map(({value:s},n)=>[(0,M.hex)(N(s,i)),n]))}static of(e,o){const i=e.map((a,l)=>({value:a,valueIndex:l,hash:N(a,o)})).sort((a,l)=>(0,M.compareBytes)(a.hash,l.hash)),s=(0,$.makeMerkleTree)(i.map(a=>a.hash)),n=e.map(a=>({value:a,treeIndex:0}));for(const[a,{valueIndex:l}]of i.entries())n[l].treeIndex=s.length-a-1;return new ie(s,n,o)}static load(e){if(e.format!=="standard-v1")throw new Error(`Unknown format '${e.format}'`);return new ie(e.tree.map(S.hexToBytes),e.values,e.leafEncoding)}static verify(e,o,i,s){const n=(0,$.processProof)(N(i,o),s.map(S.hexToBytes));return(0,S.equalsBytes)(n,(0,S.hexToBytes)(e))}static verifyMultiProof(e,o,i){const s=i.leaves.map(l=>N(l,o)),n=i.proof.map(S.hexToBytes),a=(0,$.processMultiProof)({leaves:s,proof:n,proofFlags:i.proofFlags});return(0,S.equalsBytes)(a,(0,S.hexToBytes)(e))}dump(){return{format:"standard-v1",tree:this.tree.map(M.hex),values:this.values,leafEncoding:this.leafEncoding}}render(){return(0,$.renderMerkleTree)(this.tree)}get root(){return(0,M.hex)(this.tree[0])}*entries(){for(const[e,{value:o}]of this.values.entries())yield[e,o]}validate(){for(let e=0;e<this.values.length;e++)this.validateValue(e);if(!(0,$.isValidMerkleTree)(this.tree))throw new Error("Merkle tree is invalid")}leafHash(e){return(0,M.hex)(N(e,this.leafEncoding))}leafLookup(e){return this.hashLookup[this.leafHash(e)]??(0,Wt.throwError)("Leaf is not in tree")}getProof(e){const o=typeof e=="number"?e:this.leafLookup(e);this.validateValue(o);const{treeIndex:i}=this.values[o],s=(0,$.getProof)(this.tree,i);if(!this._verify(this.tree[i],s))throw new Error("Unable to prove value");return s.map(M.hex)}getMultiProof(e){const o=e.map(n=>typeof n=="number"?n:this.leafLookup(n));for(const n of o)this.validateValue(n);const i=o.map(n=>this.values[n].treeIndex),s=(0,$.getMultiProof)(this.tree,i);if(!this._verifyMultiProof(s))throw new Error("Unable to prove values");return{leaves:s.leaves.map(n=>this.values[this.hashLookup[(0,M.hex)(n)]].value),proof:s.proof.map(M.hex),proofFlags:s.proofFlags}}verify(e,o){return this._verify(this.getLeafHash(e),o.map(S.hexToBytes))}_verify(e,o){const i=(0,$.processProof)(e,o);return(0,S.equalsBytes)(i,this.tree[0])}verifyMultiProof(e){return this._verifyMultiProof({leaves:e.leaves.map(o=>this.getLeafHash(o)),proof:e.proof.map(S.hexToBytes),proofFlags:e.proofFlags})}_verifyMultiProof(e){const o=(0,$.processMultiProof)(e);return(0,S.equalsBytes)(o,this.tree[0])}validateValue(e){(0,Ce.checkBounds)(this.values,e);const{value:o,treeIndex:i}=this.values[e];(0,Ce.checkBounds)(this.tree,i);const s=N(o,this.leafEncoding);if(!(0,S.equalsBytes)(s,this.tree[i]))throw new Error("Merkle tree does not contain the expected value");return s}getLeafHash(e){return typeof e=="number"?this.validateValue(e):N(e,this.leafEncoding)}}ae.StandardMerkleTree=ie;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StandardMerkleTree=void 0;var e=ae;Object.defineProperty(t,"StandardMerkleTree",{enumerable:!0,get:function(){return e.StandardMerkleTree}})})(Se);const St={name:"GenericNftDrop",props:["claimersData","description","imageClass","merkleClaimerAddress","nftImage","title"],data(){return{isUserEligible:!1,userArrayPosition:-1,waiting:!1}},mounted(){this.isUserEligible||this.checkEligibility()},methods:{checkEligibility(){const t=this.claimersData.claimers.findIndex(e=>e[0].toLowerCase()===this.address.toLowerCase());t>-1?(this.isUserEligible=!0,this.userArrayPosition=t):(this.isUserEligible=!1,this.userArrayPosition=-1)},async claim(){this.waiting=!0;const e=Se.StandardMerkleTree.of(this.claimersData.claimers,["address","uint256"]).getProof(this.userArrayPosition),o=new v(["function claim(address to_, bytes32[] memory proof_) external"]),i=new C(this.merkleClaimerAddress,o,this.signer);try{const s=await i.claim(this.address,e),n=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),a=await s.wait();a.status===1?(this.toast.dismiss(n),this.toast("You have successfully claimed the NFT!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),this.waiting=!1):(this.toast.dismiss(n),this.waiting=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+s.hash,"_blank").focus()}),console.log(a))}catch(s){console.error(s);try{let n=s.message.split("reason=")[1];n=n.split(", method=")[0],n=n.replace(/"/g,""),n=n.replace("execution reverted:","Error:"),n=n.replace("MerkleClaimerERC721: ",""),console.log(n),this.toast(n,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1}}},setup(){const{address:t,chainId:e,signer:o}=H(),i=X();return{address:t,chainId:e,signer:o,toast:i}},watch:{address(t,e){t&&this.checkEligibility()}}},Dt=r("hr",null,null,-1),Et={class:"text-center mt-5"},Lt={class:"d-flex justify-content-center mt-4 mb-4"},$t=["src"],Mt={key:0,class:"text-center"},Pt={key:1},It={class:"text-center"},Nt={class:"d-flex justify-content-center mt-4 mb-4"},Ft=["disabled"],Ut={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function Rt(t,e,o,i,s,n){return p(),f("div",null,[Dt,r("h4",Et,c(o.title),1),r("div",Lt,[r("img",{src:o.nftImage,class:ne(["img-thumbnail",o.imageClass]),style:{"max-width":"200px"},alt:"NFT image"},null,10,$t)]),s.isUserEligible?k("",!0):(p(),f("p",Mt," Not eligible... ")),s.isUserEligible?(p(),f("div",Pt,[r("p",It,c(o.description),1),r("div",Nt,[r("button",{disabled:s.waiting,onClick:e[0]||(e[0]=(...a)=>n.claim&&n.claim(...a)),class:"btn btn-outline-primary"},[s.waiting?(p(),f("span",Ut)):k("",!0),g(" Claim NFT ")],8,Ft)])])):k("",!0)])}const Ht=R(St,[["render",Rt]]),jt=[["0xfbB47737EBa09AE9A1bda64e739E2B73807F2d05",1],["0x88e19Feaa4F8cc573B06553186E3A2b5bf797490",1],["0x1f4150C5266e24c61f7109b650FF391ac17EBca3",1],["0xCE30720EDE61E9541FB9Fe99397e362530D75ccD",1],["0xb29050965A5AC70ab487aa47546cdCBc97dAE45D",1],["0x5FfD23B1B0350debB17A2cB668929aC5f76d0E18",1],["0x6771F33Cfd8C6FC0A1766331f715f5d2E1d4E0e2",1],["0xDac4F20b21bcae1eb74c2D7256e7E945d8146dDB",1],["0x9AB3868ee9E6A0bA8595D26c30802f7344f80AcB",1],["0x648537ecE8c8022208212a61Dc41441BD0DeA23F",1],["0x52dee9C4b0E085e90c5E5eC9c150cE39f3940935",1],["0x5193877dD31b569Fedf762308aFae70B9091b951",1],["0x72B871dc4Fbca049a009Ec9c3c3fdBD531BeFb5F",1],["0x396739Ee44a7cEE1F5bF645A94BF7D489bDc0fca",1],["0x617258CdbcCEf7058b251a11cC4c8905B2550a7A",1],["0xDD3cEeae522C8030BA7649Be56B1D9aD58aA70d3",1],["0x877B37D3E5467B4aAE7687Dd3480A46C8D3e16Be",1],["0xcA4599ae99Cc0e11ecb2085A9B9458e56a555866",1],["0x5E8B54705FA6141FED6dd661F6bEBB58F8B1a3c2",1],["0x335E1cD1b9278C74F2A250F2D80E4E89A225b75E",1],["0x0968438CE241Eb2631EC8a7fC72DD4040A80C750",1],["0x5412DFA75F988849ab8dc47Bf5cb2fB1fd556078",1],["0x075286D1a22B083ebCAF6B7Fb4CF970cFC4A18F0",1],["0x0D069d8471A2bA6815CeD486bc3DC8285772283c",1],["0x17a2063e1f5C6034F4c94cfb0F4970483647a2E5",1],["0x7910B8E68AADECcD2CaCcA31c110Dbf1E37CAd3E",1],["0xcF5E01d5E5A0f4A4FBC1435E0C079dD4B834093c",1],["0x896fba9Eb262Dc7c434C6b267FA84D44f16A95f0",1],["0x81D8929d2821E900033b58B4B4bAce7D7ADcBA5b",1],["0xB4e4B1ABe50Cc1d2CD776158063a060164598669",1],["0x5d05626252299C3932F2F95Ab9aFEfAC97bFC656",1],["0x83593d13fec30806c989410f9325Fd18245b246B",1],["0x9001c4b60C19A2fF1Fb68b90a039509a709474A0",1],["0x9C95Be085a01989E5CC3592d77E015ECac44Da34",1],["0xb46eD5AeB116901c2523D5501152A225c38a4C45",1],["0xdFf0bE434270bACf2EB1B69A57dA0c0E18119471",1],["0x1905E8fdc8483B075f41043212Bfc17Cef0F3D27",1],["0x78B45FF8ffaEA7257996767d40674E717051Ce5E",1],["0xc16D2e43904d5359F6c2f2E9b5417f09b84702C1",1]],Ot={claimers:jt},qt={name:"StakingClaim",props:["loadingStakingData","claimAmountWei","claimRewardsTotalWei","futureRewardsWei","lastClaimPeriod","minDepositWei","periodLength"],emits:["clearClaimAmount","updateLastClaimPeriod"],data(){return{claimers:[],waiting:!1}},components:{GenericNftDrop:Ht,WaitingToast:D},created(){this.claimers=Ot},computed:{claimAmount(){return this.claimAmountWei===null||this.claimAmountWei===void 0||this.claimAmountWei===""||this.claimAmountWei==0?0:E(String(this.claimAmountWei))},claimRewardsTotal(){return this.claimRewardsTotalWei===null||this.claimRewardsTotalWei===void 0||this.claimRewardsTotalWei===""||this.claimRewardsTotalWei==0?0:E(String(this.claimRewardsTotalWei))},futureRewards(){return this.futureRewardsWei===null||this.futureRewardsWei===void 0||this.futureRewardsWei===""||this.futureRewardsWei==0?0:E(String(this.futureRewardsWei))},lastPeriodDateTime(){if(this.lastClaimPeriod===null||this.lastClaimPeriod===void 0||this.lastClaimPeriod===""||this.lastClaimPeriod==0)return null;const t=new Date(this.lastClaimPeriod*1e3),e=new Intl.DateTimeFormat("en",{month:"short"}).format(t);return t.getDate()+" "+e+" "+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes().toString().padStart(2,"0")},lastPeriodUpdateNeeded(){return this.lastClaimPeriod===null||this.lastClaimPeriod===void 0||this.lastClaimPeriod===""||this.lastClaimPeriod==0?!1:Math.floor(Date.now()/1e3)-(Number(this.lastClaimPeriod)+Number(this.periodLength))>0},minDeposit(){return this.minDepositWei===null||this.minDepositWei===void 0||this.minDepositWei===""||this.minDepositWei==0?0:E(String(this.minDepositWei))},periodLengthHumanReadable(){if(this.periodLength===null||this.periodLength===void 0||this.periodLength===""||this.periodLength==0)return null;const t=Number(this.periodLength),e=Math.floor(t/60),o=Math.floor(e/60),i=Math.floor(o/24);return i>0?`${i} days`:o>0?`${o} hours`:e>0?`${e} minutes`:`${t} seconds`},stakeTokenBalance(){return E(this.userStore.getStakeTokenBalanceWei)}},methods:{async claim(){this.waiting=!0;const t=new v(["function claimRewards() external returns (uint256)"]),e=new C(this.$config.stakingContractAddress,t,this.signer);try{const o=await e.claimRewards(),i=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),s=await o.wait();s.status===1?(this.$emit("clearClaimAmount"),this.$emit("updateLastClaimPeriod"),this.toast.dismiss(i),this.toast("You have successfully claimed rewards!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.waiting=!1):(this.toast.dismiss(i),this.waiting=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(s))}catch(o){console.error(o),this.toast(o.message,{type:"error"}),this.waiting=!1}}},setup(){const{address:t,signer:e}=H(),o=X(),i=z();return{address:t,signer:e,toast:o,userStore:i}}},Vt={class:"text-center"},Yt={class:"input-group mt-5"},Xt={class:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:""},zt={class:"d-flex justify-content-center mt-4 mb-4"},Gt=["disabled"],Kt={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Qt={key:1},Jt={key:2},Zt=r("hr",null,null,-1),eo=r("h4",{class:"text-center"},"Stats",-1),to=r("i",{class:"bi bi-info-circle-fill","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"top","data-bs-content":"Claimable now. Note that this is a total number for all stakers together."},null,-1),oo=r("i",{class:"bi bi-info-circle-fill","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"top","data-bs-content":"Accrued rewards so far for all stakers together. Not claimable yet. Will be claimable in the next period."},null,-1),no=r("p",null,[r("small",null," Important: Claim your rewards once per week, otherwise they will be forfeited. ")],-1);function so(t,e,o,i,s,n){return p(),f("div",null,[r("p",Vt," Claim "+c(t.$config.tokenSymbol)+" rewards for the previous period. Make sure to visit this page once per week to claim your rewards! ",1),r("div",Yt,[r("button",Xt,c(t.$config.tokenSymbol),1),q(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.claimAmount=a),type:"text",class:"form-control",disabled:""},null,512),[[V,n.claimAmount]])]),r("div",zt,[r("button",{disabled:s.waiting,class:"btn btn-outline-primary",type:"button",onClick:e[1]||(e[1]=(...a)=>n.claim&&n.claim(...a))},[o.loadingStakingData||s.waiting?(p(),f("span",Kt)):k("",!0),n.lastPeriodUpdateNeeded?k("",!0):(p(),f("span",Qt,"Claim")),n.lastPeriodUpdateNeeded?(p(),f("span",Jt,"Update Claim Period")):k("",!0)],8,Gt)]),Zt,eo,r("ul",null,[r("li",null,"Your stake: "+c(pe(fe)(n.stakeTokenBalance))+" "+c(t.$config.lpTokenSymbol)+" ("+c(t.$config.stakeTokenSymbol)+" tokens)",1),r("li",null,[g(" Previous period rewards (total): "+c(pe(fe)(n.claimRewardsTotal))+" "+c(t.$config.tokenSymbol)+" ",1),to]),r("li",null,[g(" Current period rewards (so far): "+c(pe(fe)(n.futureRewards))+" "+c(t.$config.tokenSymbol)+" ",1),oo]),r("li",null,"Period length: "+c(n.periodLengthHumanReadable),1),r("li",null,"Current period start date: "+c(n.lastPeriodDateTime),1)]),no])}const io=R(qt,[["render",so]]),ao={name:"AddLiquidity",data(){return{allowanceWei:0,debounce:null,depositAmount:0,ethFieldDisabled:!0,nativeCoinAmount:0,nativeCoinAmountWei:null,timeout:800,waitingApproval:!1,waitingDeposit:!1}},components:{WaitingToast:D},mounted(){this.address&&this.fetchAllowance()},computed:{allowanceTooLow(){return Number(this.allowanceWei)<Number(this.depositAmountWei)},chatBalanceTooLow(){return Number(this.userStore.getChatTokenBalanceWei)<Number(this.depositAmountWei)},chatTokenBalance(){return E(this.userStore.getChatTokenBalanceWei)},depositAmountWei(){return!this.depositAmount||Number(this.depositAmount)===0?0:F(String(this.depositAmount))},nativeBalance(){if(this.balance){const t=Number(E(this.balance));return t>0?t.toFixed(2):t.toFixed(6)}return 0},nativeBalanceTooLow(){return this.balance?Number(this.nativeCoinAmountWei)>Number(this.balance):!1}},methods:{async approveToken(){this.waitingApproval=!0;const t=new v(["function approve(address spender, uint256 amount) public returns (bool)"]),e=new C(this.$config.chatTokenAddress,t,this.signer);try{const o=await e.approve(this.$config.swapRouterAddress,this.depositAmountWei),i=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),s=await o.wait();s.status===1?(this.allowanceWei=this.depositAmountWei,this.toast.dismiss(i),this.toast("You have successfully approved tokens. Now proceed with getting LP tokens!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.waitingApproval=!1,this.deposit()):(this.toast.dismiss(i),this.waitingApproval=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(s))}catch(o){console.error(o),this.waitingApproval=!1}},async deposit(){this.waitingDeposit=!0;const t=new v(["function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"]),e=new C(this.$config.swapRouterAddress,t,this.signer),o=Math.floor(Date.now()/1e3)+60*this.siteStore.getSwapDeadline,i=F(String(this.nativeCoinAmount)),s=Math.floor(Number(this.siteStore.getSlippage)*100),n=i.sub(i.div(1e4).mul(s)),a=this.depositAmountWei.sub(this.depositAmountWei.div(1e4).mul(s));try{const l=await e.addLiquidityETH(this.$config.chatTokenAddress,this.depositAmountWei,a,n,this.address,o,{value:i}),w=this.toast({component:D,props:{text:`Adding liquidity to the ${this.$config.chatTokenSymbol}-${this.$config.tokenSymbol} pool...`}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),T=await l.wait();if(T.status===1){this.toast.dismiss(w),this.toast(`You have successfully provided liquidity and received ${this.$config.lpTokenSymbol}!`,{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.allowanceWei.sub(this.depositAmountWei);let _=F(this.chatTokenBalance);this.userStore.setChatTokenBalanceWei(_.sub(this.depositAmountWei)),this.fetchLpTokenBalance()}else this.toast.dismiss(w),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),console.log(T)}catch(l){console.error(l)}finally{this.waitingDeposit=!1}},async fetchAllowance(){const t=new v(["function allowance(address owner, address spender) public view returns (uint256)"]),e=new C(this.$config.chatTokenAddress,t,this.signer);this.allowanceWei=await e.allowance(this.address,this.$config.swapRouterAddress)},async fetchLpTokenBalance(){const t=new v(["function balanceOf(address account) external view returns (uint256)"]),e=new C(this.$config.lpTokenAddress,t,this.signer);this.userStore.setLpTokenBalanceWei(await e.balanceOf(this.address))},async fetchNativeCoinAmount(){const t=new v(["function calculateETHForLiquidity(address addressToken, uint256 amountToken) external view returns (uint256)"]),e=new C(this.$config.swapRouterAddress,t,this.signer);this.nativeCoinAmountWei=await e.calculateETHForLiquidity(this.$config.chatTokenAddress,F(String(this.depositAmount))),this.nativeCoinAmount=E(this.nativeCoinAmountWei),Number(this.nativeCoinAmountWei)===0&&(this.ethFieldDisabled=!1)},fetchNativeCoinAmountWithTimeout(){this.debounce&&clearTimeout(this.debounce);const t=this;this.debounce=setTimeout(()=>{t.fetchNativeCoinAmount()},t.timeout)},setMaxInputTokenAmount(){this.depositAmount=this.chatTokenBalance,this.fetchNativeCoinAmount()}},setup(){const{address:t,balance:e,signer:o}=H(),i=X(),s=z(),n=We();return{address:t,balance:e,signer:o,siteStore:n,toast:i,userStore:s}},watch:{address(t,e){t&&this.fetchAllowance()}}},ro={class:"text-center"},lo={class:"input-group mt-5"},co={class:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:""},uo=["disabled"],ho=r("small",null,"MAX",-1),po=[ho],fo={class:"text-muted"},mo={class:"input-group mt-5"},ko={class:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:""},wo=["disabled"],bo={class:"text-muted"},go={class:"d-flex justify-content-center mt-4 mb-4"},yo=["disabled"],To={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ao=["disabled"],_o={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},vo={key:2,disabled:"",class:"btn btn-outline-primary",type:"button"},Co={key:0},xo={key:1},Bo={class:"text-center"},Wo={key:0,class:"text-center"};function So(t,e,o,i,s,n){return p(),f(we,null,[r("p",ro," No "+c(t.$config.lpTokenSymbol)+"? Add liquidity to the "+c(t.$config.chatTokenSymbol)+"-"+c(t.$config.tokenSymbol)+" pool below to get some. ",1),r("div",lo,[r("button",co,c(t.$config.chatTokenSymbol),1),q(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.depositAmount=a),type:"text",class:"form-control",placeholder:"0.00",disabled:s.waitingApproval||s.waitingDeposit,onKeyup:e[1]||(e[1]=(...a)=>n.fetchNativeCoinAmountWithTimeout&&n.fetchNativeCoinAmountWithTimeout(...a))},null,40,uo),[[V,s.depositAmount]]),r("button",{onClick:e[2]||(e[2]=(...a)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...a)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},po)]),r("small",fo,[r("em",null,[g(" Balance: "),r("span",{class:"cursor-pointer hover-color",onClick:e[3]||(e[3]=(...a)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...a))},c(n.chatTokenBalance)+" "+c(t.$config.chatTokenSymbol),1)])]),r("div",mo,[r("button",ko,c(t.$config.tokenSymbol),1),q(r("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.nativeCoinAmount=a),type:"text",class:"form-control",disabled:s.ethFieldDisabled},null,8,wo),[[V,s.nativeCoinAmount]])]),r("small",bo,[r("em",null,[g(" Balance: "),r("span",null,c(n.nativeBalance)+" "+c(t.$config.tokenSymbol),1)])]),r("div",go,[n.allowanceTooLow&&!n.nativeBalanceTooLow?(p(),f("button",{key:0,disabled:s.waitingApproval,class:"btn btn-outline-primary",type:"button",onClick:e[5]||(e[5]=(...a)=>n.approveToken&&n.approveToken(...a))},[s.waitingApproval?(p(),f("span",To)):k("",!0),g(" Approve "+c(t.$config.chatTokenSymbol)+" token ",1)],8,yo)):k("",!0),!n.allowanceTooLow&&!n.nativeBalanceTooLow?(p(),f("button",{key:1,disabled:s.waitingDeposit,class:"btn btn-outline-primary",type:"button",onClick:e[6]||(e[6]=(...a)=>n.deposit&&n.deposit(...a))},[s.waitingDeposit?(p(),f("span",_o)):k("",!0),g(" Get "+c(t.$config.lpTokenSymbol),1)],8,Ao)):k("",!0),n.nativeBalanceTooLow||n.chatBalanceTooLow?(p(),f("button",vo,[n.nativeBalanceTooLow&&!n.chatBalanceTooLow?(p(),f("span",Co,c(t.$config.tokenSymbol),1)):k("",!0),n.chatBalanceTooLow?(p(),f("span",xo,c(t.$config.chatTokenSymbol),1)):k("",!0),g(" balance too low ")])):k("",!0)]),r("p",Bo,[n.allowanceTooLow?(p(),f("small",Wo,[r("em",null," You will need to do 2 transactions: Approve "+c(t.$config.chatTokenSymbol)+" token and then Get "+c(t.$config.lpTokenSymbol)+". ",1)])):k("",!0)])],64)}const Do=R(ao,[["render",So]]),Eo={name:"StakingDeposit",props:["loadingStakingData","minDepositWei","maxDepositWei","lpTokenAllowanceWei","lpTokenDecimals"],emits:["clearClaimAmount","subtractBalance","updateAllowance"],data(){return{allowanceWei:0,depositAmount:0,waitingApproval:!1,waitingDeposit:!1}},components:{AddLiquidity:Do},mounted(){this.allowanceWei=this.lpTokenAllowanceWei},computed:{allowanceTooLow(){return Number(this.allowanceWei)<Number(this.depositAmountWei)},depositAmountWei(){return!this.depositAmount||Number(this.depositAmount)===0?0:ot(String(this.depositAmount),this.lpTokenDecimals)},depositTooLow(){return!this.depositAmount||Number(this.depositAmount)===0?!0:Number(this.depositAmountWei)<Number(this.minDepositWei)},lpTokenBalance(){return Be(this.userStore.getLpTokenBalanceWei,this.lpTokenDecimals)},minDeposit(){return this.minDepositWei===null||this.minDepositWei===void 0||this.minDepositWei===""||this.minDepositWei==0?0:E(String(this.minDepositWei))}},methods:{async approveToken(){this.waitingApproval=!0;const t=new v(["function approve(address spender, uint256 amount) public returns (bool)"]),e=new C(this.$config.lpTokenAddress,t,this.signer);try{const o=await e.approve(this.$config.stakingContractAddress,this.depositAmountWei),i=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),s=await o.wait();s.status===1?(this.$emit("updateAllowance",this.depositAmountWei),this.toast.dismiss(i),this.toast("You have successfully approved tokens. Now proceed with staking!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.waitingApproval=!1,this.deposit()):(this.toast.dismiss(i),this.waitingApproval=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(s))}catch(o){console.error(o),this.waitingApproval=!1}},async deposit(){this.waitingDeposit=!0;const t=new v(["function deposit(uint256 _assets) external returns (uint256)"]),e=new C(this.$config.stakingContractAddress,t,this.signer);try{const o=await e.deposit(this.depositAmountWei),i=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),s=await o.wait();s.status===1?(this.$emit("updateAllowance",0),this.$emit("subtractBalance",this.depositAmountWei),this.$emit("clearClaimAmount"),this.toast.dismiss(i),this.toast("You have successfully staked tokens!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.waitingDeposit=!1):(this.toast.dismiss(i),this.waitingDeposit=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(s))}catch(o){console.error(o),this.toast(o.message,{type:"error"}),this.waitingDeposit=!1}},setMaxInputTokenAmount(){this.depositAmount=this.lpTokenBalance}},setup(){const{signer:t}=H(),e=X(),o=z();return{signer:t,toast:e,userStore:o}},watch:{lpTokenAllowanceWei(){this.allowanceWei=this.lpTokenAllowanceWei}}},Lo={class:"text-center"},$o={class:"input-group mt-5"},Mo={class:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:""},Po=["disabled"],Io=r("small",null,"MAX",-1),No=[Io],Fo={class:"text-muted"},Uo={class:"d-flex justify-content-center mt-4 mb-4"},Ro=["disabled"],Ho={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},jo=["disabled"],Oo={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},qo={class:"text-center"},Vo={key:0,class:"text-center"},Yo=r("em",null," You will need to do 2 transactions: Approve token and then Stake. ",-1),Xo=[Yo],zo=r("hr",{class:"mb-5"},null,-1);function Go(t,e,o,i,s,n){const a=nt,l=K("AddLiquidity");return p(),f("div",null,[r("p",Lo,[g(" Stake "+c(t.$config.lpTokenSymbol)+" to receive periodic staking rewards in "+c(t.$config.tokenSymbol)+" tokens (min deposit: "+c(n.minDeposit)+" "+c(t.$config.lpTokenSymbol)+"). ",1),W(a,{to:"/post/?id=kjzl6cwe1jw147gcaq8o17j668j1vol8v4z0vmv0ris1g5qyqvmrxbn0bpif8wh"},{default:ke(()=>[g(" Learn more here. ")]),_:1})]),r("div",$o,[r("button",Mo,c(t.$config.lpTokenSymbol),1),q(r("input",{"onUpdate:modelValue":e[0]||(e[0]=w=>s.depositAmount=w),type:"text",class:"form-control",placeholder:"0.00",disabled:s.waitingApproval||s.waitingDeposit},null,8,Po),[[V,s.depositAmount]]),r("button",{onClick:e[1]||(e[1]=(...w)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...w)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},No)]),r("small",Fo,[r("em",null,[g(" Balance: "),r("span",{class:"cursor-pointer hover-color",onClick:e[2]||(e[2]=(...w)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...w))},c(n.lpTokenBalance)+" "+c(t.$config.lpTokenSymbol),1)])]),r("div",Uo,[n.allowanceTooLow?(p(),f("button",{key:0,disabled:s.waitingApproval||n.depositTooLow,class:"btn btn-outline-primary",type:"button",onClick:e[3]||(e[3]=(...w)=>n.approveToken&&n.approveToken(...w))},[o.loadingStakingData||s.waitingApproval?(p(),f("span",Ho)):k("",!0),g(" Approve token ")],8,Ro)):k("",!0),n.allowanceTooLow?k("",!0):(p(),f("button",{key:1,disabled:s.waitingDeposit||n.depositTooLow,class:"btn btn-outline-primary",type:"button",onClick:e[4]||(e[4]=(...w)=>n.deposit&&n.deposit(...w))},[o.loadingStakingData||s.waitingDeposit?(p(),f("span",Oo)):k("",!0),g(" Stake ")],8,jo))]),r("p",qo,[n.allowanceTooLow?(p(),f("small",Vo,Xo)):k("",!0)]),zo,W(l)])}const Ko=R(Eo,[["render",Go]]),Qo={name:"RemoveLiquidity",data(){return{allowanceWei:0,debounce:null,depositAmount:0,nativeCoinAmount:0,nativeCoinAmountWei:null,timeout:800,waitingApproval:!1,waitingDeposit:!1}},components:{WaitingToast:D},mounted(){this.address&&this.fetchAllowance()},computed:{allowanceTooLow(){return Number(this.allowanceWei)<Number(this.depositAmountWei)},lpBalanceTooLow(){return Number(this.userStore.getLpTokenBalanceWei)<Number(this.depositAmountWei)},lpTokenBalance(){return E(this.userStore.getLpTokenBalanceWei)},depositAmountWei(){return!this.depositAmount||Number(this.depositAmount)===0?0:F(String(this.depositAmount))}},methods:{async approveToken(){this.waitingApproval=!0;const t=new v(["function approve(address spender, uint256 amount) public returns (bool)"]),e=new C(this.$config.lpTokenAddress,t,this.signer);try{const o=await e.approve(this.$config.swapRouterAddress,this.depositAmountWei),i=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),s=await o.wait();s.status===1?(this.allowanceWei=this.depositAmountWei,this.toast.dismiss(i),this.toast("You have successfully approved tokens. Now proceed with removing liquidity!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.waitingApproval=!1,this.deposit()):(this.toast.dismiss(i),this.waitingApproval=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(s))}catch(o){console.error(o),this.waitingApproval=!1}},async deposit(){this.waitingDeposit=!0;const t=new v(["function removeLiquidityETH(address token,uint liquidity,uint amountTokenMin,uint amountETHMin,address to,uint deadline) external returns (uint amountToken, uint amountETH)","function calculateETHAndTokensToReceive(address _lpToken, uint256 _lpAmount) external view returns (uint256 amountToken, uint256 amountETH)"]),e=new C(this.$config.swapRouterAddress,t,this.signer),o=await e.calculateETHAndTokensToReceive(this.$config.chatTokenAddress,F(String(this.depositAmount))),i=Math.floor(Date.now()/1e3)+60*this.siteStore.getSwapDeadline,s=Math.floor(Number(this.siteStore.getSlippage)*100),n=o[1].sub(o[1].div(1e4).mul(s)),a=o[0].sub(o[0].div(1e4).mul(s));console.log("ncAmountWeiMin",Number(n)),console.log("tokenAmountWeiMin",Number(a));try{const l=await e.removeLiquidityETH(this.$config.chatTokenAddress,this.depositAmountWei,a,n,this.address,i),w=this.toast({component:D,props:{text:`Removing liquidity from the ${this.$config.lpTokenSymbol}-${this.$config.tokenSymbol} pool...`}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),T=await l.wait();T.status===1?(this.toast.dismiss(w),this.toast(`You have successfully removed liquidity and received ${this.$config.lpTokenSymbol} & ${this.$config.tokenSymbol}!`,{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),this.allowanceWei.sub(this.depositAmountWei),this.userStore.setLpTokenBalanceWei(this.userStore.getLpTokenBalanceWei.sub(this.depositAmountWei))):(this.toast.dismiss(w),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+l.hash,"_blank").focus()}),console.log(T))}catch(l){console.error(l)}finally{this.waitingDeposit=!1}},async fetchAllowance(){const t=new v(["function allowance(address owner, address spender) public view returns (uint256)"]),e=new C(this.$config.lpTokenAddress,t,this.signer);this.allowanceWei=await e.allowance(this.address,this.$config.swapRouterAddress)},setMaxInputTokenAmount(){this.depositAmount=this.lpTokenBalance}},setup(){const{address:t,balance:e,signer:o}=H(),i=X(),s=z(),n=We();return{address:t,balance:e,signer:o,siteStore:n,toast:i,userStore:s}},watch:{address(t,e){t&&this.fetchAllowance()}}},Jo={class:"text-center"},Zo={class:"input-group mt-5"},en={class:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:""},tn=["disabled"],on=r("small",null,"MAX",-1),nn=[on],sn={class:"text-muted"},an={class:"d-flex justify-content-center mt-4 mb-4"},rn=["disabled"],ln={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},cn=["disabled"],un={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},dn={class:"text-center"},hn={key:0,class:"text-center"};function pn(t,e,o,i,s,n){return p(),f(we,null,[r("p",Jo," Remove liquidity and get back "+c(t.$config.chatTokenSymbol)+" & "+c(t.$config.tokenSymbol)+" tokens. ",1),r("div",Zo,[r("button",en,c(t.$config.lpTokenSymbol),1),q(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.depositAmount=a),type:"text",class:"form-control",placeholder:"0.00",disabled:s.waitingApproval||s.waitingDeposit},null,8,tn),[[V,s.depositAmount]]),r("button",{onClick:e[1]||(e[1]=(...a)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...a)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},nn)]),r("small",sn,[r("em",null,[g(" Balance: "),r("span",{class:"cursor-pointer hover-color",onClick:e[2]||(e[2]=(...a)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...a))},c(n.lpTokenBalance)+" "+c(t.$config.lpTokenSymbol),1)])]),r("div",an,[n.allowanceTooLow?(p(),f("button",{key:0,disabled:s.waitingApproval,class:"btn btn-outline-primary",type:"button",onClick:e[3]||(e[3]=(...a)=>n.approveToken&&n.approveToken(...a))},[s.waitingApproval?(p(),f("span",ln)):k("",!0),g(" Approve "+c(t.$config.lpTokenSymbol),1)],8,rn)):k("",!0),n.allowanceTooLow?k("",!0):(p(),f("button",{key:1,disabled:s.waitingDeposit,class:"btn btn-outline-primary",type:"button",onClick:e[4]||(e[4]=(...a)=>n.deposit&&n.deposit(...a))},[s.waitingDeposit?(p(),f("span",un)):k("",!0),g(" Remove liquidity ")],8,cn))]),r("p",dn,[n.allowanceTooLow?(p(),f("small",hn,[r("em",null," You will need to do 2 transactions: Approve "+c(t.$config.lpTokenSymbol)+" and then Remove liquidity. ",1)])):k("",!0)])],64)}const fn=R(Qo,[["render",pn]]),mn={name:"StakingWithdrawal",props:["loadingStakingData","lockedTimeLeft","minDepositWei","lpTokenDecimals"],emits:["clearClaimAmount"],data(){return{withdrawalAmount:0,waitingWithdrawal:!1}},components:{RemoveLiquidity:fn},computed:{isWithdrawalAmountNullOrEmpty(){return this.withdrawalAmount===null||this.withdrawalAmount===""||this.withdrawalAmount==0||Number(this.withdrawalAmount)===0},lockedSecondsHumanReadable(){const t=Number(this.lockedTimeLeft),e=Math.floor(t/60),o=Math.floor(e/60),i=Math.floor(o/24);return i>0?`${i+1} days`:o>0?`${o+1} hours`:e>0?`${e+1} minutes`:`${t+1} seconds`},minDeposit(){return Be(String(this.minDepositWei),Number(this.lpTokenDecimals))},stakeTokenBalance(){return E(this.userStore.getStakeTokenBalanceWei)},withdrawalAmountWei(){return!this.withdrawalAmount||Number(this.withdrawalAmount)===0?0:F(String(this.withdrawalAmount))},withdrawalIncorrect(){if(Number(this.lockedTimeLeft)>0)return{error:!0,message:"Your staked tokens are still locked for "+this.lockedSecondsHumanReadable+"."};if(Number(this.withdrawalAmountWei)>Number(this.userStore.getStakeTokenBalanceWei))return{error:!0,message:"The amount exceeds your staked token balance."};if(Number(this.withdrawalAmountWei)<Number(this.userStore.getStakeTokenBalanceWei)){const t=Number(this.userStore.getStakeTokenBalanceWei)-Number(this.withdrawalAmountWei);if(Number(t)<Number(this.minDepositWei))return{error:!0,message:"You cannot unstake this amount because the staked balance left will be less than the minimum required staking amount ("+String(Number(this.minDeposit))+" tokens)."}}return{error:!1,message:""}}},methods:{async withdrawal(){this.waitingWithdrawal=!0;const t=new v(["function withdraw(uint256 _assets) external returns (uint256)"]),e=new C(this.$config.stakingContractAddress,t,this.signer);try{const o=await e.withdraw(this.withdrawalAmountWei),i=this.toast({component:D,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),s=await o.wait();s.status===1?(this.userStore.setLpTokenBalanceWei(this.userStore.getLpTokenBalanceWei.add(this.withdrawalAmountWei)),this.userStore.setStakeTokenBalanceWei(this.userStore.getStakeTokenBalanceWei.sub(this.withdrawalAmountWei)),this.$emit("clearClaimAmount"),this.toast.dismiss(i),this.toast("You have successfully unstaked tokens!",{type:"success",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.waitingWithdrawal=!1):(this.toast.dismiss(i),this.waitingWithdrawal=!1,this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),console.log(s))}catch(o){console.error(o);try{let i=o.message.split("reason=")[1];i=i.split(", method=")[0],i=i.replace(/"/g,""),i=i.replace("execution reverted:","Error:"),i=i.replace("PeriodicEthRewards: ",""),console.log(i),this.toast(i,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waitingWithdrawal=!1}},setMaxInputTokenAmount(){this.withdrawalAmount=this.stakeTokenBalance}},setup(){const{address:t,signer:e}=H(),o=X(),i=z();return{address:t,signer:e,toast:o,userStore:i}}},kn={class:"text-center"},wn={class:"input-group mt-5"},bn={class:"btn btn-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:""},gn=["disabled"],yn=r("small",null,"MAX",-1),Tn=[yn],An={class:"text-muted"},_n={class:"d-flex justify-content-center mt-4 mb-4"},vn=["disabled"],Cn={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},xn={key:0,class:"alert alert-warning text-center text-dark",role:"alert"},Bn=r("hr",null,null,-1);function Wn(t,e,o,i,s,n){const a=K("RemoveLiquidity");return p(),f("div",null,[r("p",kn," Unstake "+c(t.$config.stakeTokenSymbol)+" to receive back "+c(t.$config.lpTokenSymbol)+" (it will also auto-claim any remaining rewards). ",1),r("div",wn,[r("button",bn,c(t.$config.stakeTokenSymbol),1),q(r("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.withdrawalAmount=l),type:"text",class:"form-control",placeholder:"0.00",disabled:s.waitingWithdrawal},null,8,gn),[[V,s.withdrawalAmount]]),r("button",{onClick:e[1]||(e[1]=(...l)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...l)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},Tn)]),r("small",An,[r("em",null,[g(" Balance: "),r("span",{class:"cursor-pointer hover-color",onClick:e[2]||(e[2]=(...l)=>n.setMaxInputTokenAmount&&n.setMaxInputTokenAmount(...l))},c(n.stakeTokenBalance)+" "+c(t.$config.stakeTokenSymbol),1)])]),r("div",_n,[r("button",{disabled:s.waitingWithdrawal||n.withdrawalIncorrect.error||n.isWithdrawalAmountNullOrEmpty,class:"btn btn-outline-primary",type:"button",onClick:e[3]||(e[3]=(...l)=>n.withdrawal&&n.withdrawal(...l))},[o.loadingStakingData||s.waitingWithdrawal?(p(),f("span",Cn)):k("",!0),g(" Unstake ")],8,vn)]),n.withdrawalIncorrect.error?(p(),f("div",xn,c(n.withdrawalIncorrect.message),1)):k("",!0),Bn,W(a)])}const Sn=R(mn,[["render",Wn]]),Dn={name:"Stake",data(){return{claimAmountWei:0,claimRewardsTotalWei:0,currentTab:"deposit",futureRewardsWei:0,lastClaimPeriod:0,loadingStakingData:!1,lockedTimeLeft:0,minDepositWei:0,maxDepositWei:0,periodLength:0,stakingContract:null,lpToken:null,lpTokenAllowanceWei:0,lpTokenDecimals:18}},components:{StakingClaim:io,StakingDeposit:Ko,StakingWithdrawal:Sn},mounted(){this.currentTab=localStorage.getItem("stakeCurrentTab"),this.currentTab||(this.currentTab="deposit"),this.address&&this.fetchStakingData()},methods:{changeCurrentTab(t){this.currentTab=t,localStorage.setItem("stakeCurrentTab",t)},clearClaimAmount(){this.claimAmountWei=0},async fetchClaimRewardsTotal(){this.claimRewardsTotalWei=await this.stakingContract.claimRewardsTotal()},async fetchFutureRewards(){this.futureRewardsWei=await this.stakingContract.futureRewards()},async fetchLockedTimeLeft(){this.lockedTimeLeft=await this.stakingContract.getLockedTimeLeft(this.address)},async fetchPreviewClaim(){this.claimAmountWei=await this.stakingContract.previewClaim(this.address)},async fetchStakingData(){this.loadingStakingData=!0;const t=new v(["function balanceOf(address _owner) public view returns (uint256)","function claimRewardsTotal() external view returns (uint256)","function futureRewards() external view returns (uint256)","function getLockedTimeLeft(address _user) external view returns (uint256)","function lastClaimPeriod() external view returns (uint256)","function minDeposit() external view returns (uint256)","function maxDeposit() external view returns (uint256)","function periodLength() external view returns (uint256)","function previewClaim(address _claimer) public view returns (uint256)"]);this.stakingContract=new C(this.$config.stakingContractAddress,t,this.signer);const e=new v(["function allowance(address _owner, address _spender) public view returns (uint256)","function balanceOf(address _owner) public view returns (uint256)","function decimals() public view returns (uint8)"]);this.lpToken=new C(this.$config.lpTokenAddress,e,this.signer),this.fetchPreviewClaim(),this.userStore.setLpTokenBalanceWei(await this.lpToken.balanceOf(this.address)),this.lpTokenAllowanceWei=await this.lpToken.allowance(this.address,this.$config.stakingContractAddress),this.userStore.setStakeTokenBalanceWei(await this.stakingContract.balanceOf(this.address)),this.fetchLockedTimeLeft(),this.minDepositWei=await this.stakingContract.minDeposit(),this.loadingStakingData=!1,this.lastClaimPeriod=await this.stakingContract.lastClaimPeriod(),this.periodLength=await this.stakingContract.periodLength(),this.maxDepositWei=await this.stakingContract.maxDeposit(),this.fetchClaimRewardsTotal(),this.fetchFutureRewards()},subtractBalance(t){this.userStore.setLpTokenBalanceWei(this.userStore.getLpTokenBalanceWei.sub(t)),this.userStore.setStakeTokenBalanceWei(this.userStore.getStakeTokenBalanceWei.add(t)),this.fetchLockedTimeLeft()},updateAllowance(t){this.lpTokenAllowanceWei=Number(t)},updateLastClaimPeriod(){this.lastClaimPeriod=Math.floor(Date.now()/1e3),this.fetchPreviewClaim(),this.fetchClaimRewardsTotal(),this.fetchFutureRewards()}},setup(){const{address:t,signer:e}=H(),o=z();return{address:t,signer:e,userStore:o}},watch:{address(){this.fetchStakingData()}}},En={class:"card border scroll-500"},Ln={class:"card-body"},$n={class:"fs-3"},Mn={class:"nav nav-tabs nav-fill"},Pn={class:"nav-item"},In={class:"nav-item"},Nn={class:"nav-item"},Fn={class:"tab-content mt-3"},Un={key:0},Rn={class:"d-flex justify-content-center mt-5"},Hn={class:"col-12 col-lg-8"},jn={key:1},On={class:"d-flex justify-content-center mt-5"},qn={class:"col-12 col-lg-8"},Vn={key:2},Yn={class:"d-flex justify-content-center mt-5"},Xn={class:"col-12 col-lg-8"};function zn(t,e,o,i,s,n){const a=Ze,l=et,w=Je,T=K("StakingDeposit"),_=K("StakingClaim"),I=K("StakingWithdrawal");return p(),f(we,null,[W(w,null,{default:ke(()=>[W(a,null,{default:ke(()=>[g("Stake and Earn | "+c(t.$config.projectMetadataTitle),1)]),_:1}),W(l,{property:"og:title",content:"Stake and Earn"}),W(l,{name:"description",content:"Stake and earn "+t.$config.tokenSymbol+" on "+t.$config.projectName+"!"},null,8,["content"]),W(l,{property:"og:image",content:t.$config.projectUrl+t.$config.previewImageStake},null,8,["content"]),W(l,{property:"og:description",content:"Stake and earn "+t.$config.tokenSymbol+" on "+t.$config.projectName+"!"},null,8,["content"]),W(l,{name:"twitter:image",content:t.$config.projectUrl+t.$config.previewImageStake},null,8,["content"]),W(l,{name:"twitter:description",content:"Stake and earn "+t.$config.tokenSymbol+" on "+t.$config.projectName+"!"},null,8,["content"])]),_:1}),r("div",En,[r("div",Ln,[r("p",$n,[r("i",{class:"bi bi-arrow-left-circle cursor-pointer",onClick:e[0]||(e[0]=m=>t.$router.back())})]),r("ul",Mn,[r("li",Pn,[r("button",{class:ne(["nav-link",s.currentTab==="deposit"?"active":""]),onClick:e[1]||(e[1]=m=>n.changeCurrentTab("deposit"))},"Stake",2)]),r("li",In,[r("button",{class:ne(["nav-link",s.currentTab==="claim"?"active":""]),onClick:e[2]||(e[2]=m=>n.changeCurrentTab("claim"))},"Claim",2)]),r("li",Nn,[r("button",{class:ne(["nav-link",s.currentTab==="withdraw"?"active":""]),onClick:e[3]||(e[3]=m=>n.changeCurrentTab("withdraw"))},"Unstake",2)])]),r("div",Fn,[s.currentTab==="deposit"?(p(),f("div",Un,[r("div",Rn,[r("div",Hn,[W(T,{loadingStakingData:s.loadingStakingData,minDepositWei:s.minDepositWei,maxDepositWei:s.maxDepositWei,lpTokenAllowanceWei:s.lpTokenAllowanceWei,lpTokenDecimals:s.lpTokenDecimals,onClearClaimAmount:n.clearClaimAmount,onSubtractBalance:n.subtractBalance,onUpdateAllowance:n.updateAllowance},null,8,["loadingStakingData","minDepositWei","maxDepositWei","lpTokenAllowanceWei","lpTokenDecimals","onClearClaimAmount","onSubtractBalance","onUpdateAllowance"])])])])):k("",!0),s.currentTab==="claim"?(p(),f("div",jn,[r("div",On,[r("div",qn,[W(_,{loadingStakingData:s.loadingStakingData,claimAmountWei:s.claimAmountWei,claimRewardsTotalWei:s.claimRewardsTotalWei,futureRewardsWei:s.futureRewardsWei,lastClaimPeriod:s.lastClaimPeriod,minDepositWei:s.minDepositWei,periodLength:s.periodLength,onClearClaimAmount:n.clearClaimAmount,onUpdateLastClaimPeriod:n.updateLastClaimPeriod},null,8,["loadingStakingData","claimAmountWei","claimRewardsTotalWei","futureRewardsWei","lastClaimPeriod","minDepositWei","periodLength","onClearClaimAmount","onUpdateLastClaimPeriod"])])])])):k("",!0),s.currentTab==="withdraw"?(p(),f("div",Vn,[r("div",Yn,[r("div",Xn,[W(I,{loadingStakingData:s.loadingStakingData,lockedTimeLeft:s.lockedTimeLeft,minDepositWei:s.minDepositWei,lpTokenDecimals:s.lpTokenDecimals,onClearClaimAmount:n.clearClaimAmount},null,8,["loadingStakingData","lockedTimeLeft","minDepositWei","lpTokenDecimals","onClearClaimAmount"])])])])):k("",!0)])])])],64)}const os=R(Dn,[["render",zn]]);export{os as default};
