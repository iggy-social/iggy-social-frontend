var Et=Object.defineProperty;var At=(a,r,s)=>r in a?Et(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s;var O=(a,r,s)=>(At(a,typeof r!="symbol"?r+"":r,s),s);import{aa as _e,ab as St,ac as bt,ad as kt}from"./entry.5bcb8238.js";import{I as Bt,C as Fe,f as Nt,a as ot}from"./ethers.a15e83dd.js";var ct={},be={},He={},ut={exports:{}};(function(a){(function(r){var s,g=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,T=Math.ceil,S=Math.floor,l="[BigNumber Error] ",w=l+"Number primitive has more than 15 significant digits: ",y=1e14,m=14,B=9007199254740991,x=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],P=1e7,I=1e9;function R(_){var E,N,D,A=b.prototype={constructor:b,toString:null,valueOf:null},K=new b(1),$=20,G=4,V=-7,Q=21,oe=-1e7,ne=1e7,le=!1,we=1,he=0,xe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},pe="0123456789abcdefghijklmnopqrstuvwxyz",Re=!0;function b(e,t){var n,h,o,u,p,i,c,d,f=this;if(!(f instanceof b))return new b(e,t);if(t==null){if(e&&e._isBigNumber===!0){f.s=e.s,!e.c||e.e>ne?f.c=f.e=null:e.e<oe?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((i=typeof e=="number")&&e*0==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,p=e;p>=10;p/=10,u++);u>ne?f.c=f.e=null:(f.e=u,f.c=[e]);return}d=String(e)}else{if(!g.test(d=String(e)))return D(f,d,i);f.s=d.charCodeAt(0)==45?(d=d.slice(1),-1):1}(u=d.indexOf("."))>-1&&(d=d.replace(".","")),(p=d.search(/e/i))>0?(u<0&&(u=p),u+=+d.slice(p+1),d=d.substring(0,p)):u<0&&(u=d.length)}else{if(q(t,2,pe.length,"Base"),t==10&&Re)return f=new b(e),ae(f,$+f.e+1,G);if(d=String(e),i=typeof e=="number"){if(e*0!=0)return D(f,d,i,t);if(f.s=1/e<0?(d=d.slice(1),-1):1,b.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(w+e)}else f.s=d.charCodeAt(0)===45?(d=d.slice(1),-1):1;for(n=pe.slice(0,t),u=p=0,c=d.length;p<c;p++)if(n.indexOf(h=d.charAt(p))<0){if(h=="."){if(p>u){u=c;continue}}else if(!o&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){o=!0,p=-1,u=0;continue}return D(f,String(e),i,t)}i=!1,d=N(d,t,10,f.s),(u=d.indexOf("."))>-1?d=d.replace(".",""):u=d.length}for(p=0;d.charCodeAt(p)===48;p++);for(c=d.length;d.charCodeAt(--c)===48;);if(d=d.slice(p,++c)){if(c-=p,i&&b.DEBUG&&c>15&&(e>B||e!==S(e)))throw Error(w+f.s*e);if((u=u-p-1)>ne)f.c=f.e=null;else if(u<oe)f.c=[f.e=0];else{if(f.e=u,f.c=[],p=(u+1)%m,u<0&&(p+=m),p<c){for(p&&f.c.push(+d.slice(0,p)),c-=m;p<c;)f.c.push(+d.slice(p,p+=m));p=m-(d=d.slice(p)).length}else p-=c;for(;p--;d+="0");f.c.push(+d)}}else f.c=[f.e=0]}b.clone=R,b.ROUND_UP=0,b.ROUND_DOWN=1,b.ROUND_CEIL=2,b.ROUND_FLOOR=3,b.ROUND_HALF_UP=4,b.ROUND_HALF_DOWN=5,b.ROUND_HALF_EVEN=6,b.ROUND_HALF_CEIL=7,b.ROUND_HALF_FLOOR=8,b.EUCLID=9,b.config=b.set=function(e){var t,n;if(e!=null)if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(n=e[t],q(n,0,I,t),$=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(n=e[t],q(n,0,8,t),G=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(n=e[t],n&&n.pop?(q(n[0],-I,0,t),q(n[1],0,I,t),V=n[0],Q=n[1]):(q(n,-I,I,t),V=-(Q=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if(n=e[t],n&&n.pop)q(n[0],-I,-1,t),q(n[1],1,I,t),oe=n[0],ne=n[1];else if(q(n,-I,I,t),n)oe=-(ne=n<0?-n:n);else throw Error(l+t+" cannot be zero: "+n);if(e.hasOwnProperty(t="CRYPTO"))if(n=e[t],n===!!n)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))le=n;else throw le=!n,Error(l+"crypto unavailable");else le=n;else throw Error(l+t+" not true or false: "+n);if(e.hasOwnProperty(t="MODULO_MODE")&&(n=e[t],q(n,0,9,t),we=n),e.hasOwnProperty(t="POW_PRECISION")&&(n=e[t],q(n,0,I,t),he=n),e.hasOwnProperty(t="FORMAT"))if(n=e[t],typeof n=="object")xe=n;else throw Error(l+t+" not an object: "+n);if(e.hasOwnProperty(t="ALPHABET"))if(n=e[t],typeof n=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(n))Re=n.slice(0,10)=="0123456789",pe=n;else throw Error(l+t+" invalid: "+n)}else throw Error(l+"Object expected: "+e);return{DECIMAL_PLACES:$,ROUNDING_MODE:G,EXPONENTIAL_AT:[V,Q],RANGE:[oe,ne],CRYPTO:le,MODULO_MODE:we,POW_PRECISION:he,FORMAT:xe,ALPHABET:pe}},b.isBigNumber=function(e){if(!e||e._isBigNumber!==!0)return!1;if(!b.DEBUG)return!0;var t,n,h=e.c,o=e.e,u=e.s;e:if({}.toString.call(h)=="[object Array]"){if((u===1||u===-1)&&o>=-I&&o<=I&&o===S(o)){if(h[0]===0){if(o===0&&h.length===1)return!0;break e}if(t=(o+1)%m,t<1&&(t+=m),String(h[0]).length==t){for(t=0;t<h.length;t++)if(n=h[t],n<0||n>=y||n!==S(n))break e;if(n!==0)return!0}}}else if(h===null&&o===null&&(u===null||u===1||u===-1))return!0;throw Error(l+"Invalid BigNumber: "+e)},b.maximum=b.max=function(){return Xe(arguments,A.lt)},b.minimum=b.min=function(){return Xe(arguments,A.gt)},b.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return S(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(n){var h,o,u,p,i,c=0,d=[],f=new b(K);if(n==null?n=$:q(n,0,I),p=T(n/m),le)if(crypto.getRandomValues){for(h=crypto.getRandomValues(new Uint32Array(p*=2));c<p;)i=h[c]*131072+(h[c+1]>>>11),i>=9e15?(o=crypto.getRandomValues(new Uint32Array(2)),h[c]=o[0],h[c+1]=o[1]):(d.push(i%1e14),c+=2);c=p/2}else if(crypto.randomBytes){for(h=crypto.randomBytes(p*=7);c<p;)i=(h[c]&31)*281474976710656+h[c+1]*1099511627776+h[c+2]*4294967296+h[c+3]*16777216+(h[c+4]<<16)+(h[c+5]<<8)+h[c+6],i>=9e15?crypto.randomBytes(7).copy(h,c):(d.push(i%1e14),c+=7);c=p/7}else throw le=!1,Error(l+"crypto unavailable");if(!le)for(;c<p;)i=t(),i<9e15&&(d[c++]=i%1e14);for(p=d[--c],n%=m,p&&n&&(i=x[m-n],d[c]=S(p/i)*i);d[c]===0;d.pop(),c--);if(c<0)d=[u=0];else{for(u=-1;d[0]===0;d.splice(0,1),u-=m);for(c=1,i=d[0];i>=10;i/=10,c++);c<m&&(u-=m-c)}return f.e=u,f.c=d,f}}(),b.sum=function(){for(var e=1,t=arguments,n=new b(t[0]);e<t.length;)n=n.plus(t[e++]);return n},N=function(){var e="0123456789";function t(n,h,o,u){for(var p,i=[0],c,d=0,f=n.length;d<f;){for(c=i.length;c--;i[c]*=h);for(i[0]+=u.indexOf(n.charAt(d++)),p=0;p<i.length;p++)i[p]>o-1&&(i[p+1]==null&&(i[p+1]=0),i[p+1]+=i[p]/o|0,i[p]%=o)}return i.reverse()}return function(n,h,o,u,p){var i,c,d,f,v,C,U,F,J=n.indexOf("."),Z=$,M=G;for(J>=0&&(f=he,he=0,n=n.replace(".",""),F=new b(h),C=F.pow(n.length-J),he=f,F.c=t(k(H(C.c),C.e,"0"),10,o,e),F.e=F.c.length),U=t(n,h,o,p?(i=pe,e):(i=e,pe)),d=f=U.length;U[--f]==0;U.pop());if(!U[0])return i.charAt(0);if(J<0?--d:(C.c=U,C.e=d,C.s=u,C=E(C,F,Z,M,o),U=C.c,v=C.r,d=C.e),c=d+Z+1,J=U[c],f=o/2,v=v||c<0||U[c+1]!=null,v=M<4?(J!=null||v)&&(M==0||M==(C.s<0?3:2)):J>f||J==f&&(M==4||v||M==6&&U[c-1]&1||M==(C.s<0?8:7)),c<1||!U[0])n=v?k(i.charAt(1),-Z,i.charAt(0)):i.charAt(0);else{if(U.length=c,v)for(--o;++U[--c]>o;)U[c]=0,c||(++d,U=[1].concat(U));for(f=U.length;!U[--f];);for(J=0,n="";J<=f;n+=i.charAt(U[J++]));n=k(n,d,i.charAt(0))}return n}}(),E=function(){function e(h,o,u){var p,i,c,d,f=0,v=h.length,C=o%P,U=o/P|0;for(h=h.slice();v--;)c=h[v]%P,d=h[v]/P|0,p=U*c+d*C,i=C*c+p%P*P+f,f=(i/u|0)+(p/P|0)+U*d,h[v]=i%u;return f&&(h=[f].concat(h)),h}function t(h,o,u,p){var i,c;if(u!=p)c=u>p?1:-1;else for(i=c=0;i<u;i++)if(h[i]!=o[i]){c=h[i]>o[i]?1:-1;break}return c}function n(h,o,u,p){for(var i=0;u--;)h[u]-=i,i=h[u]<o[u]?1:0,h[u]=i*p+h[u]-o[u];for(;!h[0]&&h.length>1;h.splice(0,1));}return function(h,o,u,p,i){var c,d,f,v,C,U,F,J,Z,M,W,Y,Se,De,Le,ce,ve,se=h.s==o.s?1:-1,ee=h.c,X=o.c;if(!ee||!ee[0]||!X||!X[0])return new b(!h.s||!o.s||(ee?X&&ee[0]==X[0]:!X)?NaN:ee&&ee[0]==0||!X?se*0:se/0);for(J=new b(se),Z=J.c=[],d=h.e-o.e,se=u+d+1,i||(i=y,d=L(h.e/m)-L(o.e/m),se=se/m|0),f=0;X[f]==(ee[f]||0);f++);if(X[f]>(ee[f]||0)&&d--,se<0)Z.push(1),v=!0;else{for(De=ee.length,ce=X.length,f=0,se+=2,C=S(i/(X[0]+1)),C>1&&(X=e(X,C,i),ee=e(ee,C,i),ce=X.length,De=ee.length),Se=ce,M=ee.slice(0,ce),W=M.length;W<ce;M[W++]=0);ve=X.slice(),ve=[0].concat(ve),Le=X[0],X[1]>=i/2&&Le++;do{if(C=0,c=t(X,M,ce,W),c<0){if(Y=M[0],ce!=W&&(Y=Y*i+(M[1]||0)),C=S(Y/Le),C>1)for(C>=i&&(C=i-1),U=e(X,C,i),F=U.length,W=M.length;t(U,M,F,W)==1;)C--,n(U,ce<F?ve:X,F,i),F=U.length,c=1;else C==0&&(c=C=1),U=X.slice(),F=U.length;if(F<W&&(U=[0].concat(U)),n(M,U,W,i),W=M.length,c==-1)for(;t(X,M,ce,W)<1;)C++,n(M,ce<W?ve:X,W,i),W=M.length}else c===0&&(C++,M=[0]);Z[f++]=C,M[0]?M[W++]=ee[Se]||0:(M=[ee[Se]],W=1)}while((Se++<De||M[0]!=null)&&se--);v=M[0]!=null,Z[0]||Z.splice(0,1)}if(i==y){for(f=1,se=Z[0];se>=10;se/=10,f++);ae(J,u+(J.e=f+d*m-1)+1,p,v)}else J.e=d,J.r=+v;return J}}();function Pe(e,t,n,h){var o,u,p,i,c;if(n==null?n=G:q(n,0,8),!e.c)return e.toString();if(o=e.c[0],p=e.e,t==null)c=H(e.c),c=h==1||h==2&&(p<=V||p>=Q)?re(c,p):k(c,p,"0");else if(e=ae(new b(e),t,n),u=e.e,c=H(e.c),i=c.length,h==1||h==2&&(t<=u||u<=V)){for(;i<t;c+="0",i++);c=re(c,u)}else if(t-=p,c=k(c,u,"0"),u+1>i){if(--t>0)for(c+=".";t--;c+="0");}else if(t+=u-i,t>0)for(u+1==i&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function Xe(e,t){for(var n,h=1,o=new b(e[0]);h<e.length;h++)if(n=new b(e[h]),n.s)t.call(o,n)&&(o=n);else{o=n;break}return o}function Ie(e,t,n){for(var h=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,h++);return(n=h+n*m-1)>ne?e.c=e.e=null:n<oe?e.c=[e.e=0]:(e.e=n,e.c=t),e}D=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(u,p,i,c){var d,f=i?p:p.replace(o,"");if(h.test(f))u.s=isNaN(f)?null:f<0?-1:1;else{if(!i&&(f=f.replace(e,function(v,C,U){return d=(U=U.toLowerCase())=="x"?16:U=="b"?2:8,!c||c==d?C:v}),c&&(d=c,f=f.replace(t,"$1").replace(n,"0.$1")),p!=f))return new b(f,d);if(b.DEBUG)throw Error(l+"Not a"+(c?" base "+c:"")+" number: "+p);u.s=null}u.c=u.e=null}}();function ae(e,t,n,h){var o,u,p,i,c,d,f,v=e.c,C=x;if(v){e:{for(o=1,i=v[0];i>=10;i/=10,o++);if(u=t-o,u<0)u+=m,p=t,c=v[d=0],f=c/C[o-p-1]%10|0;else if(d=T((u+1)/m),d>=v.length)if(h){for(;v.length<=d;v.push(0));c=f=0,o=1,u%=m,p=u-m+1}else break e;else{for(c=i=v[d],o=1;i>=10;i/=10,o++);u%=m,p=u-m+o,f=p<0?0:c/C[o-p-1]%10|0}if(h=h||t<0||v[d+1]!=null||(p<0?c:c%C[o-p-1]),h=n<4?(f||h)&&(n==0||n==(e.s<0?3:2)):f>5||f==5&&(n==4||h||n==6&&(u>0?p>0?c/C[o-p]:0:v[d-1])%10&1||n==(e.s<0?8:7)),t<1||!v[0])return v.length=0,h?(t-=e.e+1,v[0]=C[(m-t%m)%m],e.e=-t||0):v[0]=e.e=0,e;if(u==0?(v.length=d,i=1,d--):(v.length=d+1,i=C[m-u],v[d]=p>0?S(c/C[o-p]%C[p])*i:0),h)for(;;)if(d==0){for(u=1,p=v[0];p>=10;p/=10,u++);for(p=v[0]+=i,i=1;p>=10;p/=10,i++);u!=i&&(e.e++,v[0]==y&&(v[0]=1));break}else{if(v[d]+=i,v[d]!=y)break;v[d--]=0,i=1}for(u=v.length;v[--u]===0;v.pop());}e.e>ne?e.c=e.e=null:e.e<oe&&(e.c=[e.e=0])}return e}function fe(e){var t,n=e.e;return n===null?e.toString():(t=H(e.c),t=n<=V||n>=Q?re(t,n):k(t,n,"0"),e.s<0?"-"+t:t)}return A.absoluteValue=A.abs=function(){var e=new b(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return z(this,new b(e,t))},A.decimalPlaces=A.dp=function(e,t){var n,h,o,u=this;if(e!=null)return q(e,0,I),t==null?t=G:q(t,0,8),ae(new b(u),e+u.e+1,t);if(!(n=u.c))return null;if(h=((o=n.length-1)-L(this.e/m))*m,o=n[o])for(;o%10==0;o/=10,h--);return h<0&&(h=0),h},A.dividedBy=A.div=function(e,t){return E(this,new b(e,t),$,G)},A.dividedToIntegerBy=A.idiv=function(e,t){return E(this,new b(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var n,h,o,u,p,i,c,d,f,v=this;if(e=new b(e),e.c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+fe(e));if(t!=null&&(t=new b(t)),i=e.e>14,!v.c||!v.c[0]||v.c[0]==1&&!v.e&&v.c.length==1||!e.c||!e.c[0])return f=new b(Math.pow(+fe(v),i?e.s*(2-te(e)):+fe(e))),t?f.mod(t):f;if(c=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new b(NaN);h=!c&&v.isInteger()&&t.isInteger(),h&&(v=v.mod(t))}else{if(e.e>9&&(v.e>0||v.e<-1||(v.e==0?v.c[0]>1||i&&v.c[1]>=24e7:v.c[0]<8e13||i&&v.c[0]<=9999975e7)))return u=v.s<0&&te(e)?-0:0,v.e>-1&&(u=1/u),new b(c?1/u:u);he&&(u=T(he/m+2))}for(i?(n=new b(.5),c&&(e.s=1),d=te(e)):(o=Math.abs(+fe(e)),d=o%2),f=new b(K);;){if(d){if(f=f.times(v),!f.c)break;u?f.c.length>u&&(f.c.length=u):h&&(f=f.mod(t))}if(o){if(o=S(o/2),o===0)break;d=o%2}else if(e=e.times(n),ae(e,e.e+1,1),e.e>14)d=te(e);else{if(o=+fe(e),o===0)break;d=o%2}v=v.times(v),u?v.c&&v.c.length>u&&(v.c.length=u):h&&(v=v.mod(t))}return h?f:(c&&(f=K.div(f)),t?f.mod(t):u?ae(f,he,G,p):f)},A.integerValue=function(e){var t=new b(this);return e==null?e=G:q(e,0,8),ae(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return z(this,new b(e,t))===0},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return z(this,new b(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return(t=z(this,new b(e,t)))===1||t===0},A.isInteger=function(){return!!this.c&&L(this.e/m)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return z(this,new b(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return(t=z(this,new b(e,t)))===-1||t===0},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&this.c[0]==0},A.minus=function(e,t){var n,h,o,u,p=this,i=p.s;if(e=new b(e,t),t=e.s,!i||!t)return new b(NaN);if(i!=t)return e.s=-t,p.plus(e);var c=p.e/m,d=e.e/m,f=p.c,v=e.c;if(!c||!d){if(!f||!v)return f?(e.s=-t,e):new b(v?p:NaN);if(!f[0]||!v[0])return v[0]?(e.s=-t,e):new b(f[0]?p:G==3?-0:0)}if(c=L(c),d=L(d),f=f.slice(),i=c-d){for((u=i<0)?(i=-i,o=f):(d=c,o=v),o.reverse(),t=i;t--;o.push(0));o.reverse()}else for(h=(u=(i=f.length)<(t=v.length))?i:t,i=t=0;t<h;t++)if(f[t]!=v[t]){u=f[t]<v[t];break}if(u&&(o=f,f=v,v=o,e.s=-e.s),t=(h=v.length)-(n=f.length),t>0)for(;t--;f[n++]=0);for(t=y-1;h>i;){if(f[--h]<v[h]){for(n=h;n&&!f[--n];f[n]=t);--f[n],f[h]+=y}f[h]-=v[h]}for(;f[0]==0;f.splice(0,1),--d);return f[0]?Ie(e,f,d):(e.s=G==3?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var n,h,o=this;return e=new b(e,t),!o.c||!e.s||e.c&&!e.c[0]?new b(NaN):!e.c||o.c&&!o.c[0]?new b(o):(we==9?(h=e.s,e.s=1,n=E(o,e,0,3),e.s=h,n.s*=h):n=E(o,e,0,we),e=o.minus(n.times(e)),!e.c[0]&&we==1&&(e.s=o.s),e)},A.multipliedBy=A.times=function(e,t){var n,h,o,u,p,i,c,d,f,v,C,U,F,J,Z,M=this,W=M.c,Y=(e=new b(e,t)).c;if(!W||!Y||!W[0]||!Y[0])return!M.s||!e.s||W&&!W[0]&&!Y||Y&&!Y[0]&&!W?e.c=e.e=e.s=null:(e.s*=M.s,!W||!Y?e.c=e.e=null:(e.c=[0],e.e=0)),e;for(h=L(M.e/m)+L(e.e/m),e.s*=M.s,c=W.length,v=Y.length,c<v&&(F=W,W=Y,Y=F,o=c,c=v,v=o),o=c+v,F=[];o--;F.push(0));for(J=y,Z=P,o=v;--o>=0;){for(n=0,C=Y[o]%Z,U=Y[o]/Z|0,p=c,u=o+p;u>o;)d=W[--p]%Z,f=W[p]/Z|0,i=U*d+f*C,d=C*d+i%Z*Z+F[u]+n,n=(d/J|0)+(i/Z|0)+U*f,F[u--]=d%J;F[u]=n}return n?++h:F.splice(0,1),Ie(e,F,h)},A.negated=function(){var e=new b(this);return e.s=-e.s||null,e},A.plus=function(e,t){var n,h=this,o=h.s;if(e=new b(e,t),t=e.s,!o||!t)return new b(NaN);if(o!=t)return e.s=-t,h.minus(e);var u=h.e/m,p=e.e/m,i=h.c,c=e.c;if(!u||!p){if(!i||!c)return new b(o/0);if(!i[0]||!c[0])return c[0]?e:new b(i[0]?h:o*0)}if(u=L(u),p=L(p),i=i.slice(),o=u-p){for(o>0?(p=u,n=c):(o=-o,n=i),n.reverse();o--;n.push(0));n.reverse()}for(o=i.length,t=c.length,o-t<0&&(n=c,c=i,i=n,t=o),o=0;t;)o=(i[--t]=i[t]+c[t]+o)/y|0,i[t]=y===i[t]?0:i[t]%y;return o&&(i=[o].concat(i),++p),Ie(e,i,p)},A.precision=A.sd=function(e,t){var n,h,o,u=this;if(e!=null&&e!==!!e)return q(e,1,I),t==null?t=G:q(t,0,8),ae(new b(u),e,t);if(!(n=u.c))return null;if(o=n.length-1,h=o*m+1,o=n[o]){for(;o%10==0;o/=10,h--);for(o=n[0];o>=10;o/=10,h++);}return e&&u.e+1>h&&(h=u.e+1),h},A.shiftedBy=function(e){return q(e,-B,B),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,n,h,o,u=this,p=u.c,i=u.s,c=u.e,d=$+4,f=new b("0.5");if(i!==1||!p||!p[0])return new b(!i||i<0&&(!p||p[0])?NaN:p?u:1/0);if(i=Math.sqrt(+fe(u)),i==0||i==1/0?(t=H(p),(t.length+c)%2==0&&(t+="0"),i=Math.sqrt(+t),c=L((c+1)/2)-(c<0||c%2),i==1/0?t="5e"+c:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),n=new b(t)):n=new b(i+""),n.c[0]){for(c=n.e,i=c+d,i<3&&(i=0);;)if(o=n,n=f.times(o.plus(E(u,o,d,1))),H(o.c).slice(0,i)===(t=H(n.c)).slice(0,i))if(n.e<c&&--i,t=t.slice(i-3,i+1),t=="9999"||!h&&t=="4999"){if(!h&&(ae(o,o.e+$+2,0),o.times(o).eq(u))){n=o;break}d+=4,i+=4,h=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ae(n,n.e+$+2,1),e=!n.times(n).eq(u));break}}return ae(n,n.e+$+1,G,e)},A.toExponential=function(e,t){return e!=null&&(q(e,0,I),e++),Pe(this,e,t,1)},A.toFixed=function(e,t){return e!=null&&(q(e,0,I),e=e+this.e+1),Pe(this,e,t)},A.toFormat=function(e,t,n){var h,o=this;if(n==null)e!=null&&t&&typeof t=="object"?(n=t,t=null):e&&typeof e=="object"?(n=e,e=t=null):n=xe;else if(typeof n!="object")throw Error(l+"Argument not an object: "+n);if(h=o.toFixed(e,t),o.c){var u,p=h.split("."),i=+n.groupSize,c=+n.secondaryGroupSize,d=n.groupSeparator||"",f=p[0],v=p[1],C=o.s<0,U=C?f.slice(1):f,F=U.length;if(c&&(u=i,i=c,c=u,F-=u),i>0&&F>0){for(u=F%i||i,f=U.substr(0,u);u<F;u+=i)f+=d+U.substr(u,i);c>0&&(f+=d+U.slice(u)),C&&(f="-"+f)}h=v?f+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?v.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):v):f}return(n.prefix||"")+h+(n.suffix||"")},A.toFraction=function(e){var t,n,h,o,u,p,i,c,d,f,v,C,U=this,F=U.c;if(e!=null&&(i=new b(e),!i.isInteger()&&(i.c||i.s!==1)||i.lt(K)))throw Error(l+"Argument "+(i.isInteger()?"out of range: ":"not an integer: ")+fe(i));if(!F)return new b(U);for(t=new b(K),d=n=new b(K),h=c=new b(K),C=H(F),u=t.e=C.length-U.e-1,t.c[0]=x[(p=u%m)<0?m+p:p],e=!e||i.comparedTo(t)>0?u>0?t:d:i,p=ne,ne=1/0,i=new b(C),c.c[0]=0;f=E(i,t,0,1),o=n.plus(f.times(h)),o.comparedTo(e)!=1;)n=h,h=o,d=c.plus(f.times(o=d)),c=o,t=i.minus(f.times(o=t)),i=o;return o=E(e.minus(n),h,0,1),c=c.plus(o.times(d)),n=n.plus(o.times(h)),c.s=d.s=U.s,u=u*2,v=E(d,h,u,G).minus(U).abs().comparedTo(E(c,n,u,G).minus(U).abs())<1?[d,h]:[c,n],ne=p,v},A.toNumber=function(){return+fe(this)},A.toPrecision=function(e,t){return e!=null&&q(e,1,I),Pe(this,e,t,2)},A.toString=function(e){var t,n=this,h=n.s,o=n.e;return o===null?h?(t="Infinity",h<0&&(t="-"+t)):t="NaN":(e==null?t=o<=V||o>=Q?re(H(n.c),o):k(H(n.c),o,"0"):e===10&&Re?(n=ae(new b(n),$+o+1,G),t=k(H(n.c),n.e,"0")):(q(e,2,pe.length,"Base"),t=N(k(H(n.c),o,"0"),10,e,h,!0)),h<0&&n.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return fe(this)},A._isBigNumber=!0,_!=null&&b.set(_),b}function L(_){var E=_|0;return _>0||_===E?E:E-1}function H(_){for(var E,N,D=1,A=_.length,K=_[0]+"";D<A;){for(E=_[D++]+"",N=m-E.length;N--;E="0"+E);K+=E}for(A=K.length;K.charCodeAt(--A)===48;);return K.slice(0,A+1||1)}function z(_,E){var N,D,A=_.c,K=E.c,$=_.s,G=E.s,V=_.e,Q=E.e;if(!$||!G)return null;if(N=A&&!A[0],D=K&&!K[0],N||D)return N?D?0:-G:$;if($!=G)return $;if(N=$<0,D=V==Q,!A||!K)return D?0:!A^N?1:-1;if(!D)return V>Q^N?1:-1;for(G=(V=A.length)<(Q=K.length)?V:Q,$=0;$<G;$++)if(A[$]!=K[$])return A[$]>K[$]^N?1:-1;return V==Q?0:V>Q^N?1:-1}function q(_,E,N,D){if(_<E||_>N||_!==S(_))throw Error(l+(D||"Argument")+(typeof _=="number"?_<E||_>N?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_))}function te(_){var E=_.c.length-1;return L(_.e/m)==E&&_.c[E]%2!=0}function re(_,E){return(_.length>1?_.charAt(0)+"."+_.slice(1):_)+(E<0?"e":"e+")+E}function k(_,E,N){var D,A;if(E<0){for(A=N+".";++E;A+=N);_=A+_}else if(D=_.length,++E>D){for(A=N,E-=D;--E;A+=N);_+=A}else E<D&&(_=_.slice(0,E)+"."+_.slice(E));return _}s=R(),s.default=s.BigNumber=s,a.exports?a.exports=s:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=s)})(_e)})(ut);Object.defineProperty(He,"__esModule",{value:!0});const Ot=ut.exports;class Ct{constructor(){O(this,"BigNum");this.BigNum=(r,s)=>{let g=Ot.BigNumber.clone({DECIMAL_PLACES:s});return new g(r)}}winstonToAr(r,{formatted:s=!1,decimals:g=12,trim:T=!0}={}){let S=this.stringToBigNum(r,g).shiftedBy(-12);return s?S.toFormat(g):S.toFixed(g)}arToWinston(r,{formatted:s=!1}={}){let g=this.stringToBigNum(r).shiftedBy(12);return s?g.toFormat():g.toFixed(0)}compare(r,s){let g=this.stringToBigNum(r),T=this.stringToBigNum(s);return g.comparedTo(T)}isEqual(r,s){return this.compare(r,s)===0}isLessThan(r,s){let g=this.stringToBigNum(r),T=this.stringToBigNum(s);return g.isLessThan(T)}isGreaterThan(r,s){let g=this.stringToBigNum(r),T=this.stringToBigNum(s);return g.isGreaterThan(T)}add(r,s){let g=this.stringToBigNum(r);return this.stringToBigNum(s),g.plus(s).toFixed(0)}sub(r,s){let g=this.stringToBigNum(r);return this.stringToBigNum(s),g.minus(s).toFixed(0)}stringToBigNum(r,s=12){return this.BigNum(r,s)}}He.default=Ct;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});class Ut{constructor(r){O(this,"METHOD_GET","GET");O(this,"METHOD_POST","POST");O(this,"config");this.applyConfig(r)}applyConfig(r){this.config=this.mergeDefaults(r)}getConfig(){return this.config}mergeDefaults(r){const s=r.protocol||"http",g=r.port||(s==="https"?443:80);return{host:r.host||"127.0.0.1",protocol:s,port:g,timeout:r.timeout||2e4,logging:r.logging||!1,logger:r.logger||console.log,network:r.network}}async get(r,s){return await this.request(r,{...s,method:this.METHOD_GET})}async post(r,s,g){const T=new Headers(g?.headers||{});return T.get("content-type")?.includes("application/json")||T.append("content-type","application/json"),T.append("accept","application/json, text/plain, */*"),await this.request(r,{...g,method:this.METHOD_POST,body:typeof s!="string"?JSON.stringify(s):s,headers:T})}async request(r,s){const g=new Headers(s?.headers||{}),T=`${this.config.protocol}://${this.config.host}:${this.config.port}`,S=s?.responseType;delete s?.responseType,r.startsWith("/")&&(r=r.slice(1)),this.config.network&&g.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${T}/${r}`);let l=await fetch(`${T}/${r}`,{...s||{},headers:g});this.config.logging&&this.config.logger(`Response:   ${l.url} - ${l.status}`);const y=l.headers.get("content-type")?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],m=l,B=async()=>{if(y)try{m.data=new TextDecoder(y).decode(await l.arrayBuffer())}catch{m.data=await l.text()}else m.data=await l.text()};if(S==="arraybuffer")m.data=await l.arrayBuffer();else if(S==="text")await B();else if(S==="webstream")m.data=xt(l.body);else try{let x=await l.clone().json();typeof x!="object"?await B():m.data=await l.json(),x=null}catch{await B()}return m}}qe.default=Ut;const xt=a=>{const r=a;return typeof r[Symbol.asyncIterator]>"u"?(r[Symbol.asyncIterator]=Rt(a),r):a},Rt=function(a){return async function*(){const s=a.getReader();try{for(;;){const{done:g,value:T}=await s.read();if(g)return;yield T}}finally{s.releaseLock()}}};var Ke={},j={},Ce={};Ce.byteLength=Dt;Ce.toByteArray=Mt;Ce.fromByteArray=Ht;var ue=[],ie=[],Pt=typeof Uint8Array<"u"?Uint8Array:Array,Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ye=0,It=Me.length;ye<It;++ye)ue[ye]=Me[ye],ie[Me.charCodeAt(ye)]=ye;ie["-".charCodeAt(0)]=62;ie["_".charCodeAt(0)]=63;function lt(a){var r=a.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=a.indexOf("=");s===-1&&(s=r);var g=s===r?0:4-s%4;return[s,g]}function Dt(a){var r=lt(a),s=r[0],g=r[1];return(s+g)*3/4-g}function Lt(a,r,s){return(r+s)*3/4-s}function Mt(a){var r,s=lt(a),g=s[0],T=s[1],S=new Pt(Lt(a,g,T)),l=0,w=T>0?g-4:g,y;for(y=0;y<w;y+=4)r=ie[a.charCodeAt(y)]<<18|ie[a.charCodeAt(y+1)]<<12|ie[a.charCodeAt(y+2)]<<6|ie[a.charCodeAt(y+3)],S[l++]=r>>16&255,S[l++]=r>>8&255,S[l++]=r&255;return T===2&&(r=ie[a.charCodeAt(y)]<<2|ie[a.charCodeAt(y+1)]>>4,S[l++]=r&255),T===1&&(r=ie[a.charCodeAt(y)]<<10|ie[a.charCodeAt(y+1)]<<4|ie[a.charCodeAt(y+2)]>>2,S[l++]=r>>8&255,S[l++]=r&255),S}function $t(a){return ue[a>>18&63]+ue[a>>12&63]+ue[a>>6&63]+ue[a&63]}function Ft(a,r,s){for(var g,T=[],S=r;S<s;S+=3)g=(a[S]<<16&16711680)+(a[S+1]<<8&65280)+(a[S+2]&255),T.push($t(g));return T.join("")}function Ht(a){for(var r,s=a.length,g=s%3,T=[],S=16383,l=0,w=s-g;l<w;l+=S)T.push(Ft(a,l,l+S>w?w:l+S));return g===1?(r=a[s-1],T.push(ue[r>>2]+ue[r<<4&63]+"==")):g===2&&(r=(a[s-2]<<8)+a[s-1],T.push(ue[r>>10]+ue[r>>4&63]+ue[r<<2&63]+"=")),T.join("")}Object.defineProperty(j,"__esModule",{value:!0});j.b64UrlDecode=j.b64UrlEncode=j.bufferTob64Url=j.bufferTob64=j.b64UrlToBuffer=j.stringToB64Url=j.stringToBuffer=j.bufferToString=j.b64UrlToString=j.concatBuffers=void 0;const ft=Ce;function qt(a){let r=0;for(let T=0;T<a.length;T++)r+=a[T].byteLength;let s=new Uint8Array(r),g=0;s.set(new Uint8Array(a[0]),g),g+=a[0].byteLength;for(let T=1;T<a.length;T++)s.set(new Uint8Array(a[T]),g),g+=a[T].byteLength;return s}j.concatBuffers=qt;function Kt(a){let r=gt(a);return ht(r)}j.b64UrlToString=Kt;function ht(a){return new TextDecoder("utf-8",{fatal:!0}).decode(a)}j.bufferToString=ht;function dt(a){return new TextEncoder().encode(a)}j.stringToBuffer=dt;function jt(a){return wt(dt(a))}j.stringToB64Url=jt;function gt(a){return new Uint8Array(ft.toByteArray(mt(a)))}j.b64UrlToBuffer=gt;function pt(a){return ft.fromByteArray(new Uint8Array(a))}j.bufferTob64=pt;function wt(a){return yt(pt(a))}j.bufferTob64Url=wt;function yt(a){try{return a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}catch(r){throw new Error("Failed to encode string",{cause:r})}}j.b64UrlEncode=yt;function mt(a){try{a=a.replace(/\-/g,"+").replace(/\_/g,"/");let r;return a.length%4==0?r=0:r=4-a.length%4,a.concat("=".repeat(r))}catch(r){throw new Error("Failed to decode string",{cause:r})}}j.b64UrlDecode=mt;Object.defineProperty(Ke,"__esModule",{value:!0});const de=j;class Gt{constructor(){O(this,"keyLength",4096);O(this,"publicExponent",65537);O(this,"hashAlgorithm","sha256");O(this,"driver");if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let r=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),s=await this.driver.exportKey("jwk",r.privateKey);return{kty:s.kty,e:s.e,n:s.n,d:s.d,p:s.p,q:s.q,dp:s.dp,dq:s.dq,qi:s.qi}}async sign(r,s,{saltLength:g}={}){let T=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(r),s);return new Uint8Array(T)}async hash(r,s="SHA-256"){let g=await this.driver.digest(s,r);return new Uint8Array(g)}async verify(r,s,g){const T={kty:"RSA",e:"AQAB",n:r},S=await this.jwkToPublicCryptoKey(T),l=await this.driver.digest("SHA-256",s),w=await this.driver.verify({name:"RSA-PSS",saltLength:0},S,g,s),y=await this.driver.verify({name:"RSA-PSS",saltLength:32},S,g,s),m=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((S.algorithm.modulusLength-1)/8)-l.byteLength-2},S,g,s);return w||y||m}async jwkToCryptoKey(r){return this.driver.importKey("jwk",r,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(r){return this.driver.importKey("jwk",r,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const r=crypto?.subtle;return r===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(g=>typeof r[g]=="function")}async encrypt(r,s,g){const T=await this.driver.importKey("raw",typeof s=="string"?de.stringToBuffer(s):s,{name:"PBKDF2",length:32},!1,["deriveKey"]),S=await this.driver.deriveKey({name:"PBKDF2",salt:g?de.stringToBuffer(g):de.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},T,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),l=new Uint8Array(16);crypto.getRandomValues(l);const w=await this.driver.encrypt({name:"AES-CBC",iv:l},S,r);return de.concatBuffers([l,w])}async decrypt(r,s,g){const T=await this.driver.importKey("raw",typeof s=="string"?de.stringToBuffer(s):s,{name:"PBKDF2",length:32},!1,["deriveKey"]),S=await this.driver.deriveKey({name:"PBKDF2",salt:g?de.stringToBuffer(g):de.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},T,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),l=r.slice(0,16),w=await this.driver.decrypt({name:"AES-CBC",iv:l},S,r.slice(16));return de.concatBuffers([w])}}Ke.default=Gt;var je={};Object.defineProperty(je,"__esModule",{value:!0});class Wt{constructor(r){O(this,"api");this.api=r}getInfo(){return this.api.get("info").then(r=>r.data)}getPeers(){return this.api.get("peers").then(r=>r.data)}}je.default=Wt;var ke={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.getError=void 0;class zt extends Error{constructor(s,g={}){var r=(...args)=>{super(...args);O(this,"type");O(this,"response")};g.message?r(g.message):r(),this.type=s,this.response=g.response}getType(){return this.type}}ge.default=zt;function Jt(a){let r=a.data;if(typeof a.data=="string")try{r=JSON.parse(a.data)}catch{}if(a.data instanceof ArrayBuffer||a.data instanceof Uint8Array)try{r=JSON.parse(r.toString())}catch{}return r?r.error||r:a.statusText||"unknown"}ge.getError=Jt;var me={},Be={},Ze;function Xt(){if(Ze)return Be;Ze=1,Object.defineProperty(Be,"__esModule",{value:!0});const a=Ne();async function r(g){if(Array.isArray(g)){const l=a.default.utils.concatBuffers([a.default.utils.stringToBuffer("list"),a.default.utils.stringToBuffer(g.length.toString())]);return await s(g,await a.default.crypto.hash(l,"SHA-384"))}const T=a.default.utils.concatBuffers([a.default.utils.stringToBuffer("blob"),a.default.utils.stringToBuffer(g.byteLength.toString())]),S=a.default.utils.concatBuffers([await a.default.crypto.hash(T,"SHA-384"),await a.default.crypto.hash(g,"SHA-384")]);return await a.default.crypto.hash(S,"SHA-384")}Be.default=r;async function s(g,T){if(g.length<1)return T;const S=a.default.utils.concatBuffers([T,await r(g[0])]),l=await a.default.crypto.hash(S,"SHA-384");return await s(g.slice(1),l)}return Be}var $e={},Ve;function vt(){return Ve||(Ve=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.debug=a.validatePath=a.arrayCompare=a.bufferToInt=a.intToBuffer=a.arrayFlatten=a.generateProofs=a.buildLayers=a.generateTransactionChunks=a.generateTree=a.computeRootHash=a.generateLeaves=a.chunkData=a.MIN_CHUNK_SIZE=a.MAX_CHUNK_SIZE=void 0;const r=Ne(),s=j;a.MAX_CHUNK_SIZE=256*1024,a.MIN_CHUNK_SIZE=32*1024;const g=32,T=32;async function S(k){let _=[],E=k,N=0;for(;E.byteLength>=a.MAX_CHUNK_SIZE;){let D=a.MAX_CHUNK_SIZE,A=E.byteLength-a.MAX_CHUNK_SIZE;A>0&&A<a.MIN_CHUNK_SIZE&&(D=Math.ceil(E.byteLength/2));const K=E.slice(0,D),$=await r.default.crypto.hash(K);N+=K.byteLength,_.push({dataHash:$,minByteRange:N-K.byteLength,maxByteRange:N}),E=E.slice(D)}return _.push({dataHash:await r.default.crypto.hash(E),minByteRange:N,maxByteRange:N+E.byteLength}),_}a.chunkData=S;async function l(k){return Promise.all(k.map(async({dataHash:_,minByteRange:E,maxByteRange:N})=>({type:"leaf",id:await L(await Promise.all([L(_),L(H(N))])),dataHash:_,minByteRange:E,maxByteRange:N})))}a.generateLeaves=l;async function w(k){return(await y(k)).id}a.computeRootHash=w;async function y(k){return await B(await l(await S(k)))}a.generateTree=y;async function m(k){const _=await S(k),E=await l(_),N=await B(E),D=await x(N),A=_.slice(-1)[0];return A.maxByteRange-A.minByteRange===0&&(_.splice(_.length-1,1),D.splice(D.length-1,1)),{data_root:N.id,chunks:_,proofs:D}}a.generateTransactionChunks=m;async function B(k,_=0){if(k.length<2)return k[0];const E=[];for(let N=0;N<k.length;N+=2)E.push(await R(k[N],k[N+1]));return B(E,_+1)}a.buildLayers=B;function x(k){const _=P(k);return Array.isArray(_)?I(_):[_]}a.generateProofs=x;function P(k,_=new Uint8Array,E=0){if(k.type=="leaf")return{offset:k.maxByteRange-1,proof:(0,s.concatBuffers)([_,k.dataHash,H(k.maxByteRange)])};if(k.type=="branch"){const N=(0,s.concatBuffers)([_,k.leftChild.id,k.rightChild.id,H(k.byteRange)]);return[P(k.leftChild,N,E+1),P(k.rightChild,N,E+1)]}throw new Error("Unexpected node type")}function I(k){const _=[];return k.forEach(E=>{Array.isArray(E)?_.push(...I(E)):_.push(E)}),_}a.arrayFlatten=I;async function R(k,_){return _?{type:"branch",id:await L([await L(k.id),await L(_.id),await L(H(k.maxByteRange))]),byteRange:k.maxByteRange,maxByteRange:_.maxByteRange,leftChild:k,rightChild:_}:k}async function L(k){return Array.isArray(k)&&(k=r.default.utils.concatBuffers(k)),new Uint8Array(await r.default.crypto.hash(k))}function H(k){const _=new Uint8Array(g);for(var E=_.length-1;E>=0;E--){var N=k%256;_[E]=N,k=(k-N)/256}return _}a.intToBuffer=H;function z(k){let _=0;for(var E=0;E<k.length;E++)_*=256,_+=k[E];return _}a.bufferToInt=z;const q=(k,_)=>k.every((E,N)=>_[N]===E);a.arrayCompare=q;async function te(k,_,E,N,D){if(N<=0)return!1;if(_>=N)return te(k,0,N-1,N,D);if(_<0)return te(k,0,0,N,D);if(D.length==T+g){const oe=D.slice(0,T),ne=D.slice(oe.length,oe.length+g),le=await L([await L(oe),await L(ne)]);return(0,a.arrayCompare)(k,le)?{offset:N-1,leftBound:E,rightBound:N,chunkSize:N-E}:!1}const A=D.slice(0,T),K=D.slice(A.length,A.length+T),$=D.slice(A.length+K.length,A.length+K.length+g),G=z($),V=D.slice(A.length+K.length+$.length),Q=await L([await L(A),await L(K),await L($)]);return(0,a.arrayCompare)(k,Q)?_<G?await te(A,_,E,Math.min(N,G),V):await te(K,_,Math.max(E,G),N,V):!1}a.validatePath=te;async function re(k,_=""){if(k.byteLength<1)return _;const E=k.slice(0,T),N=k.slice(E.length,E.length+T),D=k.slice(E.length+N.length,E.length+N.length+g),A=z(D),K=k.slice(E.length+N.length+D.length),$=await L([await L(E),await L(N),await L(D)]),G=`${_}
${JSON.stringify(Buffer.from(E))},${JSON.stringify(Buffer.from(N))},${A} => ${JSON.stringify($)}`;return re(K,G)}a.debug=re}($e)),$e}var Ye;function Ge(){if(Ye)return me;Ye=1,Object.defineProperty(me,"__esModule",{value:!0}),me.Tag=void 0;const a=j,r=Xt(),s=vt();class g{get(w,y){if(!Object.getOwnPropertyNames(this).includes(w))throw new Error(`Field "${w}" is not a property of the Arweave Transaction class.`);if(this[w]instanceof Uint8Array)return y&&y.decode&&y.string?a.bufferToString(this[w]):y&&y.decode&&!y.string?this[w]:a.bufferTob64Url(this[w]);if(this[w]instanceof Array){if(y?.decode!==void 0||y?.string!==void 0)throw w==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[w]}return y&&y.decode==!0?y&&y.string?a.b64UrlToString(this[w]):a.b64UrlToBuffer(this[w]):this[w]}}class T extends g{constructor(y,m,B=!1){super();O(this,"name");O(this,"value");this.name=y,this.value=m}}me.Tag=T;class S extends g{constructor(y={}){super();O(this,"format",2);O(this,"id","");O(this,"last_tx","");O(this,"owner","");O(this,"tags",[]);O(this,"target","");O(this,"quantity","0");O(this,"data_size","0");O(this,"data",new Uint8Array);O(this,"data_root","");O(this,"reward","0");O(this,"signature","");O(this,"chunks");Object.assign(this,y),typeof this.data=="string"&&(this.data=a.b64UrlToBuffer(this.data)),y.tags&&(this.tags=y.tags.map(m=>new T(m.name,m.value)))}addTag(y,m){this.tags.push(new T(a.stringToB64Url(y),a.stringToB64Url(m)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:a.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(y){this.owner=y}setSignature({id:y,owner:m,reward:B,tags:x,signature:P}){this.id=y,this.owner=m,B&&(this.reward=B),x&&(this.tags=x),this.signature=P}async prepareChunks(y){!this.chunks&&y.byteLength>0&&(this.chunks=await(0,s.generateTransactionChunks)(y),this.data_root=a.bufferTob64Url(this.chunks.data_root)),!this.chunks&&y.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(y,m){if(!this.chunks)throw new Error("Chunks have not been prepared");const B=this.chunks.proofs[y],x=this.chunks.chunks[y];return{data_root:this.data_root,data_size:this.data_size,data_path:a.bufferTob64Url(B.proof),offset:B.offset.toString(),chunk:a.bufferTob64Url(m.slice(x.minByteRange,x.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let y=this.tags.reduce((B,x)=>a.concatBuffers([B,x.get("name",{decode:!0,string:!1}),x.get("value",{decode:!0,string:!1})]),new Uint8Array);return a.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),a.stringToBuffer(this.quantity),a.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),y]);case 2:this.data_root||await this.prepareChunks(this.data);const m=this.tags.map(B=>[B.get("name",{decode:!0,string:!1}),B.get("value",{decode:!0,string:!1})]);return await(0,r.default)([a.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),a.stringToBuffer(this.quantity),a.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),m,a.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}return me.default=S,me}var Te={},Qe;function Zt(){if(Qe)return Te;Qe=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.TransactionUploader=void 0;const a=Ge(),r=j,s=ge,g=vt(),T=1,S=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],l=1e3*40;class w{constructor(m,B){O(this,"api");O(this,"chunkIndex",0);O(this,"txPosted",!1);O(this,"transaction");O(this,"lastRequestTimeEnd",0);O(this,"totalErrors",0);O(this,"data");O(this,"lastResponseStatus",0);O(this,"lastResponseError","");if(this.api=m,!B.id)throw new Error("Transaction is not signed");if(!B.chunks)throw new Error("Transaction chunks not prepared");this.data=B.data,this.transaction=new a.default(Object.assign({},B,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(m){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let B=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+l-Date.now(),l);if(B>0&&(B=B-B*Math.random()*.3,await new Promise(R=>setTimeout(R,B))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}m&&(this.chunkIndex=m);const x=this.transaction.getChunk(m||this.chunkIndex,this.data);if(!await(0,g.validatePath)(this.transaction.chunks.data_root,parseInt(x.offset),0,parseInt(x.data_size),r.b64UrlToBuffer(x.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const I=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(R=>(console.error(R.message),{status:-1,data:{error:R.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=I.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,s.getError)(I),S.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(m,B,x){if(!B||typeof B.chunkIndex!="number"||typeof B.transaction!="object")throw new Error("Serialized object does not match expected format.");var P=new a.default(B.transaction);P.chunks||await P.prepareChunks(x);const I=new w(m,P);if(I.chunkIndex=B.chunkIndex,I.lastRequestTimeEnd=B.lastRequestTimeEnd,I.lastResponseError=B.lastResponseError,I.lastResponseStatus=B.lastResponseStatus,I.txPosted=B.txPosted,I.data=x,I.transaction.data_root!==B.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return I}static async fromTransactionId(m,B){const x=await m.get(`tx/${B}`);if(x.status!==200)throw new Error(`Tx ${B} not found: ${x.status}`);const P=x.data;return P.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:P}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=T){this.transaction.data=this.data;const x=await this.api.post("tx",this.transaction).catch(P=>(console.error(P),{status:-1,data:{error:P.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=x.status,this.transaction.data=new Uint8Array(0),x.status>=200&&x.status<300){this.txPosted=!0,this.chunkIndex=T;return}throw this.lastResponseError=(0,s.getError)(x),new Error(`Unable to upload transaction: ${x.status}, ${this.lastResponseError}`)}const B=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=B.status,!(B.status>=200&&B.status<300))throw this.lastResponseError=(0,s.getError)(B),new Error(`Unable to upload transaction: ${B.status}, ${this.lastResponseError}`);this.txPosted=!0}}return Te.TransactionUploader=w,Te}var et;function Vt(){if(et)return ke;et=1,Object.defineProperty(ke,"__esModule",{value:!0});const a=ge,r=Ge(),s=j,g=Zt();class T{constructor(l,w,y){O(this,"api");O(this,"crypto");O(this,"chunks");this.api=l,this.crypto=w,this.chunks=y}async getTransactionAnchor(){const l=await this.api.get("tx_anchor");if(!l.data.match(/^[a-z0-9_-]{43,}/i)||!l.ok)throw new Error(`Could not getTransactionAnchor. Received: ${l.data}. Status: ${l.status}, ${l.statusText}`);return l.data}async getPrice(l,w){let y=w?`price/${l}/${w}`:`price/${l}`;const m=await this.api.get(y);if(!/^\d+$/.test(m.data)||!m.ok)throw new Error(`Could not getPrice. Received: ${m.data}. Status: ${m.status}, ${m.statusText}`);return m.data}async get(l){const w=await this.api.get(`tx/${l}`);if(w.status==200){const y=parseInt(w.data.data_size);if(w.data.format>=2&&y>0&&y<=1024*1024*12){const m=await this.getData(l);return new r.default({...w.data,data:m})}return new r.default({...w.data,format:w.data.format||1})}throw w.status==404?new a.default("TX_NOT_FOUND"):w.status==410?new a.default("TX_FAILED"):new a.default("TX_INVALID")}fromRaw(l){return new r.default(l)}async search(l,w){return this.api.post("arql",{op:"equals",expr1:l,expr2:w}).then(y=>y.data?y.data:[])}getStatus(l){return this.api.get(`tx/${l}/status`).then(w=>w.status==200?{status:200,confirmed:w.data}:{status:w.status,confirmed:null})}async getData(l,w){let y;try{y=await this.chunks.downloadChunkedData(l)}catch(m){console.error(`Error while trying to download chunked data for ${l}`),console.error(m)}if(!y){console.warn(`Falling back to gateway cache for ${l}`);try{const{data:m,ok:B,status:x,statusText:P}=await this.api.get(`/${l}`,{responseType:"arraybuffer"});if(!B)throw new Error("Bad http status code",{cause:{status:x,statusText:P}});y=m}catch(m){console.error(`Error while trying to download contiguous data from gateway cache for ${l}`),console.error(m)}}if(!y)throw new Error(`${l} data was not found!`);return w&&w.decode&&!w.string?y:w&&w.decode&&w.string?s.bufferToString(y):s.bufferTob64Url(y)}async sign(l,w,y){const B=typeof w=="object"&&(P=>{let I=!0;return["n","e","d","p","q","dp","dq","qi"].map(R=>!(R in P)&&(I=!1)),I})(w),x=typeof arweaveWallet=="object";if(!B&&!x)throw new Error("No valid JWK or external wallet found to sign transaction.");if(B){l.setOwner(w.n);let P=await l.getSignatureData(),I=await this.crypto.sign(w,P,y),R=await this.crypto.hash(I);l.setSignature({id:s.bufferTob64Url(R),owner:w.n,signature:s.bufferTob64Url(I)})}else if(x){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const P=await arweaveWallet.sign(l,y);l.setSignature({id:P.id,owner:P.owner,reward:P.reward,tags:P.tags,signature:P.signature})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(l){const w=await l.getSignatureData(),y=l.get("signature",{decode:!0,string:!1}),m=s.bufferTob64Url(await this.crypto.hash(y));if(l.id!==m)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(l.owner,w,y)}async post(l){if(typeof l=="string"?l=new r.default(JSON.parse(l)):typeof l.readInt32BE=="function"?l=new r.default(JSON.parse(l.toString())):typeof l=="object"&&!(l instanceof r.default)&&(l=new r.default(l)),!(l instanceof r.default))throw new Error("Must be Transaction object");l.chunks||await l.prepareChunks(l.data);const w=await this.getUploader(l,l.data);try{for(;!w.isComplete;)await w.uploadChunk()}catch(y){if(w.lastResponseStatus>0)return{status:w.lastResponseStatus,statusText:w.lastResponseError,data:{error:w.lastResponseError}};throw y}return{status:200,statusText:"OK",data:{}}}async getUploader(l,w){let y;if(w instanceof ArrayBuffer&&(w=new Uint8Array(w)),l instanceof r.default){if(w||(w=l.data),!(w instanceof Uint8Array))throw new Error("Data format is invalid");l.chunks||await l.prepareChunks(w),y=new g.TransactionUploader(this.api,l),(!y.data||y.data.length===0)&&(y.data=w)}else{if(typeof l=="string"&&(l=await g.TransactionUploader.fromTransactionId(this.api,l)),!w||!(w instanceof Uint8Array))throw new Error("Must provide data when resuming upload");y=await g.TransactionUploader.fromSerialized(this.api,l,w)}return y}async*upload(l,w){const y=await this.getUploader(l,w);for(;!y.isComplete;)await y.uploadChunk(),yield y;return y}}return ke.default=T,ke}var We={};Object.defineProperty(We,"__esModule",{value:!0});const tt=j;class Yt{constructor(r,s){O(this,"api");O(this,"crypto");this.api=r,this.crypto=s}getBalance(r){return this.api.get(`wallet/${r}/balance`).then(s=>s.data)}getLastTransactionID(r){return this.api.get(`wallet/${r}/last_tx`).then(s=>s.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(r){return!r||r==="use_wallet"?this.getAddress():this.getAddress(r)}async getAddress(r){if(!r||r==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(r.n)}async ownerToAddress(r){return tt.bufferTob64Url(await this.crypto.hash(tt.b64UrlToBuffer(r)))}}We.default=Yt;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.SiloResource=void 0;const rt=j;class Qt{constructor(r,s,g){O(this,"api");O(this,"crypto");O(this,"transactions");this.api=r,this.crypto=s,this.transactions=g}async get(r){if(!r)throw new Error("No Silo URI specified");const s=await this.parseUri(r),g=await this.transactions.search("Silo-Name",s.getAccessKey());if(g.length==0)throw new Error(`No data could be found for the Silo URI: ${r}`);const T=await this.transactions.get(g[0]);if(!T)throw new Error(`No data could be found for the Silo URI: ${r}`);const S=T.get("data",{decode:!0,string:!1});return this.crypto.decrypt(S,s.getEncryptionKey())}async readTransactionData(r,s){if(!s)throw new Error("No Silo URI specified");const g=await this.parseUri(s),T=r.get("data",{decode:!0,string:!1});return this.crypto.decrypt(T,g.getEncryptionKey())}async parseUri(r){const s=r.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!s)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const g=s[1],T=Math.pow(2,parseInt(s[2])),S=await this.hash(rt.stringToBuffer(g),T),l=rt.bufferTob64(S.slice(0,15)),w=await this.hash(S.slice(16,31),1);return new Tt(r,l,w)}async hash(r,s){let g=await this.crypto.hash(r);for(let T=0;T<s-1;T++)g=await this.crypto.hash(g);return g}}Ae.default=Qt;class Tt{constructor(r,s,g){O(this,"uri");O(this,"accessKey");O(this,"encryptionKey");this.uri=r,this.accessKey=s,this.encryptionKey=g}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}Ae.SiloResource=Tt;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});const nt=ge,er=j;class tr{constructor(r){O(this,"api");this.api=r}async getTransactionOffset(r){const s=await this.api.get(`tx/${r}/offset`);if(s.status===200)return s.data;throw new Error(`Unable to get transaction offset: ${(0,nt.getError)(s)}`)}async getChunk(r){const s=await this.api.get(`chunk/${r}`);if(s.status===200)return s.data;throw new Error(`Unable to get chunk: ${(0,nt.getError)(s)}`)}async getChunkData(r){const s=await this.getChunk(r);return er.b64UrlToBuffer(s.chunk)}firstChunkOffset(r){return parseInt(r.offset)-parseInt(r.size)+1}async downloadChunkedData(r){const s=await this.getTransactionOffset(r),g=parseInt(s.size),S=parseInt(s.offset)-g+1,l=new Uint8Array(g);let w=0;for(;w<g;){this.api.config.logging&&console.log(`[chunk] ${w}/${g}`);let y;try{y=await this.getChunkData(S+w)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${S+w}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(y)l.set(y,w),w+=y.length;else throw new Error(`Couldn't complete data download at ${w}/${g}`)}return l}}ze.default=tr;var Je={};Object.defineProperty(Je,"__esModule",{value:!0});const at=ge,Oe=class{constructor(r,s){O(this,"api");O(this,"network");this.api=r,this.network=s}async get(r){const s=await this.api.get(`${Oe.HASH_ENDPOINT}${r}`);if(s.status===200)return s.data;throw s.status===404?new at.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${s}`)}async getByHeight(r){const s=await this.api.get(`${Oe.HEIGHT_ENDPOINT}${r}`);if(s.status===200)return s.data;throw s.status===404?new at.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${s}`)}async getCurrent(){const{current:r}=await this.network.getInfo();return await this.get(r)}};let Ee=Oe;O(Ee,"HASH_ENDPOINT","block/hash/"),O(Ee,"HEIGHT_ENDPOINT","block/height/");Je.default=Ee;var st;function Ne(){if(st)return be;st=1,Object.defineProperty(be,"__esModule",{value:!0});const a=He,r=qe,s=Ke,g=je,T=Vt(),S=We,l=Ge(),w=j,y=Ae,m=ze,B=Je,P=class{constructor(R){O(this,"api");O(this,"wallets");O(this,"transactions");O(this,"network");O(this,"blocks");O(this,"ar");O(this,"silo");O(this,"chunks");this.api=new r.default(R),this.wallets=new S.default(this.api,P.crypto),this.chunks=new m.default(this.api),this.transactions=new T.default(this.api,P.crypto,this.chunks),this.silo=new y.default(this.api,this.crypto,this.transactions),this.network=new g.default(this.api),this.blocks=new B.default(this.api,this.network),this.ar=new a.default}get crypto(){return P.crypto}get utils(){return P.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(R,L){const H={};if(Object.assign(H,R),!R.data&&!(R.target&&R.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(R.owner==null&&L&&L!=="use_wallet"&&(H.owner=L.n),R.last_tx==null&&(H.last_tx=await this.transactions.getTransactionAnchor()),typeof R.data=="string"&&(R.data=w.stringToBuffer(R.data)),R.data instanceof ArrayBuffer&&(R.data=new Uint8Array(R.data)),R.data&&!(R.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(R.reward==null){const q=R.data?R.data.byteLength:0;H.reward=await this.transactions.getPrice(q,H.target)}H.data_root="",H.data_size=R.data?R.data.byteLength.toString():"0",H.data=R.data||new Uint8Array(0);const z=new l.default(H);return await z.getSignatureData(),z}async createSiloTransaction(R,L,H){const z={};if(Object.assign(z,R),!R.data)throw new Error("Silo transactions must have a 'data' value");if(!H)throw new Error("No Silo URI specified.");if(R.target||R.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(R.owner==null){if(!L||!L.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");z.owner=L.n}R.last_tx==null&&(z.last_tx=await this.transactions.getTransactionAnchor());const q=await this.silo.parseUri(H);if(typeof R.data=="string"){const re=await this.crypto.encrypt(w.stringToBuffer(R.data),q.getEncryptionKey());z.reward=await this.transactions.getPrice(re.byteLength),z.data=w.bufferTob64Url(re)}if(R.data instanceof Uint8Array){const re=await this.crypto.encrypt(R.data,q.getEncryptionKey());z.reward=await this.transactions.getPrice(re.byteLength),z.data=w.bufferTob64Url(re)}const te=new l.default(z);return te.addTag("Silo-Name",q.getAccessKey()),te.addTag("Silo-Version","0.1.0"),te}arql(R){return this.api.post("/arql",R).then(L=>L.data||[])}};let x=P;return O(x,"init"),O(x,"crypto",new s.default),O(x,"utils",w),be.default=x,be}var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getDefaultConfig=void 0;const rr=(a,r)=>{const s=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,g=r.split("."),T=g[g.length-1],S=["localhost","[::1]"];return S.includes(r)||a=="file"||S.includes(T)||!!r.match(s)||!!T.match(s)},nr=a=>{const r=a.charAt(0)==="[",s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!a.match(s)||r},ar=(a,r)=>{if(rr(a,r))return{protocol:"https",host:"arweave.net",port:443};if(!nr(r)){let s=r.split(".");if(s.length>=3){s.shift();const g=s.join(".");return{protocol:a,host:g}}}return{protocol:a,host:r}};Ue.getDefaultConfig=ar;(function(a){var r=_e&&_e.__createBinding||(Object.create?function(S,l,w,y){y===void 0&&(y=w);var m=Object.getOwnPropertyDescriptor(l,w);(!m||("get"in m?!l.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return l[w]}}),Object.defineProperty(S,y,m)}:function(S,l,w,y){y===void 0&&(y=w),S[y]=l[w]}),s=_e&&_e.__exportStar||function(S,l){for(var w in S)w!=="default"&&!Object.prototype.hasOwnProperty.call(l,w)&&r(l,S,w)};Object.defineProperty(a,"__esModule",{value:!0});const g=Ne(),T=Ue;g.default.init=function(S={}){const l={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new g.default({...S,...l});const w=location.protocol.replace(":",""),y=location.hostname,m=location.port?parseInt(location.port):w=="https"?443:80,B=(0,T.getDefaultConfig)(w,y),x=S.protocol||B.protocol,P=S.host||B.host,I=S.port||B.port||m;return new g.default({...S,host:P,protocol:x,port:I})},typeof globalThis=="object"?globalThis.Arweave=g.default:typeof self=="object"&&(self.Arweave=g.default),s(Ne(),a),a.default=g.default})(ct);const sr=St(ct),_t=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],it=sr.init({host:"arweave.net",port:443,protocol:"https"});async function ur(a,r){const s=bt();let g=r;const T=new Bt(["function getPoints(address user_) external view returns (uint256)"]),l=await new Fe(s.activityPointsAddress,T,g).getPoints(a);let w=Number(Nt(l));return w<1?w=w.toFixed(2):w=Number.parseFloat(w),w}async function lr(a){const r=await it.wallets.getBalance(a);return it.ar.winstonToAr(r)}async function fr(a,r,s,g){let T=g;const l=await new Fe(a.address,_t,T).allowance(r,s);return ot(l,a.decimals)}async function hr(a,r,s){let g=s,T;return a.address===kt?s?T=await s.getBalance():T=await g.getBalance(r):T=await new Fe(a.address,_t,g).balanceOf(r),ot(T,a.decimals)}export{_t as E,hr as a,Ce as b,fr as c,lr as d,ur as g};
