import{H as g,M as d}from"./components.45c5a4e4.js";import{a as C,a2 as b,N as y,b as P,e as s,w as _,c as p,l as c,r as h,o as i}from"./entry.5fb68691.js";import{C as x}from"./ChatPost.6d9aa3f2.js";import{C as O}from"./ChatFeed.58c7378b.js";import"./composables.d58a97d0.js";import"./ethers.cfeb6c38.js";import"./user.8396eceb.js";import"./Image.d40b4ac0.js";import"./ipfsUtils.ec0727d2.js";import"./domainUtils.7c2c0a2a.js";import"./SwitchChainButton.a9b02ccd.js";import"./WaitingToast.f216de8b.js";import"./textUtils.2928741a.js";import"./storageUtils.ed80ecc5.js";import"./MintedPostImage.6b26bb62.js";import"./site.9e2cc5b4.js";import"./balanceUtils.c7be8f62.js";import"./ConnectWalletButton.98b3f2c3.js";import"./FileUploadModal.09bc41ad.js";const k={data(){return{hasMaster:!1,masterPost:null,post:null,replyNotMaster:!1}},components:{ChatFeed:O,ChatPost:x},created(){this.getPostObject()},computed:{getOrbisContext(){return this.post?.context?this.post.context:this.post?.content.context?this.post.content.context:this.post?.context_details.context_id?this.post.context_details.context_id:this.$config.orbisTest?this.$config.orbisTestContext:this.$config.chatChannels.general},getPostAuthor(){return this.post?this.post.creator_details.metadata.address:null},getQueryId(){return this.route.query.id}},methods:{async getPostObject(){this.post=null,this.masterPost=null,this.hasMaster=!1,this.replyNotMaster=!1;let{data:t,error:o}=await this.$orbis.getPost(this.route.query.id);if(this.post=t,o)console.log("Orbis error"),console.log(o),this.toast("Orbis error",{type:"error"}),this.toast(o,{type:"error"});else if(this.post.master){this.hasMaster=!0,this.post.master!==this.post.reply_to&&(this.replyNotMaster=!0);let{data:l,error:n}=await this.$orbis.getPost(this.post.master);this.masterPost=l,n&&(console.log("Orbis error"),console.log(n),this.toast("Orbis error",{type:"error"}),this.toast(n,{type:"error"}))}}},setup(){const t=b(),o=y();return{route:t,toast:o}},watch:{getQueryId(t,o){this.getPostObject()}}};function w(t,o,l,n,e,a){const r=d,u=g,m=h("ChatPost"),f=h("ChatFeed");return i(),P("div",null,[s(u,null,{default:_(()=>[s(r,{name:"description",content:"Check out this chat post on "+t.$config.projectName+"!"},null,8,["content"]),s(r,{property:"og:image",content:t.$config.projectUrl+t.$config.previewImagePost},null,8,["content"]),s(r,{property:"og:description",content:"Check out this chat post on "+t.$config.projectName+"!"},null,8,["content"]),s(r,{name:"twitter:image",content:t.$config.projectUrl+t.$config.previewImagePost},null,8,["content"]),s(r,{name:"twitter:description",content:"Check out this chat post on "+t.$config.projectName+"!"},null,8,["content"])]),_:1}),e.masterPost?(i(),p(m,{key:0,class:"m-4",post:e.masterPost,orbisContext:a.getOrbisContext},null,8,["post","orbisContext"])):c("",!0),e.post?(i(),p(m,{key:1,post:e.post,orbisContext:a.getOrbisContext},null,8,["post","orbisContext"])):c("",!0),e.post?(i(),p(f,{key:2,id:e.post.stream_id,master:e.post.master,masterPost:e.post,orbisContext:a.getOrbisContext},null,8,["id","master","masterPost","orbisContext"])):c("",!0)])}const G=C(k,[["render",w]]);export{G as default};
