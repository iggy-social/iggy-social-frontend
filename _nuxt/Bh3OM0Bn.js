import{_ as C,j as m,Z as k,c,o as r,a as s,g as u,p as F,v as M,d as _,r as I,b as d,w as y,T,t as b,M as $,H as E,e as B,F as w,$ as L,f as x,a0 as S,a1 as A,a2 as D,n as j,s as P}from"#entry";import{I as V}from"./BRYG_3z3.js";const q={name:"SearchNftModal",data(){return{componentId:null,searchText:"",waitingFind:!1,findError:!1}},mounted(){this.componentId=this.$.uid},methods:{async findNft(){if(this.waitingFind=!0,this.findError=!1,this.searchText){if(String(this.searchText).toLowerCase().startsWith("0x"))return document.getElementById("closeModal-"+this.componentId).click(),this.$router.push({path:"/nft/collection/",query:{id:this.searchText}}),this.searchText=null,this.waitingFind=!1;try{const e={address:this.$config.public.nftLaunchpadBondingAddress,abi:[{name:"getNftContractAddress",type:"function",stateMutability:"view",inputs:[{name:"_uniqueId",type:"string"}],outputs:[{name:"",type:"address"}]}],functionName:"getNftContractAddress",args:[this.searchText]},t=await m(e);if(t&&t!==k)return document.getElementById("closeModal-"+this.componentId).click(),this.$router.push({path:"/nft/collection/",query:{id:t}}),this.searchText=null,this.waitingFind=!1}catch(e){console.error("Error finding NFT:",e)}return this.findError=!0,this.waitingFind=!1}}}},U=["aria-labelledby"],H={class:"modal-dialog"},W={class:"modal-content"},R={class:"modal-header"},z=["id"],Z=["id"],G={class:"modal-body"},J={class:"mb-3"},K=["for"],O=["for"],Q={key:0},X={class:"modal-footer"},Y=["disabled"],tt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function et(e,t,i,o,n,l){return r(),c("div",{class:"modal fade",id:"searchNftModal",tabindex:"-1","aria-labelledby":"modalLabel-"+n.componentId,"aria-hidden":"true"},[s("div",H,[s("div",W,[s("div",R,[s("h1",{class:"modal-title fs-5",id:"modalLabel-"+n.componentId},"Find NFT collection",8,z),s("button",{id:"closeModal-"+n.componentId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,Z)]),s("div",G,[s("div",J,[s("label",{for:"input-"+n.componentId,class:"form-label"},"Enter NFT collection address or unique ID:",8,K),F(s("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>n.searchText=h),type:"text",class:"form-control",for:"input-"+n.componentId},null,8,O),[[M,n.searchText]])]),n.findError?(r(),c("p",Q,"Error: Collection not found...")):u("",!0)]),s("div",X,[t[3]||(t[3]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{onClick:t[1]||(t[1]=(...h)=>l.findNft&&l.findNft(...h)),type:"button",class:"btn btn-primary",disabled:n.waitingFind},[n.waitingFind?(r(),c("span",tt)):u("",!0),t[2]||(t[2]=_(" Find ",-1))],8,Y)])])])],8,U)}const st=C(q,[["render",et]]),nt={name:"Nft",props:["hideBackButton"],data(){return{allNftsArrayLength:0,allNftsIndexStart:0,allNftsIndexEnd:0,featuredNfts:[],lastNfts:[],waitingData:!1}},components:{Image:V,SearchNftModal:st},mounted(){this.$config.public.nftLaunchpadBondingAddress&&(this.fetchFeaturedNfts(),this.fetchLastNfts())},computed:{showLoadMoreButton(){return this.allNftsIndexEnd>0}},methods:{async fetchFeaturedNfts(){this.waitingData=!0;try{const e={address:this.$config.public.nftLaunchpadBondingAddress,abi:[{name:"getFeaturedNftContracts",type:"function",stateMutability:"view",inputs:[{name:"amount",type:"uint256"}],outputs:[{name:"",type:"address[]"}]}],functionName:"getFeaturedNftContracts",args:[BigInt(4)]},t=await m(e);t&&await this.parseNftsArray(t,this.featuredNfts)}catch(e){console.error("Error fetching featured NFTs:",e)}finally{this.waitingData=!1}},async fetchLastNfts(){this.waitingData=!0;try{const e={address:this.$config.public.nftLaunchpadBondingAddress,abi:[{name:"getLastNftContracts",type:"function",stateMutability:"view",inputs:[{name:"amount",type:"uint256"}],outputs:[{name:"",type:"address[]"}]},{name:"getNftContracts",type:"function",stateMutability:"view",inputs:[{name:"fromIndex",type:"uint256"},{name:"toIndex",type:"uint256"}],outputs:[{name:"",type:"address[]"}]},{name:"getNftContractsArrayLength",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]}]};if(Number(this.allNftsArrayLength)===0){const t={...e,functionName:"getNftContractsArrayLength",args:[]},i=await m(t);this.allNftsArrayLength=i?Number(i):0}if(this.allNftsArrayLength===1){const t={...e,functionName:"getLastNftContracts",args:[BigInt(1)]},i=await m(t);i&&await this.parseNftsArray(i)}else if(this.allNftsArrayLength>1){this.allNftsIndexEnd===0&&(this.allNftsIndexEnd=this.allNftsArrayLength-1,this.allNftsArrayLength<this.$config.public.nftLaunchpadLatestItems?this.allNftsIndexStart=0:this.allNftsIndexStart=this.allNftsArrayLength-this.$config.public.nftLaunchpadLatestItems);const t={...e,functionName:"getNftContracts",args:[BigInt(this.allNftsIndexStart),BigInt(this.allNftsIndexEnd)]},i=await m(t);if(i){const o=[...i];o.reverse(),await this.parseNftsArray(o),this.allNftsIndexEnd>this.$config.public.nftLaunchpadLatestItems?this.allNftsIndexEnd=Math.max(0,this.allNftsIndexEnd-this.$config.public.nftLaunchpadLatestItems):this.allNftsIndexEnd=0,this.allNftsIndexStart>this.$config.public.nftLaunchpadLatestItems?this.allNftsIndexStart=Math.max(0,this.allNftsIndexStart-this.$config.public.nftLaunchpadLatestItems):this.allNftsIndexStart=0}}}catch(e){console.error("Error fetching last NFTs:",e)}finally{this.waitingData=!1}},formatPrice(e){if(e===null)return null;const t=Number(j(e));return P(t)},async parseNftsArray(e,t=this.lastNfts){const i={abi:[{name:"collectionPreview",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{name:"getMintPrice",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{name:"name",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]}]};for(let o=0;o<e.length;o++)try{let n=S(window,e[o]);n||(n={address:e[o]});let l;if(n?.name)l=n.name;else{const g={...i,address:e[o],functionName:"name",args:[]};l=await m(g),l&&(n.name=l)}const h={...i,address:e[o],functionName:"getMintPrice",args:[]},f=await m(h);let p;if(n?.image)p=n.image;else{const g={...i,address:e[o],functionName:"collectionPreview",args:[]};if(p=await m(g),p){let N=await A(p);N?.success&&(n.image=N?.url)}}D(window,e[o],n),t.push({address:e[o],image:p,name:l,price:f})}catch(n){console.error(`Error parsing NFT ${e[o]}:`,n)}}}},at={class:"card border scroll-500"},it={class:"card-body"},ot={class:"d-flex flex-row flex-wrap mt-3"},rt={class:"mb-3"},lt={key:1,class:"mb-3"},ct={key:2,class:"row"},dt={class:"card border mb-3"},ut={class:"card-body rounded-bottom-3"},ft={class:"card-text mb-1"},mt={class:"card-text"},ht={key:3,class:"mt-3 mb-3"},pt={class:"row"},gt={class:"card border mb-3"},bt={class:"card-body rounded-bottom-3"},Nt={class:"card-text mb-1"},yt={class:"card-text"},_t={key:4,class:"d-flex justify-content-center mb-3"},wt={key:5,class:"d-grid gap-2"},It=["disabled"],Lt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function xt(e,t,i,o,n,l){const h=T,f=$,p=E,g=B,N=I("Image"),v=I("SearchNftModal");return r(),c(w,null,[d(p,null,{default:y(()=>[d(h,null,{default:y(()=>[_("NFT Launchpad | "+b(e.$config.public.projectMetadataTitle),1)]),_:1}),d(f,{property:"og:title",content:"NFT Launchpad | "+e.$config.public.projectMetadataTitle},null,8,["content"]),d(f,{name:"description",content:"Check out these awesome NFT collections on "+e.$config.public.projectName+"!"},null,8,["content"]),d(f,{property:"og:image",content:e.$config.public.projectUrl+e.$config.public.previewImageNftLaunchpad},null,8,["content"]),d(f,{property:"og:description",content:"Check out these awesome NFT collections on "+e.$config.public.projectName+"!"},null,8,["content"]),d(f,{name:"twitter:image",content:e.$config.public.projectUrl+e.$config.public.previewImageNftLaunchpad},null,8,["content"]),d(f,{name:"twitter:description",content:"Check out these awesome NFT collections on "+e.$config.public.projectName+"!"},null,8,["content"])]),_:1}),s("div",at,[s("div",it,[i.hideBackButton?u("",!0):(r(),c("p",{key:0,class:"fs-3",onClick:t[0]||(t[0]=a=>e.$router.back())},[...t[2]||(t[2]=[s("i",{class:"bi bi-arrow-left-circle cursor-pointer"},null,-1)])])),s("h3",ot,[t[5]||(t[5]=s("div",{class:"mb-3 me-auto"},"NFT Launchpad",-1)),s("div",rt,[d(g,{class:"btn btn-outline-primary btn-sm",to:"/nft/create"},{default:y(()=>[...t[3]||(t[3]=[s("i",{class:"bi bi-plus-circle"},null,-1),_(" Create ",-1)])]),_:1}),t[4]||(t[4]=s("button",{class:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#searchNftModal"},[s("i",{class:"bi bi-search"}),_(" Find ")],-1))])]),n.featuredNfts.length>0?(r(),c("h4",lt,"Featured")):u("",!0),n.featuredNfts.length>0?(r(),c("div",ct,[(r(!0),c(w,null,L(n.featuredNfts,a=>(r(),x(g,{key:a.address,class:"col-md-3 text-decoration-none",to:"/nft/collection?id="+a.address},{default:y(()=>[s("div",dt,[d(N,{url:a.image,alt:a.name,cls:"card-img-top"},null,8,["url","alt"]),s("div",ut,[s("p",ft,[s("strong",null,b(a.name),1)]),s("small",mt,b(l.formatPrice(a.price))+" "+b(e.$config.public.tokenSymbol),1)])])]),_:2},1032,["to"]))),128))])):u("",!0),n.lastNfts.length>0?(r(),c("h4",ht,"Latest")):u("",!0),s("div",pt,[(r(!0),c(w,null,L(n.lastNfts,a=>(r(),x(g,{key:a.address,class:"col-md-3 text-decoration-none",to:"/nft/collection?id="+a.address},{default:y(()=>[s("div",gt,[d(N,{url:a.image,alt:a.name,cls:"card-img-top"},null,8,["url","alt"]),s("div",bt,[s("p",Nt,[s("strong",null,b(a.name),1)]),s("small",yt,b(l.formatPrice(a.price))+" "+b(e.$config.public.tokenSymbol),1)])])]),_:2},1032,["to"]))),128))]),n.waitingData?(r(),c("div",_t,[...t[6]||(t[6]=[s("span",{class:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"},null,-1)])])):u("",!0),l.showLoadMoreButton?(r(),c("div",wt,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...a)=>l.fetchLastNfts&&l.fetchLastNfts(...a)),disabled:n.waitingData},[n.waitingData?(r(),c("span",Lt)):u("",!0),t[7]||(t[7]=_(" Load more ",-1))],8,It)])):u("",!0)])]),d(v)],64)}const kt=C(nt,[["render",xt]]);export{kt as default};
