import{u as b}from"./site.1241b7d1.js";import{F as m}from"./FileUploadInput.603ba7f3.js";import{a as h,r as _,o as i,b as n,f as e,t as r,ah as p,l as c,i as f,e as v,af as U,ag as T}from"./entry.02f14eb1.js";const k={name:"FileUploadModal",props:["title","componentId","infoText","maxFileSize","storageType"],emits:["processFileUrl"],components:{FileUploadInput:m},data(){return{currentTab:"upload",pastedLink:null}},mounted(){this.fileUploadEnabled||(this.currentTab="paste")},computed:{arweaveBalance(){const s=this.siteStore.arweaveBalance;if(s){const t=Number(s).toFixed(6);return Number.parseFloat(t)}return 0},arweaveBalanceTooLow(){return this.storageType!=="arweave"?!1:this.arweaveBalance<this.$config.arweaveMinBalance},fileUploadEnabled(){return this.siteStore.getFileUploadEnabled},getTitle(){return this.title||"Upload file"}},methods:{processUploadedFileUrl(s){this.$emit("processFileUrl",s),document.getElementById("closeFileUploadModal"+this.componentId).click()}},setup(){return{siteStore:b()}},watch:{fileUploadEnabled(){this.fileUploadEnabled?this.currentTab="upload":this.currentTab="paste"}}},F=["id","aria-labelledby"],g={class:"modal-dialog"},w={class:"modal-content"},y={class:"modal-header"},x=["id"],B=["id"],S={class:"modal-body mb-4"},L={class:"nav nav-tabs nav-fill"},E={class:"nav-item"},I=["disabled"],M={class:"nav-item"},C={class:"tab-content mt-3"},A={key:0},N={key:0},P={key:1},z=e("p",{class:"text-danger"}," Error: Arweave is used as file storage. Current balance in the Arweave wallet is insufficient to do the upload. ",-1),V={class:"text-danger"},D=["href"],R={key:1},j=e("p",null,"Paste file link",-1),q=["disabled"];function G(s,t,l,H,a,o){const u=_("FileUploadInput");return i(),n("div",{class:"modal fade",id:"fileUploadModal"+l.componentId,tabindex:"-1","aria-labelledby":"fileUploadModalLabel"+l.componentId,"aria-hidden":"true"},[e("div",g,[e("div",w,[e("div",y,[e("h1",{class:"modal-title fs-5",id:"fileUploadModalLabel"+l.componentId},r(o.getTitle),9,x),e("button",{id:"closeFileUploadModal"+l.componentId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,B)]),e("div",S,[e("ul",L,[e("li",E,[e("button",{disabled:!this.fileUploadEnabled,class:p(["nav-link",a.currentTab==="upload"?"active":""]),onClick:t[0]||(t[0]=d=>a.currentTab="upload")}," Upload ",10,I)]),e("li",M,[e("button",{class:p(["nav-link",a.currentTab==="paste"?"active":""]),onClick:t[1]||(t[1]=d=>a.currentTab="paste")}," Paste Link ",2)])]),e("div",C,[a.currentTab==="upload"?(i(),n("div",A,[l.infoText?(i(),n("p",N,r(l.infoText),1)):c("",!0),o.arweaveBalanceTooLow?(i(),n("div",P,[z,e("p",null,[e("span",V,"Please send AR tokens to this wallet (min. "+r(s.$config.arweaveMinBalance)+" AR) to enable uploads: ",1),e("a",{href:"https://arscan.io/address/"+this.$config.arweaveAddress,target:"_blank"},r(this.$config.arweaveAddress),9,D),f(". ")])])):c("",!0),v(u,{btnCls:"btn btn-primary",disable:o.arweaveBalanceTooLow,maxFileSize:l.maxFileSize,storageType:l.storageType,onProcessUploadedFileUrl:o.processUploadedFileUrl},null,8,["disable","maxFileSize","storageType","onProcessUploadedFileUrl"])])):c("",!0),a.currentTab==="paste"?(i(),n("div",R,[j,U(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>a.pastedLink=d),type:"text",class:"form-control mb-3",placeholder:"Enter http link to file"},null,512),[[T,a.pastedLink]]),e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=d=>o.processUploadedFileUrl(a.pastedLink)),disabled:!a.pastedLink}," Submit link ",8,q)])):c("",!0)])])])])],8,F)}const Q=h(k,[["render",G]]);export{Q as F};
