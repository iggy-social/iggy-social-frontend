import{H as ae,T as ne,M as oe,L as re}from"./components.356fe1b9.js";import{a0 as le,a as S,r as b,o as n,b as l,f as t,e as c,w as f,l as d,c as w,t as g,i as p,as as O,F as Q,ae as z,u as de,ah as v,ad as X,af as U,ag as P,aq as ce,ac as ue,k as me,an as he,am as pe,al as be}from"./entry.4c969726.js";import{u as q}from"./site.a2f021af.js";import{u as T}from"./user.d03486f1.js";import{u as $,v as fe,f as ge,I as A,C as D,a as C,l as _e,U as K,s as ve}from"./ethers.8328e202.js";import{C as R,S as I,D as we}from"./SwitchChainButton.868a1ec4.js";import{g as ee}from"./textUtils.7a2f6a9b.js";import{P as Se,g as L,a as ke}from"./domainUtils.4de153c7.js";import{g as j,d as Ne}from"./balanceUtils.12f63e93.js";import{t as ye}from"./tokens.8eeff16c.js";import{W as H}from"./WaitingToast.460d017b.js";import{b as G,e as $e,g as Ce}from"./storageUtils.15eadf2e.js";import{S as Me}from"./SimpleSwap.2fe4381b.js";import{S as te}from"./ShareReferralLink.7645ad90.js";import{F as Ae}from"./FindUser.9d384341.js";import"./composables.e96dca6d.js";import"./Image.4021538c.js";const F=le({id:"sidebars",state:()=>({leftSidebar:!1,mainContent:!0,rightSidebar:!1}),getters:{showLeftSidebar:e=>e.leftSidebar,showMainContent:e=>e.mainContent,showRightSidebar:e=>e.rightSidebar},actions:{setLeftSidebar(e){this.leftSidebar=e},setMainContent(e){this.mainContent=e},setRightSidebar(e){this.rightSidebar=e}}});async function De(e,i,o,s,r){await e.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:i,symbol:o,decimals:s,image:r}}})}const ie=""+globalThis.__publicAssetsURL("img/logo.svg"),Le={name:"Navbar",components:{ConnectWalletButton:R,SwitchChainButton:I},computed:{showDomainOrAddress(){return this.userStore.getDefaultDomain?ee(this.userStore.getDefaultDomain):this.address?this.shortenAddress(this.address):"Profile"}},methods:{addToMetaMask(){De(window.ethereum,this.$config.public.chatTokenAddress,this.$config.public.chatTokenSymbol,18,this.$config.public.chatTokenImage)},changeColorMode(e){this.siteStore.setColorMode(e),document.documentElement.setAttribute("data-bs-theme",this.siteStore.getColorMode)},async disconnectWallet(){this.disconnect()}},setup(){const{address:e,isActivated:i,disconnect:o}=$(),s=q(),r=T();return{address:e,disconnect:o,isActivated:i,shortenAddress:fe,siteStore:s,userStore:r}}},Ue={class:"navbar navbar-expand-lg navbar-bg-custom"},Te={class:"container-fluid mx-3"},Be=t("img",{src:ie,alt:"Chat logo",height:"45"},null,-1),We={class:"navbar-nav justify-content-end flex-grow-1"},Pe={key:0,class:"nav-item"},Re=t("span",{class:"nav-link cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#referralModal"}," Earn referral fees! \u{1F911} ",-1),Ie=[Re],Fe={key:1,class:"nav-item"},xe={key:3,class:"nav-item dropdown"},Ee={class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},Ve={class:"dropdown-menu dropdown-menu-end"},je=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#chatSettingsModal"},"Settings",-1),He=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#changeUsernameModal"},"Change username",-1),Oe=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#findUserModal"},"Find user",-1),ze=t("span",{class:"dropdown-item cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#referralModal"},"Share referral link",-1),qe={key:4,class:"nav-item dropdown"},Ge={class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},Ye={class:"dropdown-menu dropdown-menu-end"},Je={class:"nav-item cursor-pointer",title:"Toggle between light and dark mode"},Ze=t("i",{class:"bi bi-brightness-high"},null,-1),Ke=[Ze],Qe=t("i",{class:"bi bi-moon-fill"},null,-1),Xe=[Qe];function et(e,i,o,s,r,a){const u=O,m=b("ConnectWalletButton"),h=b("SwitchChainButton");return n(),l("nav",Ue,[t("div",Te,[c(u,{class:"navbar-brand",to:"/"},{default:f(()=>[Be]),_:1}),t("ul",We,[s.isActivated?(n(),l("li",Pe,Ie)):d("",!0),s.isActivated?d("",!0):(n(),l("li",Fe,[c(m,{class:"nav-link cursor-pointer",btnText:"Connect wallet"})])),s.isActivated?(n(),w(h,{key:2,navbar:!0,dropdown:!0})):d("",!0),s.isActivated?(n(),l("li",xe,[t("a",Ee,g(a.showDomainOrAddress),1),t("div",Ve,[s.userStore.getDefaultDomain?(n(),w(u,{key:0,class:"dropdown-item cursor-pointer",to:"/profile"},{default:f(()=>[p("Profile")]),_:1})):d("",!0),je,He,Oe,ze,t("span",{class:"dropdown-item cursor-pointer",onClick:i[0]||(i[0]=(..._)=>a.disconnectWallet&&a.disconnectWallet(..._))},"Disconnect")])])):d("",!0),s.isActivated&&e.$config.public.chatTokenAddress?(n(),l("li",qe,[t("a",Ge,g(s.userStore.getChatTokenBalance)+" "+g(e.$config.public.chatTokenSymbol),1),t("div",Ye,[c(u,{class:"dropdown-item cursor-pointer",to:"/airdrop"},{default:f(()=>[p("Claim "+g(e.$config.public.chatTokenSymbol)+" airdrop",1)]),_:1}),e.$config.public.stakingContractAddress&&e.$config.public.showFeatures.stake?(n(),w(u,{key:0,class:"dropdown-item cursor-pointer",to:"/stake"},{default:f(()=>[p("Stake & earn weekly "+g(e.$config.public.tokenSymbol)+" rewards",1)]),_:1})):d("",!0),t("span",{class:"dropdown-item cursor-pointer",onClick:i[1]||(i[1]=(..._)=>a.addToMetaMask&&a.addToMetaMask(..._))},"Add "+g(e.$config.public.chatTokenSymbol)+" to MetaMask",1)])])):d("",!0),t("li",Je,[s.siteStore.getColorMode==="dark"?(n(),l("span",{key:0,class:"nav-link",onClick:i[2]||(i[2]=_=>a.changeColorMode("light"))},Ke)):d("",!0),s.siteStore.getColorMode==="light"?(n(),l("span",{key:1,class:"nav-link",onClick:i[3]||(i[3]=_=>a.changeColorMode("dark"))},Xe)):d("",!0)])])])])}const tt=S(Le,[["render",et]]),it={name:"NavbarMobile",props:["lSidebar","rSidebar"],components:{ConnectWalletButton:R,SwitchChainButton:I},computed:{isSupportedChain(){return this.chainId===this.$config.public.supportedChainId}},methods:{toggleLeftSidebar(){this.sidebarStore.setRightSidebar(!1),this.sidebarStore.showLeftSidebar?(this.sidebarStore.setLeftSidebar(!1),this.lSidebar.hide(),this.sidebarStore.setMainContent(!0)):(this.sidebarStore.setLeftSidebar(!0),this.lSidebar.show(),this.sidebarStore.setMainContent(!1))},toggleRightSidebar(){this.lSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.showRightSidebar?(this.sidebarStore.setRightSidebar(!1),this.sidebarStore.setMainContent(!0)):(this.sidebarStore.setRightSidebar(!0),this.sidebarStore.setMainContent(!1))}},setup(){const{chainId:e,isActivated:i}=$(),o=F();return{chainId:e,isActivated:i,sidebarStore:o}}},st={class:"navbar sticky-top navbar-expand-lg navbar-mobile"},at={class:"container-fluid"},nt={key:0,class:"navbar-toggler-icon"},ot={key:1,class:"bi bi-x-lg"},rt=t("img",{src:ie,alt:"Chat logo",height:"40"},null,-1),lt={key:0,class:"navbar-toggler-icon"},dt={key:1,class:"bi bi-x-lg"},ct={key:0,class:"card border m-3"},ut={class:"card-body d-flex justify-content-center"};function mt(e,i,o,s,r,a){const u=O,m=b("ConnectWalletButton"),h=b("SwitchChainButton");return n(),l(Q,null,[t("nav",st,[t("div",at,[t("button",{onClick:i[0]||(i[0]=(..._)=>a.toggleLeftSidebar&&a.toggleLeftSidebar(..._)),class:"nav-item btn navbar-toggler nav-btn-left",type:"button"},[s.sidebarStore.showLeftSidebar?d("",!0):(n(),l("span",nt)),s.sidebarStore.showLeftSidebar?(n(),l("span",ot)):d("",!0)]),c(u,{class:"navbar-brand mx-auto",to:"/"},{default:f(()=>[rt]),_:1}),t("button",{onClick:i[1]||(i[1]=(..._)=>a.toggleRightSidebar&&a.toggleRightSidebar(..._)),class:"nav-item btn navbar-toggler nav-btn-right",type:"button"},[s.sidebarStore.showRightSidebar?d("",!0):(n(),l("span",lt)),s.sidebarStore.showRightSidebar?(n(),l("span",dt)):d("",!0)])])]),!a.isSupportedChain||!s.isActivated?(n(),l("div",ct,[t("div",ut,[s.isActivated?d("",!0):(n(),w(m,{key:0,class:"btn btn-primary",btnText:"Connect wallet"})),s.isActivated&&!a.isSupportedChain?(n(),w(h,{key:1})):d("",!0)])])):d("",!0)],64)}const ht=S(it,[["render",mt]]),pt={name:"SidebarLeft",props:["lSidebar","isMobile"],components:{ProfileImage:Se},computed:{getProfileLink(){return this.userStore.getDefaultDomain?`/profile/?id=${this.userStore.getDefaultDomain}`:this.address?`/profile/?id=${this.address}`:"/profile"},getUserAp(){return this.userStore.getCurentUserActivityPoints>0?this.userStore.getCurentUserActivityPoints:0}},methods:{getActivityPoints:j,closeLeftSidebar(){this.isMobile&&(this.lSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setMainContent(!0))},async fetchActivityPoints(){if(this.$config.public.activityPointsAddress&&this.address){this.toast.info("Refreshing activity points...",{timeout:2e3});const e=this.$getFallbackProvider(this.$config.public.supportedChainId),i=await this.getActivityPoints(this.address,e);this.userStore.setCurrentUserActivityPoints(i)}}},setup(){const{address:e,isActivated:i}=$(),o=z(),s=F(),r=T();return{address:e,isActivated:i,sidebarStore:s,toast:o,userStore:r}}},bt={class:"col col-lg-auto px-0 mt-1"},ft={class:"sidebar-nav list-group border-0 rounded-0 text-sm-start min-vh-100"},gt={class:"card m-2 p-2 bg-light"},_t={key:0,class:"text-center"},vt={key:0,class:"mt-3"},wt={key:1,class:"mt-2"},St=t("hr",null,null,-1),kt={class:"nav nav-pills flex-column"},Nt={class:"list-group"},yt={class:"list-group"},$t={class:"list-group"},Ct=t("hr",null,null,-1),Mt=t("i",{class:"bi bi-rocket-takeoff me-2"},null,-1),At=t("i",{class:"bi bi-person me-2"},null,-1),Dt=t("i",{class:"bi bi-award me-2"},null,-1),Lt=t("i",{class:"bi bi-send me-2"},null,-1),Ut=t("i",{class:"bi bi-cash-stack me-2"},null,-1),Tt=t("i",{class:"bi bi-arrow-down-up me-2"},null,-1),Bt=t("i",{class:"bi bi-gift me-2"},null,-1),Wt=["href"],Pt=t("i",{class:"bi bi-box2 me-2"},null,-1),Rt=t("small",null,[t("i",{class:"bi bi-box-arrow-up-right ms-1"})],-1),It=t("i",{class:"bi bi-binoculars me-2"},null,-1),Ft=t("i",{class:"bi bi-patch-question me-2"},null,-1);function xt(e,i,o,s,r,a){const u=b("ProfileImage"),m=O;return n(),l("div",bt,[t("div",{id:"sidebar1",class:v(["collapse collapse-horizontal",e.$config.public.sidebarLeftSticky?"sticky-lg-top":""])},[t("div",ft,[t("div",gt,[s.isActivated&&s.userStore.getDefaultDomain?(n(),l("div",_t,[c(m,{to:a.getProfileLink},{default:f(()=>[(n(),w(u,{key:s.userStore.getImage,onClick:a.closeLeftSidebar,class:"img-fluid mt-3 rounded-circle w-30 sidebar-profile-image",domain:s.userStore.getDefaultDomain,image:s.userStore.getImage},null,8,["onClick","domain","image"]))]),_:1},8,["to"]),s.userStore.getDefaultDomain?(n(),l("h6",vt,g(de(ee)(s.userStore.getDefaultDomain)),1)):d("",!0),e.$config.public.activityPointsAddress&&e.$config.public.showFeatures.activityPoints?(n(),l("div",wt,[c(m,{to:"/activity-points",class:"btn btn-outline-primary btn-sm mt-2 mb-2"},{default:f(()=>[p(g(a.getUserAp)+" AP ",1)]),_:1})])):d("",!0),St])):d("",!0),t("ul",kt,[t("ul",Nt,[c(m,{to:"/",class:v(["list-group-item cursor-pointer hover-color bg-light border-0",e.$route.path==="/"?"active":""]),onClick:a.closeLeftSidebar},{default:f(()=>[p(" General discussion ")]),_:1},8,["class","onClick"])]),t("ul",yt,[c(m,{to:"/memes-images",class:v(["list-group-item cursor-pointer hover-color bg-light border-0",e.$route.path.startsWith("/memes-images")?"active":""]),onClick:a.closeLeftSidebar},{default:f(()=>[p(" Share images & NFTs ")]),_:1},8,["class","onClick"])]),t("ul",$t,[c(m,{to:"/shill",class:v(["list-group-item cursor-pointer hover-color bg-light border-0",e.$route.path.startsWith("/shill")?"active":""]),onClick:a.closeLeftSidebar},{default:f(()=>[p(" Shill & discuss projects ")]),_:1},8,["class","onClick"])]),Ct,e.$config.public.nftLaunchpadBondingAddress&&e.$config.public.showFeatures.nftLaunchpad?(n(),l("li",{key:0,class:"nav-item p-1",onClick:i[0]||(i[0]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/nft")?"active":""]),"aria-current":"page",to:"/nft"},{default:f(()=>[Mt,p(" NFT Launchpad ")]),_:1},8,["class"])])):d("",!0),s.isActivated&&s.userStore.getDefaultDomain?(n(),l("li",{key:1,class:"nav-item p-1",onClick:i[1]||(i[1]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/profile")?"active":""]),"aria-current":"page",to:a.getProfileLink},{default:f(()=>[At,p(" Profile ")]),_:1},8,["class","to"])])):d("",!0),e.$config.public.showFeatures.activityPoints&&e.$config.public.activityPointsAddress?(n(),l("li",{key:2,class:"nav-item p-1",onClick:i[2]||(i[2]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/activity-points")?"active":""]),"aria-current":"page",to:"/activity-points"},{default:f(()=>[Dt,p(" Activity Points ")]),_:1},8,["class"])])):d("",!0),e.$config.public.showFeatures.sendTokens?(n(),l("li",{key:3,class:"nav-item p-1",onClick:i[3]||(i[3]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/send-tokens")?"active":""]),"aria-current":"page",to:"/send-tokens"},{default:f(()=>[Lt,p(" Send Tokens ")]),_:1},8,["class"])])):d("",!0),e.$config.public.stakingContractAddress&&e.$config.public.showFeatures.stake?(n(),l("li",{key:4,class:"nav-item p-1",onClick:i[4]||(i[4]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/stake")?"active":""]),"aria-current":"page",to:"/stake"},{default:f(()=>[Ut,p(" Stake & Earn ")]),_:1},8,["class"])])):d("",!0),e.$config.public.swapRouterAddress&&e.$config.public.showFeatures.swap?(n(),l("li",{key:5,class:"nav-item p-1",onClick:i[5]||(i[5]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/swap")?"active":""]),"aria-current":"page",to:"/swap"},{default:f(()=>[Tt,p(" Swap ")]),_:1},8,["class"])])):d("",!0),(e.$config.public.airdropClaimDomainsAddress||e.$config.public.airdropApAddress)&&e.$config.public.showFeatures.airdrop?(n(),l("li",{key:6,class:"nav-item p-1",onClick:i[6]||(i[6]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/airdrop")?"active":""]),"aria-current":"page",to:"/airdrop"},{default:f(()=>[Bt,p(" Airdrop ")]),_:1},8,["class"])])):d("",!0),e.$config.public.showFeatures.governance?(n(),l("li",{key:7,class:"nav-item p-1",onClick:i[7]||(i[7]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[t("a",{class:"nav-link",href:e.$config.public.governanceUrl,target:"_blank"},[Pt,p(" Governance "),Rt],8,Wt)])):d("",!0),t("li",{class:"nav-item p-1",onClick:i[8]||(i[8]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/find-user")?"active":""]),"aria-current":"page",to:"/find-user"},{default:f(()=>[It,p(" Find User ")]),_:1},8,["class"])]),t("li",{class:"nav-item p-1",onClick:i[9]||(i[9]=(...h)=>a.closeLeftSidebar&&a.closeLeftSidebar(...h))},[c(m,{class:v(["nav-link",e.$route.path.startsWith("/about")?"active":""]),"aria-current":"page",to:"/about"},{default:f(()=>[Ft,p(" About ")]),_:1},8,["class"])])])])])],2)])}const Et=S(pt,[["render",xt]]),Vt={name:"NameMintWidget",data(){return{domainName:null,isMinter:!1,loadingData:!1,loadingMint:!1,paused:!0,price:null,price1char:null,price2char:null,price3char:null,price4char:null,price5char:null}},components:{ConnectWalletButton:R,SwitchChainButton:I,WaitingToast:H},mounted(){this.fetchDomainData()},computed:{balanceTooLow(){const e=ge(this.balance);return Number(e)<Number(this.getNamePrice)},domainNotValid(){return this.domainName===""?{invalid:!0,message:null}:this.domainName===null?{invalid:!0,message:null}:this.domainName.includes(".")?{invalid:!0,message:"Dots not allowed"}:this.domainName.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:this.domainName.includes("%")?{invalid:!0,message:"% not allowed"}:this.domainName.includes("&")?{invalid:!0,message:"& not allowed"}:this.domainName.includes("?")?{invalid:!0,message:"? not allowed"}:this.domainName.includes("#")?{invalid:!0,message:"# not allowed"}:this.domainName.includes("/")?{invalid:!0,message:"/ not allowed"}:this.domainName.includes(",")?{invalid:!0,message:"Comma not allowed"}:this.domainName.includes("\\")||this.domainName.includes("\xAD")||this.domainName.includes("	")||this.domainName.includes("\u034F")||this.domainName.includes("\u061C")||this.domainName.includes("\u070F")||this.domainName.includes("\u115F")||this.domainName.includes("\u1160")||this.domainName.includes("\u1680")||this.domainName.includes("\u17B4")||this.domainName.includes("\u17B5")||this.domainName.includes("\u180E")||this.domainName.includes("\u2000")||this.domainName.includes("\u2001")||this.domainName.includes("\u2002")||this.domainName.includes("\u2003")||this.domainName.includes("\u2004")||this.domainName.includes("\u2005")||this.domainName.includes("\u2006")||this.domainName.includes("\u2007")||this.domainName.includes("\u2008")||this.domainName.includes("\u2009")||this.domainName.includes("\u200A")||this.domainName.includes("\u200B")||this.domainName.includes("\u200C")||this.domainName.includes("\u200D")||this.domainName.includes("\u200E")||this.domainName.includes("\u200F")||this.domainName.includes("\u202F")||this.domainName.includes("\u205F")||this.domainName.includes("\u2060")||this.domainName.includes("\u2061")||this.domainName.includes("\u2062")||this.domainName.includes("\u2063")||this.domainName.includes("\u2064")||this.domainName.includes("\u206A")||this.domainName.includes("\u206B")||this.domainName.includes("\u206C")||this.domainName.includes("\u206D")||this.domainName.includes("\u206E")||this.domainName.includes("\u206F")||this.domainName.includes("\u3000")||this.domainName.includes("\u2800")||this.domainName.includes("\u3164")||this.domainName.includes("\uFFA0")||this.domainName.includes("\u{110B1}")||this.domainName.includes("\u{1BCA0}")||this.domainName.includes("\u{1BCA1}")||this.domainName.includes("\u{1BCA2}")||this.domainName.includes("\u{1BCA3}")||this.domainName.includes("\u{1D159}")||this.domainName.includes("\u{1D173}")||this.domainName.includes("\u{1D174}")||this.domainName.includes("\u{1D175}")||this.domainName.includes("\u{1D176}")||this.domainName.includes("\u{1D177}")||this.domainName.includes("\u{1D178}")||this.domainName.includes("\u{1D179}")||this.domainName.includes("\u{1D17A}")||this.domainName.includes("\v")||this.domainName.includes("\f")||this.domainName.includes("\x85")?{invalid:!0,message:"This character is not allowed"}:{invalid:!1,message:"Domain name is valid"}},getNamePrice(){return this.$config.public.punkNumberOfPrices===1?this.price:this.domainName?this.domainName.match(/./gu).length===1?this.price1char:this.domainName.match(/./gu).length===2?this.price2char:this.domainName.match(/./gu).length===3?this.price3char:this.domainName.match(/./gu).length===4?this.price4char:this.domainName.match(/./gu).length>=5?this.price5char:this.price5char:this.price5char},isSupportedChain(){return this.chainId===this.$config.public.supportedChainId}},methods:{getDomainName:L,async fetchDomainData(){this.loadingData=!0,this.isMinter=this.$config.public.punkMinterAddress!=="";const e=new A(["function buyingEnabled() view returns (bool)","function paused() view returns (bool)","function price() view returns (uint256)","function price1char() view returns (uint256)","function price2char() view returns (uint256)","function price3char() view returns (uint256)","function price4char() view returns (uint256)","function price5char() view returns (uint256)","function referral() view returns (uint256)","function referralFee() view returns (uint256)"]);let i;this.isMinter?i=this.$config.public.punkMinterAddress:i=this.$config.public.punkTldAddress;let o=this.$getFallbackProvider(this.$config.public.supportedChainId);const s=new D(i,e,o);this.isMinter?this.paused=await s.paused():this.paused=!await s.buyingEnabled(),this.$config.public.punkNumberOfPrices===1?this.price=C(await s.price(),this.$config.public.tokenDecimals):this.$config.public.punkNumberOfPrices===5&&(this.price1char=C(await s.price1char(),this.$config.public.tokenDecimals),this.price2char=C(await s.price2char(),this.$config.public.tokenDecimals),this.price3char=C(await s.price3char(),this.$config.public.tokenDecimals),this.price4char=C(await s.price4char(),this.$config.public.tokenDecimals),this.price5char=C(await s.price5char(),this.$config.public.tokenDecimals)),this.isMinter?this.referralFee=await s.referralFee():this.referralFee=await s.referral(),this.loadingData=!1},async fetchUserDomain(){if(this.isActivated){let e;if(this.signer)e=await this.getDomainName(this.address,this.signer);else{const i=this.$getFallbackProvider(this.$config.public.supportedChainId);e=await this.getDomainName(this.address,i)}e?(this.userStore.setDefaultDomain(e+this.$config.public.tldName),G(window,this.address,e+this.$config.public.tldName)):this.userStore.setDefaultDomain(null)}},async mintName(){if(this.loadingMint=!0,this.isActivated&&!this.domainNotValid.invalid){const e=new A(["function getDomainHolder(string) view returns (address)"]);if(await new D(this.$config.public.punkTldAddress,e,this.signer).getDomainHolder(this.domainName.toLowerCase())!==X){this.toast("This name is already taken",{type:"error"}),this.loadingMint=!1;return}try{const s=new A(["function mint(string memory _domainName, address _domainHolder, address _referrer) external payable returns(uint256)"]);let r;this.isMinter?r=this.$config.public.punkMinterAddress:r=this.$config.public.punkTldAddress;const u=await new D(r,s,this.signer).mint(this.domainName.toLowerCase(),this.address,$e(window),{value:_e(this.getNamePrice,this.$config.public.tokenDecimals)}),m=this.toast({component:H,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+u.hash,"_blank").focus()}),h=await u.wait();h.status===1?(this.toast.dismiss(m),this.fetchUserDomain(),this.toast("You have successfully minted a name!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+u.hash,"_blank").focus()}),this.loadingMint=!1):(this.toast.dismiss(m),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+u.hash,"_blank").focus()}),this.loadingMint=!1,console.log(h))}catch(s){console.log("error: "+s),this.toast("Error: "+s,{type:"error"}),this.loadingMint=!1;return}}}},setup(){const{address:e,balance:i,chainId:o,isActivated:s,signer:r}=$(),a=z(),u=T();return{address:e,balance:i,chainId:o,isActivated:s,signer:r,toast:a,userStore:u}}},jt={class:"card m-2 bg-light"},Ht={class:"card-header bg-light"},Ot={class:"card-body sidebar-card-body"},zt={class:"input-group mb-3"},qt={class:"input-group-text",id:"mint-name"},Gt={key:0,class:"text-danger"},Yt=t("i",{class:"bi bi-exclamation-octagon"},null,-1),Jt={class:"text-center"},Zt=["disabled"],Kt={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},Qt={key:1},Xt={key:2};function ei(e,i,o,s,r,a){const u=b("ConnectWalletButton"),m=b("SwitchChainButton");return n(),l("div",jt,[t("div",Ht,"Get a "+g(e.$config.public.tldName)+" name",1),t("div",Ot,[t("p",null,"Get yourself a "+g(e.$config.public.tldName)+" username and start chatting with other community members.",1),t("div",zt,[U(t("input",{type:"text",class:"form-control text-end",placeholder:"enter name","aria-describedby":"mint-name","onUpdate:modelValue":i[0]||(i[0]=h=>r.domainName=h)},null,512),[[P,r.domainName]]),t("span",qt,g(e.$config.public.tldName),1)]),a.domainNotValid.invalid&&a.domainNotValid.message?(n(),l("p",Gt,[t("small",null,[Yt,p(" "+g(a.domainNotValid.message),1)])])):d("",!0),t("p",null,"Minting price: "+g(a.getNamePrice)+" "+g(e.$config.public.tokenSymbol),1),t("div",Jt,[s.isActivated&&a.isSupportedChain?(n(),l("button",{key:0,class:"btn btn-outline-primary mt-2 mb-2",disabled:r.paused||a.domainNotValid.invalid||a.balanceTooLow},[r.loadingMint||r.loadingData?(n(),l("span",Kt)):d("",!0),r.loadingData?(n(),l("span",Qt,"Loading data...")):d("",!0),!r.loadingMint&&!r.loadingData&&a.balanceTooLow?(n(),l("span",Xt,"Balance too low")):d("",!0),!r.loadingMint&&!r.loadingData&&!a.balanceTooLow?(n(),l("span",{key:3,onClick:i[1]||(i[1]=(...h)=>a.mintName&&a.mintName(...h))},"Mint username")):d("",!0)],8,Zt)):d("",!0),s.isActivated?d("",!0):(n(),w(u,{key:1,class:"btn btn-outline-primary mt-2 mb-2",btnText:"Connect Wallet"})),s.isActivated&&!a.isSupportedChain?(n(),w(m,{key:2})):d("",!0)])])])}const ti=S(Vt,[["render",ei]]),ii={name:"SimpleSwapWidget",props:["poweredBy","routerAddress","title","tokens"],components:{SimpleSwap:Me}},si={class:"card m-2 bg-light"},ai={class:"card-header bg-light"},ni={class:"card-body sidebar-card-body"};function oi(e,i,o,s,r,a){const u=b("SimpleSwap");return n(),l("div",si,[t("div",ai,g(o.title),1),t("div",ni,[c(u,{class:"mt-3",routerAddress:o.routerAddress,swapId:"SidebarRight1",tokens:o.tokens,poweredBy:o.poweredBy},null,8,["routerAddress","tokens","poweredBy"])])])}const ri=S(ii,[["render",oi]]),li={name:"ReferralWidget",components:{ShareReferralLink:te}},di={class:"card m-2 bg-light"},ci=t("div",{class:"card-header bg-light"},"Your referral link \u{1F911}",-1),ui={class:"card-body sidebar-card-body"},mi=t("p",null,"Share your referral link and earn referral fees!",-1);function hi(e,i,o,s,r,a){const u=b("ShareReferralLink");return n(),l("div",di,[ci,t("div",ui,[mi,c(u)])])}const pi=S(li,[["render",hi]]),bi={name:"SidebarRight",props:["rSidebar","isMobile"],components:{ConnectWalletButton:R,NameMintWidget:ti,ReferralWidget:pi,SimpleSwapWidget:ri,SwitchChainButton:I},computed:{isSupportedChain(){return this.chainId===this.$config.public.supportedChainId}},methods:{closeRightSidebar(){this.isMobile&&(this.sidebarStore.setRightSidebar(!1),this.sidebarStore.setMainContent(!0))},deleteBrowserStorage(){window.localStorage.clear(),window.sessionStorage.clear(),window.location.reload()}},setup(){const{chainId:e,disconnect:i,isActivated:o}=$(),s=F();return{chainId:e,disconnect:i,isActivated:o,sidebarStore:s,tokens:ye}}},fi={class:"col-auto col-lg-3 px-0 mt-1"},gi={id:"sidebar-nav",class:"list-group border-0 rounded-0 text-sm-start min-vh-100"},_i={key:0,class:"card m-2 bg-light"},vi={class:"card-body sidebar-card-body text-center mt-4"},wi={class:"dropdown mt-2"},Si=t("button",{class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1),ki={class:"dropdown-menu"},Ni={key:1,class:"card m-2 bg-light"},yi={class:"card-header bg-light"},$i={class:"card-body sidebar-card-body"},Ci=["src"],Mi={key:3,class:"card m-2 bg-light"},Ai={class:"card-header bg-light"},Di={class:"card-body sidebar-card-body"},Li=["href"],Ui=t("i",{class:"bi bi-box-arrow-up-right ms-1"},null,-1);function Ti(e,i,o,s,r,a){const u=b("ConnectWalletButton"),m=b("SwitchChainButton"),h=b("NameMintWidget"),_=b("ReferralWidget"),M=b("SimpleSwapWidget");return n(),l("div",fi,[t("div",{id:"sidebar2",class:v(["collapse collapse-horizontal",{show:s.sidebarStore.showRightSidebar}])},[t("div",gi,[o.isMobile?(n(),l("div",_i,[t("div",vi,[s.isActivated?d("",!0):(n(),w(u,{key:0,class:"btn btn-primary",btnText:"Connect wallet"})),s.isActivated&&!a.isSupportedChain?(n(),w(m,{key:1})):d("",!0),t("div",wi,[Si,t("ul",ki,[t("li",null,[s.isActivated?(n(),l("button",{key:0,class:"dropdown-item",onClick:i[0]||(i[0]=(...y)=>s.disconnect&&s.disconnect(...y))},"Disconnect wallet")):d("",!0)]),t("li",null,[t("button",{class:"dropdown-item",onClick:i[1]||(i[1]=(...y)=>a.deleteBrowserStorage&&a.deleteBrowserStorage(...y))},"Delete browser storage")])])])])])):d("",!0),c(h),c(_),e.$config.public.showFeatures.spotify?(n(),l("div",Ni,[t("div",yi,g(e.$config.public.projectName)+" Playlist",1),t("div",$i,[t("iframe",{style:{"border-radius":"12px"},src:"https://open.spotify.com/embed/playlist/"+e.$config.public.spotifyPlaylistId+"?utm_source=generator&theme=0",width:"100%",height:"352",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,Ci)])])):d("",!0),e.$config.public.swapRouterAddress&&e.$config.public.showFeatures.swap?(n(),w(M,{key:2,routerAddress:e.$config.public.swapRouterAddress,tokens:s.tokens,title:"Swap tokens"},null,8,["routerAddress","tokens"])):d("",!0),e.$config.public.newsletterLink&&e.$config.public.showFeatures.newsletter?(n(),l("div",Mi,[t("div",Ai,g(e.$config.public.projectName)+" Newsletter",1),t("div",Di,[t("a",{class:"btn btn-outline-primary mt-2 mb-2",target:"_blank",href:e.$config.public.newsletterLink},[p(" Join our newsletter! "),Ui],8,Li)])])):d("",!0)])],2)])}const Bi=S(bi,[["render",Ti]]),Wi={name:"ChatSettingsModal",computed:{slippage:{get(){return this.siteStore.getSlippage},set(e){this.siteStore.setSlippage(e)}},deadline:{get(){return this.siteStore.getSwapDeadline},set(e){this.siteStore.setSwapDeadline(e)}}},setup(){return{siteStore:q()}}},Pi={class:"modal fade",id:"chatSettingsModal",tabindex:"-1","aria-labelledby":"chatSettingsModalLabel","aria-hidden":"true"},Ri={class:"modal-dialog"},Ii={class:"modal-content"},Fi=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"chatSettingsModalLabel"},"Settings"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),xi={class:"modal-body"},Ei=t("p",null,[t("strong",null,"Swap")],-1),Vi={class:"row"},ji={class:"col-sm-6 mb-2"},Hi={class:"input-group flex-nowrap"},Oi=t("span",{class:"input-group-text",id:"addon-wrapping"},"Slippage",-1),zi=t("span",{class:"input-group-text",id:"addon-wrapping"},"%",-1),qi={class:"col-sm-6 mb-2"},Gi={class:"input-group flex-nowrap"},Yi=t("span",{class:"input-group-text",id:"addon-wrapping"},"Deadline",-1),Ji=t("span",{class:"input-group-text",id:"addon-wrapping"},"min",-1);function Zi(e,i,o,s,r,a){return n(),l("div",Pi,[t("div",Ri,[t("div",Ii,[Fi,t("div",xi,[Ei,t("div",Vi,[t("div",ji,[t("div",Hi,[Oi,U(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=u=>a.slippage=u),"aria-describedby":"addon-wrapping"},null,512),[[P,a.slippage]]),zi])]),t("div",qi,[t("div",Gi,[Yi,U(t("input",{"onUpdate:modelValue":i[1]||(i[1]=u=>a.deadline=u),type:"text",class:"form-control","aria-describedby":"addon-wrapping"},null,512),[[P,a.deadline]]),Ji])])])])])])])}const Ki=S(Wi,[["render",Zi]]),Qi={name:"ReferralModal",components:{ShareReferralLink:te}},Xi={class:"modal fade",id:"referralModal",tabindex:"-1","aria-labelledby":"referralModalLabel","aria-hidden":"true"},es={class:"modal-dialog"},ts={class:"modal-content"},is=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"referralModalLabel"},"Share referral link"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ss={class:"modal-body"},as={key:0},ns=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);function os(e,i,o,s,r,a){const u=b("ShareReferralLink");return n(),l("div",Xi,[t("div",es,[t("div",ts,[is,t("div",ss,[t("p",null,[p(" Share your referral link and earn referral fees"),e.$config.public.showFeatures.activityPoints?(n(),l("span",as," (and activity points)")):d("",!0),p("! \u{1F911} ")]),c(u)]),ns])])])}const rs=S(Qi,[["render",os]]),ls={name:"ChangeUsernameModal",data(){return{domainName:null,loading:!1}},computed:{domainNotValid(){return this.domainName===""?{invalid:!0,message:null}:this.domainName===null?{invalid:!0,message:null}:this.domainName.includes(".")?{invalid:!0,message:"Dots not allowed"}:this.domainName.includes(" ")?{invalid:!0,message:"Spaces not allowed"}:this.domainName.includes("%")?{invalid:!0,message:"% not allowed"}:this.domainName.includes("&")?{invalid:!0,message:"& not allowed"}:this.domainName.includes("?")?{invalid:!0,message:"? not allowed"}:this.domainName.includes("#")?{invalid:!0,message:"# not allowed"}:this.domainName.includes("/")?{invalid:!0,message:"/ not allowed"}:this.domainName.includes(",")?{invalid:!0,message:"Comma not allowed"}:this.domainName.includes("\\")||this.domainName.includes("\xAD")||this.domainName.includes("	")||this.domainName.includes("\u034F")||this.domainName.includes("\u061C")||this.domainName.includes("\u070F")||this.domainName.includes("\u115F")||this.domainName.includes("\u1160")||this.domainName.includes("\u1680")||this.domainName.includes("\u17B4")||this.domainName.includes("\u17B5")||this.domainName.includes("\u180E")||this.domainName.includes("\u2000")||this.domainName.includes("\u2001")||this.domainName.includes("\u2002")||this.domainName.includes("\u2003")||this.domainName.includes("\u2004")||this.domainName.includes("\u2005")||this.domainName.includes("\u2006")||this.domainName.includes("\u2007")||this.domainName.includes("\u2008")||this.domainName.includes("\u2009")||this.domainName.includes("\u200A")||this.domainName.includes("\u200B")||this.domainName.includes("\u200C")||this.domainName.includes("\u200D")||this.domainName.includes("\u200E")||this.domainName.includes("\u200F")||this.domainName.includes("\u202F")||this.domainName.includes("\u205F")||this.domainName.includes("\u2060")||this.domainName.includes("\u2061")||this.domainName.includes("\u2062")||this.domainName.includes("\u2063")||this.domainName.includes("\u2064")||this.domainName.includes("\u206A")||this.domainName.includes("\u206B")||this.domainName.includes("\u206C")||this.domainName.includes("\u206D")||this.domainName.includes("\u206E")||this.domainName.includes("\u206F")||this.domainName.includes("\u3000")||this.domainName.includes("\u2800")||this.domainName.includes("\u3164")||this.domainName.includes("\uFFA0")||this.domainName.includes("\u{110B1}")||this.domainName.includes("\u{1BCA0}")||this.domainName.includes("\u{1BCA1}")||this.domainName.includes("\u{1BCA2}")||this.domainName.includes("\u{1BCA3}")||this.domainName.includes("\u{1D159}")||this.domainName.includes("\u{1D173}")||this.domainName.includes("\u{1D174}")||this.domainName.includes("\u{1D175}")||this.domainName.includes("\u{1D176}")||this.domainName.includes("\u{1D177}")||this.domainName.includes("\u{1D178}")||this.domainName.includes("\u{1D179}")||this.domainName.includes("\u{1D17A}")||this.domainName.includes("\v")||this.domainName.includes("\f")||this.domainName.includes("\x85")?{invalid:!0,message:"This character is not allowed"}:{invalid:!1,message:"Domain name is valid"}}},methods:{getDomainName:L,async changeUsername(){if(this.loading=!0,this.isActivated&&!this.domainNotValid.invalid){const e=new A(["function editDefaultDomain(string calldata _domainName) external"]),i=new D(this.$config.public.punkTldAddress,e,this.signer);try{const o=await i.editDefaultDomain(this.domainName.toLowerCase()),s=this.toast({component:H,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),r=await o.wait();r.status===1?(this.toast.dismiss(s),this.fetchUserDomain(),this.toast("You have successfully changed your username!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.loading=!1,document.getElementById("closeChangeUsernameModal").click()):(this.toast.dismiss(s),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o.hash,"_blank").focus()}),this.loading=!1,console.log(r))}catch(o){console.log("error: "+o),this.toast("Error: "+o,{type:"error"}),this.loading=!1;return}}},async fetchUserDomain(){if(this.isActivated){let e;if(this.signer)e=await this.getDomainName(this.address,this.signer);else{const i=this.$getFallbackProvider(this.$config.public.supportedChainId);e=await this.getDomainName(this.address,i)}e?(this.userStore.setDefaultDomain(e+this.$config.public.tldName),G(window,this.address,e+this.$config.public.tldName)):this.userStore.setDefaultDomain(null)}}},setup(){const{address:e,isActivated:i,signer:o}=$(),s=z(),r=T();return{address:e,isActivated:i,signer:o,toast:s,userStore:r}}},ds={class:"modal fade",id:"changeUsernameModal",tabindex:"-1","aria-labelledby":"changeUsernameModalLabel","aria-hidden":"true"},cs={class:"modal-dialog"},us={class:"modal-content"},ms=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"changeUsernameModalLabel"},"Change your username"),t("button",{id:"closeChangeUsernameModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),hs={class:"modal-body"},ps=t("p",null,"Enter your new main username (you must own it):",-1),bs={class:"input-group mb-3"},fs={class:"input-group-text"},gs={key:0,class:"text-danger"},_s=t("i",{class:"bi bi-exclamation-octagon"},null,-1),vs={class:"modal-footer"},ws=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Ss=["disabled"],ks={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function Ns(e,i,o,s,r,a){return n(),l("div",ds,[t("div",cs,[t("div",us,[ms,t("div",hs,[ps,t("div",bs,[U(t("input",{type:"text",class:"form-control text-end",placeholder:"enter name","onUpdate:modelValue":i[0]||(i[0]=u=>r.domainName=u)},null,512),[[P,r.domainName]]),t("span",fs,g(e.$config.public.tldName),1)]),a.domainNotValid.invalid&&a.domainNotValid.message?(n(),l("p",gs,[t("small",null,[_s,p(" "+g(a.domainNotValid.message),1)])])):d("",!0)]),t("div",vs,[ws,t("button",{type:"button",disabled:r.loading||a.domainNotValid.invalid,class:"btn btn-primary",onClick:i[1]||(i[1]=(...u)=>a.changeUsername&&a.changeUsername(...u))},[r.loading?(n(),l("span",ks)):d("",!0),p(" Submit ")],8,Ss)])])])])}const ys=S(ls,[["render",Ns]]),$s={name:"FindUserModal",components:{FindUser:Ae},methods:{closeModal(){document.getElementById("closeFindUserModal").click()}}},Cs={class:"modal fade",id:"findUserModal",tabindex:"-1","aria-labelledby":"findUserModalLabel","aria-hidden":"true"},Ms={class:"modal-dialog"},As={class:"modal-content"},Ds=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"findUserModalLabel"},"Find user"),t("button",{id:"closeFindUserModal",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ls={class:"modal-body"},Us=t("p",null,"Find user by their domain name:",-1);function Ts(e,i,o,s,r,a){const u=b("FindUser");return n(),l("div",Cs,[t("div",Ms,[t("div",As,[Ds,t("div",Ls,[Us,c(u,{onCloseModal:a.closeModal},null,8,["onCloseModal"])])])])])}const Bs=S($s,[["render",Ts]]);const Ws={data(){return{breakpoint:1e3,isMounted:!1,lSidebar:null,referrer:null,rSidebar:null,width:null}},components:{ChangeUsernameModal:ys,ChatSettingsModal:Ki,FindUserModal:Bs,NavbarDesktop:tt,NavbarMobile:ht,ReferralModal:rs,SidebarLeft:Et,SidebarRight:Bi,VueDappModal:we},mounted(){this.isMounted=!0,document.documentElement.setAttribute("data-bs-theme",this.siteStore.getColorMode),this.lSidebar=new bootstrap.Collapse("#sidebar1",{toggle:!1}),this.rSidebar=new bootstrap.Collapse("#sidebar2",{toggle:!1}),this.width=window.innerWidth,this.width<this.breakpoint?(this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setRightSidebar(!1),this.lSidebar.hide(),this.rSidebar.hide()):(this.lSidebar.show(),this.sidebarStore.setLeftSidebar(!0),this.sidebarStore.setRightSidebar(!0)),window.addEventListener("resize",this.onWidthChange),this.isActivated||(localStorage.getItem("connected")=="metamask"?this.connectMetaMask():localStorage.getItem("connected")=="coinbase"&&this.connectCoinbase()),new bootstrap.Popover(document.body,{selector:"[data-bs-toggle='popover']"}),this.fetchArweaveBalance(),this.siteStore.setFileUploadEnabled(this.$config.public.fileUploadEnabled),this.referrer=this.$route.query.ref,this.referrer&&this.parseReferrer()},unmounted(){window.removeEventListener("resize",onWidthChange)},computed:{isMobile(){return this.width<this.breakpoint}},methods:{getActivityPoints:j,getDomainHolder:ke,getDomainName:L,async connectCoinbase(){await this.connectTo("BrowserWallet",{target:"rdns",rdns:K.coinbase}),localStorage.setItem("connected","coinbase"),document.getElementById("closeConnectModal").click()},async connectMetaMask(){await this.connectTo("BrowserWallet",{target:"rdns",rdns:K.metamask}),localStorage.setItem("connected","metamask"),document.getElementById("closeConnectModal").click()},async fetchActivityPoints(){if(this.$config.public.activityPointsAddress){const e=await this.getActivityPoints(this.address,this.signer);this.userStore.setCurrentUserActivityPoints(e)}},async fetchArweaveBalance(){if(this.$config.public.arweaveAddress){const e=await Ne(this.$config.public.arweaveAddress);this.siteStore.setArweaveBalance(e)}},onWidthChange(){this.width=window.innerWidth},async parseReferrer(){if(!this.referrer.startsWith("0x")){let e=this.referrer;this.referrer.includes(this.$config.public.tldName)&&(e=this.referrer.split(".")[0]);const i=this.$getFallbackProvider(this.$config.public.supportedChainId);this.referrer=await this.getDomainHolder(e,i)}this.address&&String(this.address).toLowerCase()===String(this.referrer).toLowerCase()||ce(this.referrer)&&this.referrer!=X&&Ce(window,this.referrer)}},setup(){ue();const e=F(),i=q(),o=T(),{address:s,chainId:r,isActivated:a,signer:u,setWallet:m,resetWallet:h,addConnectors:_,connectTo:M,watchWalletChanged:y,watchDisconnect:x,watchAddressChanged:Y,fetchBalance:E}=$();_([new ve]);const{$config:N,$getFallbackProvider:V}=me();y(async k=>{m(k.provider),await E(),B()}),x(()=>{h(),console.log("user disconnected"),localStorage.setItem("connected","")});async function B(){if(r.value===N.public.supportedChainId&&s.value!=o.getCurrentUserAddress){o.setCurrentUserAddress(s.value);let k;if(u.value)k=await L(s.value,u.value);else{const Z=V(N.public.supportedChainId);k=await L(s.value,Z)}k?(o.setDefaultDomain(k+N.public.tldName),G(window,s.value,k+N.public.tldName)):o.setDefaultDomain(null),W(),J()}}async function W(){if(N.public.activityPointsAddress){const k=await j(s.value,u.value);o.setCurrentUserActivityPoints(k)}}async function J(){if(N.public.chatTokenAddress){const k=new A(["function balanceOf(address owner) view returns (uint256)"]),se=await new D(N.public.chatTokenAddress,k,u.value).balanceOf(s.value);o.setChatTokenBalanceWei(se)}}return{address:s,chainId:r,connectTo:M,isActivated:a,signer:u,sidebarStore:e,siteStore:i,userStore:o,fetchUserDomain:B,fetchActivityPoints:W,fetchChatTokenBalance:J}},watch:{width(e,i){e>this.breakpoint?(this.lSidebar.show(),this.rSidebar.show(),this.sidebarStore.setLeftSidebar(!0),this.sidebarStore.setMainContent(!0),this.sidebarStore.setRightSidebar(!0)):(this.lSidebar.hide(),this.rSidebar.hide(),this.sidebarStore.setLeftSidebar(!1),this.sidebarStore.setMainContent(!0),this.sidebarStore.setRightSidebar(!1))}}},Ps={class:"container-fluid page-container"},Rs={class:"row flex-nowrap"},Is={class:"col col-lg-4 ps-md-2 pt-2 main-containter"};function Fs(e,i,o,s,r,a){const u=ne,m=oe,h=re,_=ae,M=b("NavbarDesktop"),y=b("NavbarMobile"),x=b("SidebarLeft"),Y=b("SidebarRight"),E=b("VueDappModal"),N=b("ChatSettingsModal"),V=b("ChangeUsernameModal"),B=b("FindUserModal"),W=b("ReferralModal");return n(),l(Q,null,[c(_,null,{default:f(()=>[c(u,null,{default:f(()=>[p(g(e.$config.public.projectMetadataTitle),1)]),_:1}),c(m,{name:"description",content:e.$config.public.projectDescription},null,8,["content"]),c(h,{rel:"icon",type:"image/x-icon",href:e.$config.public.favicon},null,8,["href"]),c(m,{property:"og:title",content:e.$config.public.projectMetadataTitle},null,8,["content"]),c(m,{property:"og:description",content:e.$config.public.projectDescription},null,8,["content"]),c(m,{property:"og:image",content:e.$config.public.projectUrl+e.$config.public.previewImage},null,8,["content"]),c(m,{name:"twitter:card",content:"summary_large_image"}),c(m,{name:"twitter:site",content:e.$config.public.projectTwitter},null,8,["content"]),c(m,{name:"twitter:creator",content:e.$config.public.projectTwitter},null,8,["content"]),c(m,{name:"twitter:title",content:e.$config.public.projectMetadataTitle},null,8,["content"]),c(m,{name:"twitter:description",content:e.$config.public.projectDescription},null,8,["content"]),c(m,{name:"twitter:image",content:e.$config.public.projectUrl+e.$config.public.previewImage},null,8,["content"])]),_:1}),a.isMobile?d("",!0):(n(),w(M,{key:0})),a.isMobile?(n(),w(y,{key:1,lSidebar:r.lSidebar,rSidebar:r.rSidebar},null,8,["lSidebar","rSidebar"])):d("",!0),t("div",Ps,[t("div",Rs,[c(x,{lSidebar:r.lSidebar,isMobile:a.isMobile},null,8,["lSidebar","isMobile"]),U(t("main",Is,[pe(e.$slots,"default")],512),[[he,s.sidebarStore.showMainContent]]),c(Y,{rSidebar:r.rSidebar,isMobile:a.isMobile},null,8,["rSidebar","isMobile"])])]),c(E,{dark:s.siteStore.getColorMode==="dark","auto-connect":"","auto-connect-browser-wallet-if-solo":""},null,8,["dark"]),c(N),c(V),c(B),c(W),(n(),w(be("script"),null,{default:f(()=>[p(" var global = global || window; ")]),_:1}))],64)}const ia=S(Ws,[["render",Fs]]);export{ia as default};
