import{_ as S,W as C,i as U,E as v,l as T,a5 as j,m as V,c as p,o as l,a as s,t as d,d as W,p as I,v as B,g as h,a6 as H,Z as c,j as P,A as M,x as D,y as R,a4 as Y,a7 as z,a8 as K,S as X,I as Z,a9 as q,D as G,r as x,F as N,$ as O,f as F,b as _,w as L,T as J,M as Q,H as $}from"#entry";import{t as tt}from"./CWGjUj_J.js";const et={name:"TokenApprovalModal",props:["amount","modalId","routerAddress","token"],emits:["setApprovalAmount"],components:{WaitingToast:C},data(){return{waiting:!1,selectedOption:"unlimited",approvalAmount:0}},mounted(){this.approvalAmount=this.amount},computed:{isUnlimited(){return this.selectedOption==="unlimited"}},methods:{selectOption(n){this.selectedOption=n},async approveToken(){const n=this.toast({component:C,props:{text:"Please confirm the transaction."}},{type:"info"});this.waiting=!0;let e=this.approvalAmount;this.isUnlimited&&(e=1e16);const i=v(String(e),this.token.decimals),a={address:this.token.address,abi:j,functionName:"approve",args:[this.routerAddress,BigInt(i)]};let o;try{const t=await T(a);this.toast.dismiss(n),o=this.toast({component:C,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+t,"_blank").focus()});const u=await V(t);u.status==="success"?(this.toast.dismiss(o),this.toast("You have successfully approved "+this.token.symbol+"!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+t,"_blank").focus()}),this.$emit("setApprovalAmount",e),this.waiting=!1,document.getElementById("closeTokenApprovalModal"+this.modalId).click()):(this.waiting=!1,this.toast.dismiss(o),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+t,"_blank").focus()}),console.log(u))}catch(t){try{let u=t.message.split("Details:")[1];u=u.split("Version: viem")[0],u=u.replace(/"/g,""),u=u.replace("execution reverted:","Error:"),console.log(u),this.toast(u,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1}finally{this.toast.dismiss(o),this.toast.dismiss(n),this.waiting=!1;return}}},setup(){return{toast:U()}},watch:{amount(n,e){n&&(this.approvalAmount=this.amount)}}},nt=["id","aria-labelledby"],st={class:"modal-dialog"},ot={class:"modal-content"},it={class:"modal-header"},at=["id"],ut=["id"],rt={class:"modal-body"},lt={class:"row mt-3"},dt={class:"col-lg-8"},pt={class:"input-group-text"},ct=["checked"],mt={class:"input-group-text"},ht=["checked"],kt=["disabled"],bt={class:"input-group-text",id:"basic-addon2"},Tt={class:"modal-footer"},ft=["disabled"],gt={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"},yt={key:1},wt={key:2};function At(n,e,i,a,o,t){return l(),p("div",{class:"modal fade",id:"tokenApprovalModal"+i.modalId,tabindex:"-1","aria-labelledby":"tokenApprovalModalLabel"+i.modalId,"aria-hidden":"true"},[s("div",st,[s("div",ot,[s("div",it,[s("h1",{class:"modal-title fs-5",id:"tokenApprovalModalLabel"+i.modalId},"Approve "+d(i.token?.symbol)+" token",9,at),s("button",{id:"closeTokenApprovalModal"+i.modalId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,ut)]),s("div",rt,[W(" Approve "+d(i.token?.symbol)+" tokens for swapping: ",1),s("div",lt,[s("div",dt,[s("div",{class:"input-group",onClick:e[0]||(e[0]=u=>t.selectOption("unlimited"))},[s("div",pt,[s("input",{class:"form-check-input mt-0",type:"radio",checked:t.isUnlimited},null,8,ct)]),e[4]||(e[4]=s("input",{value:"Unlimited",type:"text",class:"form-control",disabled:""},null,-1))]),s("div",{class:"input-group mt-2",onClick:e[2]||(e[2]=u=>t.selectOption("limited"))},[s("div",mt,[s("input",{class:"form-check-input mt-0",type:"radio",checked:!t.isUnlimited},null,8,ht)]),I(s("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>o.approvalAmount=u),type:"text",class:"form-control",disabled:o.waiting},null,8,kt),[[B,o.approvalAmount]]),s("span",bt,d(i.token?.symbol),1)])])]),e[5]||(e[5]=s("p",{class:"mt-3"},[s("small",null,[s("em",null," If you want to do more swaps without approvals, set a big enough amount or choose unlimited. ")])],-1))]),s("div",Tt,[s("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=(...u)=>t.approveToken&&t.approveToken(...u)),disabled:o.waiting},[o.waiting?(l(),p("span",gt)):h("",!0),t.isUnlimited?(l(),p("span",yt,"Approve unlimited")):h("",!0),t.isUnlimited?h("",!0):(l(),p("span",wt,"Approve "+d(o.approvalAmount)+" "+d(i.token?.symbol),1))],8,ft)])])])],8,nt)}const _t=S(et,[["render",At]]),f={1:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",10:"0x4200000000000000000000000000000000000006",14:"0x1d80c49bbbcd1c0911346656b529df9e5c2f783d",19:"0x02f0826ef6aD107Cfc861152B32B52fD11BaB9ED",56:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",100:"0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",137:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270",250:"0x21be370d5312f44cb42ce377bc9b8a0cef1a4c83",324:"0x5aea5775959fbc2557cc8789bc1bf90a239d9a91",1101:"0x4f9a0e7fd2bf6067db6994cf12e4495df938e6e9",42161:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",43114:"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7",84532:"0x8FF82d2b0ab704Ba2AB5a567f32F1447A6158260",421614:"0xce314209aB485bE222CE85F653Ac918f54532503",11155111:"0xf531B8F309Be94191af87605CfBf600D71C2cFe0",666666666:"0xEb54dACB4C2ccb64F8074eceEa33b5eBb38E5387"};async function Ct(n,e,i,a){const o=[{name:"getPriceImpact",type:"function",stateMutability:"view",inputs:[{name:"tokenIn",type:"address"},{name:"tokenOut",type:"address"},{name:"amountIn",type:"uint256"}],outputs:[{name:"impact",type:"uint256"}]}],t=v(i,n.decimals),u=await P({address:a,abi:o,functionName:"getPriceImpact",args:[n.address,e.address,BigInt(t)]});return u?Number(u):(console.warn("Price impact read returned null, returning 0"),0)}async function xt(n,e,i,a){const o=H(),t=v(i,n.decimals);let u=[n.address,e.address];const k=f[String(o.public.supportedChainId)];if(n.address!==c&&n.address!==k&&e.address!==c&&e.address!==k&&(u=[n.address,k,e.address]),(n.address===c||n.address===k)&&(e.address===c||e.address===k))return t;const m=await P({address:a,abi:[{name:"getAmountsOut",type:"function",stateMutability:"view",inputs:[{name:"amountIn",type:"uint256"},{name:"path",type:"address[]"}],outputs:[{name:"amounts",type:"uint256[]"}]}],functionName:"getAmountsOut",args:[t,u]});return!m||m.length===0?(console.warn("Output amounts read returned null or empty array, returning 0"),BigInt(0)):m[m.length-1]}async function vt(n,e,i,a,o,t,u){const k=H(),{swapDeadline:w}=M(),m=BigInt(Math.floor(Date.now()/1e3)+60*Number(w.value)),r=String(f[String(k.public.supportedChainId)]).toLowerCase(),b=String(e.address).toLowerCase(),g=String(i.address).toLowerCase(),E=[{name:"deposit",type:"function",stateMutability:"payable",inputs:[],outputs:[]},{name:"withdraw",type:"function",stateMutability:"nonpayable",inputs:[{name:"wad",type:"uint256"}],outputs:[]}];if(b===c&&g===r)return T({address:r,abi:E,functionName:"deposit",value:a});if(b===r&&g===c)return T({address:r,abi:E,functionName:"withdraw",args:[a]});{const A=[{name:"swapExactTokensForTokens",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForTokensWithReferrer",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactETHForTokens",type:"function",stateMutability:"payable",inputs:[{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactETHForTokensWithReferrer",type:"function",stateMutability:"payable",inputs:[{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForETH",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"}],outputs:[{name:"amounts",type:"uint256[]"}]},{name:"swapExactTokensForETHWithReferrer",type:"function",stateMutability:"nonpayable",inputs:[{name:"amountIn",type:"uint256"},{name:"amountOutMin",type:"uint256"},{name:"path",type:"address[]"},{name:"to",type:"address"},{name:"deadline",type:"uint256"},{name:"referrer",type:"address"}],outputs:[{name:"amounts",type:"uint256[]"}]}];let y=[b,g];return b===c&&g!==r&&g!==c?u===c?T({address:t,abi:A,functionName:"swapExactETHForTokens",args:[o,y,n,m],value:a}):T({address:t,abi:A,functionName:"swapExactETHForTokensWithReferrer",args:[o,y,n,m,u],value:a}):b!==c&&b!==r&&g===c?u===c?T({address:t,abi:A,functionName:"swapExactTokensForETH",args:[a,o,y,n,m]}):T({address:t,abi:A,functionName:"swapExactTokensForETHWithReferrer",args:[a,o,y,n,m,u]}):(b!==r&&g!==r&&(y=[b,r,g]),u===c?T({address:t,abi:A,functionName:"swapExactTokensForTokens",args:[a,o,y,n,m]}):T({address:t,abi:A,functionName:"swapExactTokensForTokensWithReferrer",args:[a,o,y,n,m,u]}))}}const It={name:"UniV2SwapTokensModal",props:["inputToken","inputTokenAmount","modalId","outputToken","outputTokenAmount","outputTokenAmountWei","routerAddress"],emits:["changeInputTokenBalance"],data(){return{waiting:!1}},components:{WaitingToast:C},computed:{bothTokensAreNativeCoinOrWrappedToken(){return!!(this.inputIsNativeCoin&&this.outputIsWrappedNativeCoin||this.inputIsWrappedNativeCoin&&this.outputIsNativeCoin)},inputIsNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(c).toLowerCase()},inputIsWrappedNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(f[this.$config.public.supportedChainId]).toLowerCase()},outputIsNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(c).toLowerCase()},outputIsWrappedNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(f[this.$config.public.supportedChainId]).toLowerCase()}},methods:{async swap(){const n=this.toast({component:C,props:{text:"Please confirm the transaction."}},{type:"info"});this.waiting=!0;const e=v(this.inputTokenAmount,this.inputToken?.decimals),i=Y(window);let a;try{const o=await vt(this.address,this.inputToken,this.outputToken,e,this.outputTokenAmountWei,this.routerAddress,i);this.toast.dismiss(n),a=this.toast({component:C,props:{text:"Please wait for your transaction to confirm. Click on this notification to see transaction in the block explorer."}},{type:"info",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o,"_blank").focus()});const t=await V(o);t.status==="success"?(this.toast.dismiss(a),this.toast("You have successfully swapped "+this.inputToken.symbol+" for "+this.outputToken.symbol+"!",{type:"success",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o,"_blank").focus()}),this.$emit("changeInputTokenBalance"),this.waiting=!1,document.getElementById("closeSwapTokensModal"+this.modalId).click()):(this.waiting=!1,this.toast.dismiss(a),this.toast("Transaction has failed.",{type:"error",onClick:()=>window.open(this.$config.public.blockExplorerBaseUrl+"/tx/"+o,"_blank").focus()}),console.log(t))}catch(o){try{let t=o.message.split("Details:")[1];t=t.split("Version: viem")[0],t=t.replace(/"/g,""),t=t.replace("execution reverted:","Error:"),console.log(t),this.toast(t,{type:"error"})}catch{this.toast("Transaction has failed.",{type:"error"})}this.waiting=!1;return}finally{this.toast.dismiss(n),this.toast.dismiss(a),this.waiting=!1}this.waiting=!1}},setup(){const n=D(),{address:e}=R({config:n}),{slippage:i}=M(),a=U();return{address:e,slippage:i,toast:a}}},Bt=["id","aria-labelledby"],St={class:"modal-dialog"},Nt={class:"modal-content"},Wt={class:"modal-header"},Mt=["id"],Et=["id"],Ot={class:"modal-body"},Ft={class:"input-group mb-3"},Lt={class:"input-group-text",id:"basic-addon1"},Ut=["value"],Vt={class:"input-group mb-3"},Ht={class:"input-group-text",id:"basic-addon1"},Pt=["value"],Dt={key:0},Rt={class:"modal-footer"},jt=["disabled"],Yt={key:0,class:"spinner-border spinner-border-sm mx-1",role:"status","aria-hidden":"true"};function zt(n,e,i,a,o,t){return l(),p("div",{class:"modal fade",id:"swapTokensModal"+i.modalId,tabindex:"-1","aria-labelledby":"swapTokensModalLabel"+i.modalId,"aria-hidden":"true"},[s("div",St,[s("div",Nt,[s("div",Wt,[s("h1",{class:"modal-title fs-5",id:"swapTokensModalLabel"+i.modalId},"Swap tokens",8,Mt),s("button",{id:"closeSwapTokensModal"+i.modalId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,Et)]),s("div",Ot,[e[1]||(e[1]=s("p",null,"Double-check the swap amounts:",-1)),s("div",Ft,[s("span",Lt,d(i.inputToken?.symbol),1),s("input",{type:"text",class:"form-control",value:i.inputTokenAmount,disabled:""},null,8,Ut)]),e[2]||(e[2]=s("h4",{class:"text-center mt-2"},[s("i",{class:"bi bi-arrow-down"})],-1)),s("div",Vt,[s("span",Ht,d(i.outputToken?.symbol),1),s("input",{type:"text",class:"form-control",value:i.outputTokenAmount,disabled:""},null,8,Pt)]),t.bothTokensAreNativeCoinOrWrappedToken?h("",!0):(l(),p("small",Dt,[s("em",null," You will get at least "+d(i.outputTokenAmount)+" "+d(i.outputToken?.symbol)+", but probably more ("+d(a.slippage)+"% slippage). ",1)]))]),s("div",Rt,[s("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...u)=>t.swap&&t.swap(...u)),disabled:o.waiting},[o.waiting?(l(),p("span",Yt)):h("",!0),e[3]||(e[3]=W(" Swap tokens ",-1))],8,jt)])])])],8,Bt)}const Kt=S(It,[["render",zt]]),Xt={name:"UniV2Swap",props:["outputPlaceholder","poweredBy","routerAddress","swapId","tokens"],data(){return{debounce:null,filterTextInput:"",filterTextOutput:"",inputToken:null,inputTokenAllowance:0,inputTokenAmount:null,inputTokenBalance:null,outputText:"0",outputToken:null,outputTokenAmountWei:null,preswapCheck:!1,priceImpact:0,timeout:800,tokenList:[]}},components:{ConnectWalletButton:Z,UniV2SwapTokensModal:Kt,SwitchChainButton:X,TokenApprovalModal:_t},mounted(){this.tokenList=this.getFilteredTokens(this.tokens.tokens),this.selectInputToken(this.tokenList[0]),this.selectOutputToken(this.tokenList[1]),this.outputPlaceholder&&(this.outputText=this.outputPlaceholder)},computed:{allowanceTooLow(){return Number(this.inputTokenAllowance)<Number(this.inputTokenAmount)},bothTokensAreNativeCoinOrWrappedTokenOrSame(){return this.inputToken.address==c&&this.outputToken.address==f[this.$config.public.supportedChainId]||this.inputToken.address==f[this.$config.public.supportedChainId]&&this.outputToken.address==c||this.inputToken.address==c&&this.outputToken.address==c||this.inputToken.address==f[this.$config.public.supportedChainId]&&this.outputToken.address==f[this.$config.public.supportedChainId]?!0:this.inputToken.address==this.outputToken.address},bothTokensAreTheSame(){return this.inputToken.address==this.outputToken.address},filteredTokensInput(){const n=new RegExp(this.filterTextInput,"i");return this.tokenList.filter(e=>n.test(e.symbol))},filteredTokensOutput(){const n=new RegExp(this.filterTextOutput,"i");return this.tokenList.filter(e=>n.test(e.symbol))},formatInputTokenBalance(){return this.inputTokenBalance?this.inputTokenBalance==0?0:this.inputTokenBalance>100?Number(this.inputTokenBalance).toFixed(2):this.inputTokenBalance>1?Number(this.inputTokenBalance).toFixed(4):this.inputTokenBalance>.01?Number(this.inputTokenBalance).toFixed(6):this.inputTokenBalance>1e-4?Number(this.inputTokenBalance).toFixed(8):Number(this.inputTokenBalance).toFixed(10):0},inputAmountLessThanBalance(){return this.inputTokenAmount&&this.inputTokenBalance?Number(this.inputTokenAmount)<=Number(this.inputTokenBalance):!1},inputIsWrappedNativeCoin(){return String(this.inputToken?.address).toLowerCase()==String(f[this.$config.public.supportedChainId]).toLowerCase()},isSupportedChain(){return this.chainId===this.$config.public.supportedChainId},outputIsNativeCoin(){return String(this.outputToken?.address).toLowerCase()==String(c).toLowerCase()},outputTokenAmount(){if(this.outputTokenAmountWei){let n=G(String(this.outputTokenAmountWei),this.outputToken.decimals);return n==0?0:n>100?Number(n).toFixed(2):n>1?Number(n).toFixed(4):n>.01?Number(n).toFixed(6):n>1e-4?Number(n).toFixed(8):Number(n).toFixed(10)}return null},priceImpactTooHigh(){return this.priceImpact>this.$config.public.swapPriceImpactMaxBps},unwrappingWrappedNativeCoin(){return!!(this.inputIsWrappedNativeCoin&&this.outputIsNativeCoin)}},methods:{getTokenAllowance:K,getTokenBalance:z,changeInputTokenAllowance(n){this.inputTokenAllowance=Number(n)},getFilteredTokens(n){return n.filter(e=>e.swap)},async getOutputAmount(){if(this.inputTokenAmount){if(this.bothTokensAreNativeCoinOrWrappedTokenOrSame)this.outputTokenAmountWei=v(this.inputTokenAmount,this.inputToken.decimals);else{const n=await xt(this.inputToken,this.outputToken,this.inputTokenAmount,this.routerAddress),e=this.siteSettings.getSlippageBps();this.outputTokenAmountWei=n-n/BigInt(1e4)*BigInt(e)}this.priceImpact=await Ct(this.inputToken,this.outputToken,this.inputTokenAmount,this.routerAddress)}else this.outputTokenAmountWei=null},getOutputAmountWithTimeout(){this.debounce&&clearTimeout(this.debounce);const n=this;this.debounce=setTimeout(()=>{n.getOutputAmount()},n.timeout)},async selectInputToken(n){this.inputTokenAllowance=0,this.outputTokenAmountWei=null,this.inputToken=n,this.inputTokenAmount=null,this.isConnected&&(this.inputTokenBalance=await this.getTokenBalance(n,this.address)),n.address==c?this.inputTokenAllowance=Number(q):this.inputTokenAllowance=await this.getTokenAllowance(n,this.address,this.routerAddress)},selectOutputToken(n){this.outputToken=n,this.outputTokenAmountWei=null},setMaxInputTokenAmount(){this.inputTokenAmount=String(this.inputTokenBalance),this.getOutputAmount()},subtractInputTokenBalance(){this.inputTokenBalance=Number(this.inputTokenBalance)-Number(this.inputTokenAmount)},togglePreswapCheck(){this.preswapCheck=!this.preswapCheck}},setup(){const n=D(),{address:e,chainId:i,isConnected:a}=R({config:n}),o=M();return{address:e,chainId:i,isConnected:a,siteSettings:o}},watch:{async isConnected(){this.address&&this.inputToken&&(this.inputTokenBalance=await this.getTokenBalance(this.inputToken,this.address))}}},Zt={class:"input-group mb-1"},qt={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Gt={class:"dropdown-menu p-2"},Jt=["onClick"],Qt={class:"cursor-pointer hover-color"},$t={class:"input-group mt-4"},te={class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ee={class:"dropdown-menu p-2"},ne=["onClick"],se=["value","placeholder"],oe={key:0},ie={class:"d-flex justify-content-center mt-4"},ae={key:2,disabled:!0,class:"btn btn-outline-primary",type:"button"},ue=["data-bs-target"],re=["disabled","data-bs-target"],le={key:5,disabled:!0,class:"btn btn-outline-primary",type:"button"},de={key:6,disabled:!0,class:"btn btn-outline-primary",type:"button"},pe={key:7,disabled:!0,class:"btn btn-outline-primary",type:"button"},ce={key:1,class:"text-center mt-4"};function me(n,e,i,a,o,t){const u=x("ConnectWalletButton"),k=x("SwitchChainButton"),w=x("TokenApprovalModal"),m=x("UniV2SwapTokensModal");return l(),p("div",null,[s("div",Zt,[s("button",qt,d(o.inputToken?.symbol),1),s("ul",Gt,[I(s("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":e[0]||(e[0]=r=>o.filterTextInput=r)},null,512),[[B,o.filterTextInput]]),(l(!0),p(N,null,O(t.filteredTokensInput,r=>(l(),p("li",{key:r.address,class:"cursor-pointer"},[s("span",{onClick:b=>t.selectInputToken(r),class:"dropdown-item"},d(r.symbol)+" ("+d(r.name)+")",9,Jt)]))),128))]),I(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.inputTokenAmount=r),type:"text",class:"form-control",placeholder:"0.00",onKeyup:e[2]||(e[2]=(...r)=>t.getOutputAmountWithTimeout&&t.getOutputAmountWithTimeout(...r))},null,544),[[B,o.inputTokenAmount]]),s("button",{onClick:e[3]||(e[3]=(...r)=>t.setMaxInputTokenAmount&&t.setMaxInputTokenAmount(...r)),class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},[...e[8]||(e[8]=[s("small",null,"MAX",-1)])])]),s("small",{onClick:e[4]||(e[4]=(...r)=>t.setMaxInputTokenAmount&&t.setMaxInputTokenAmount(...r))},[e[9]||(e[9]=s("em",null,"Balance: ",-1)),s("em",Qt,d(t.formatInputTokenBalance)+" "+d(o.inputToken?.symbol),1)]),s("h4",{onClick:e[5]||(e[5]=(...r)=>t.getOutputAmount&&t.getOutputAmount(...r)),class:"text-center mt-2 cursor-pointer"},[...e[10]||(e[10]=[s("i",{class:"bi bi-arrow-down"},null,-1)])]),s("div",$t,[s("button",te,d(o.outputToken?.symbol),1),s("ul",ee,[I(s("input",{class:"form-control mb-2",placeholder:"Filter tokens","onUpdate:modelValue":e[6]||(e[6]=r=>o.filterTextOutput=r)},null,512),[[B,o.filterTextOutput]]),(l(!0),p(N,null,O(t.filteredTokensOutput,r=>(l(),p("li",{key:r.address,class:"cursor-pointer"},[s("span",{onClick:b=>t.selectOutputToken(r),class:"dropdown-item"},d(r.symbol)+" ("+d(r.name)+")",9,ne)]))),128))]),s("input",{type:"text",class:"form-control",value:t.outputTokenAmount,placeholder:o.outputText,disabled:""},null,8,se)]),t.outputTokenAmount&&!t.bothTokensAreNativeCoinOrWrappedTokenOrSame?(l(),p("small",oe,[s("em",null," You will get at least "+d(t.outputTokenAmount)+" "+d(o.outputToken.symbol)+", but probably more ("+d(a.siteSettings.slippage)+"% slippage). ",1)])):h("",!0),s("div",ie,[!a.isConnected&&!t.isSupportedChain?(l(),F(u,{key:0,class:"btn-outline-primary",btnText:"Connect wallet"})):h("",!0),a.isConnected&&!t.isSupportedChain?(l(),F(k,{key:1})):h("",!0),a.isConnected&&t.isSupportedChain&&!o.inputTokenAmount?(l(),p("button",ae," Swap tokens ")):h("",!0),a.isConnected&&t.isSupportedChain&&o.inputTokenAmount&&t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&t.allowanceTooLow&&!t.unwrappingWrappedNativeCoin&&!t.priceImpactTooHigh?(l(),p("button",{key:3,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#tokenApprovalModal"+i.swapId}," Approve token ",8,ue)):h("",!0),_(w,{modalId:i.swapId,token:o.inputToken,amount:o.inputTokenAmount,routerAddress:i.routerAddress,onSetApprovalAmount:t.changeInputTokenAllowance},null,8,["modalId","token","amount","routerAddress","onSetApprovalAmount"]),a.isConnected&&t.isSupportedChain&&o.inputTokenAmount&&t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&!t.priceImpactTooHigh&&!t.priceImpactTooHigh&&(!t.allowanceTooLow||t.unwrappingWrappedNativeCoin)?(l(),p("button",{key:4,disabled:!o.inputToken||!o.outputToken||!o.inputTokenAmount||!t.outputTokenAmount||!a.isConnected||t.bothTokensAreTheSame||!t.inputAmountLessThanBalance,class:"btn btn-outline-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#swapTokensModal"+i.swapId,onClick:e[7]||(e[7]=(...r)=>t.getOutputAmount&&t.getOutputAmount(...r))}," Swap tokens ",8,re)):h("",!0),_(m,{modalId:i.swapId,inputToken:o.inputToken,inputTokenAmount:o.inputTokenAmount,outputToken:o.outputToken,outputTokenAmount:t.outputTokenAmount,outputTokenAmountWei:o.outputTokenAmountWei,routerAddress:i.routerAddress,onChangeInputTokenBalance:t.subtractInputTokenBalance},null,8,["modalId","inputToken","inputTokenAmount","outputToken","outputTokenAmount","outputTokenAmountWei","routerAddress","onChangeInputTokenBalance"]),a.isConnected&&t.isSupportedChain&&o.inputTokenAmount&&!t.inputAmountLessThanBalance&&!t.bothTokensAreTheSame&&!t.priceImpactTooHigh?(l(),p("button",le," Balance too low ")):h("",!0),a.isConnected&&t.isSupportedChain&&o.inputTokenAmount&&t.bothTokensAreTheSame&&!t.priceImpactTooHigh?(l(),p("button",de," Both tokens are the same ")):h("",!0),a.isConnected&&t.isSupportedChain&&o.inputTokenAmount&&t.priceImpactTooHigh?(l(),p("button",pe," Price impact too high ")):h("",!0)]),i.poweredBy?(l(),p("p",ce,[s("small",null,[s("em",null,"Powered by "+d(i.poweredBy)+".",1)])])):h("",!0)])}const he=S(Xt,[["render",me]]),ke={name:"SwapUniV2",components:{UniV2Swap:he},setup(){return{tokens:tt}}},be={class:"scroll-500"},Te={class:"card border"},fe={class:"card-body mb-3"},ge={class:"fs-3"},ye={class:"d-flex justify-content-center mt-5"},we={class:"col-12 col-lg-8"};function Ae(n,e,i,a,o,t){const u=J,k=Q,w=$,m=x("UniV2Swap");return l(),p(N,null,[_(w,null,{default:L(()=>[_(u,null,{default:L(()=>[W("Swap | "+d(n.$config.public.projectMetadataTitle),1)]),_:1}),_(k,{property:"og:title",content:"Token Swap | "+n.$config.public.projectMetadataTitle},null,8,["content"])]),_:1}),s("div",be,[s("div",Te,[s("div",fe,[s("p",ge,[s("i",{class:"bi bi-arrow-left-circle cursor-pointer",onClick:e[0]||(e[0]=r=>n.$router.back())})]),e[1]||(e[1]=s("h3",{class:"mt-3"},"Token Swap",-1)),s("div",ye,[s("div",we,[_(m,{routerAddress:n.$config.public.swapRouterAddress,swapId:"SwapPage1",tokens:a.tokens},null,8,["routerAddress","tokens"])])])])])])],64)}const xe=S(ke,[["render",Ae]]);export{xe as default};
