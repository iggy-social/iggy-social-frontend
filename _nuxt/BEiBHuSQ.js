import{_ as L,j as C,m as F,Q as k,c,o as r,a as s,g as u,p as M,v as T,d as y,r as w,b as d,w as N,T as $,t as g,M as E,H as D,e as B,F as _,R as I,f as x,U as A,V as S,X as j,Y as P,n as V}from"#entry";import{I as U}from"./C628wGYq.js";const q={name:"SearchNftModal",data(){return{componentId:null,searchText:"",waitingFind:!1,findError:!1}},mounted(){this.componentId=this.$.uid},methods:{async findNft(){if(this.waitingFind=!0,this.findError=!1,this.searchText){if(String(this.searchText).toLowerCase().startsWith("0x"))return document.getElementById("closeModal-"+this.componentId).click(),this.$router.push({path:"/nft/collection/",query:{id:this.searchText}}),this.searchText=null,this.waitingFind=!1;try{const e={address:this.$config.public.nftLaunchpadBondingAddress,abi:[{name:"getNftContractAddress",type:"function",stateMutability:"view",inputs:[{name:"_uniqueId",type:"string"}],outputs:[{name:"",type:"address"}]}],functionName:"getNftContractAddress",args:[this.searchText]},t=await this.readData(e);if(t&&t!==k)return document.getElementById("closeModal-"+this.componentId).click(),this.$router.push({path:"/nft/collection/",query:{id:t}}),this.searchText=null,this.waitingFind=!1}catch(e){console.error("Error finding NFT:",e)}return this.findError=!0,this.waitingFind=!1}}},setup(){const{readData:e}=C(),{chainId:t,isActivated:a}=F();return{readData:e,chainId:t,isActivated:a}}},W=["aria-labelledby"],H={class:"modal-dialog"},R={class:"modal-content"},z={class:"modal-header"},Q=["id"],X=["id"],Y={class:"modal-body"},G={class:"mb-3"},J=["for"],K=["for"],O={key:0},Z={class:"modal-footer"},tt=["disabled"],et={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function st(e,t,a,i,n,l){return r(),c("div",{class:"modal fade",id:"searchNftModal",tabindex:"-1","aria-labelledby":"modalLabel-"+n.componentId,"aria-hidden":"true"},[s("div",H,[s("div",R,[s("div",z,[s("h1",{class:"modal-title fs-5",id:"modalLabel-"+n.componentId},"Find NFT collection",8,Q),s("button",{id:"closeModal-"+n.componentId,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,8,X)]),s("div",Y,[s("div",G,[s("label",{for:"input-"+n.componentId,class:"form-label"},"Enter NFT collection address or unique ID:",8,J),M(s("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>n.searchText=h),type:"text",class:"form-control",for:"input-"+n.componentId},null,8,K),[[T,n.searchText]])]),n.findError?(r(),c("p",O,"Error: Collection not found...")):u("",!0)]),s("div",Z,[t[3]||(t[3]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{onClick:t[1]||(t[1]=(...h)=>l.findNft&&l.findNft(...h)),type:"button",class:"btn btn-primary",disabled:n.waitingFind},[n.waitingFind?(r(),c("span",et)):u("",!0),t[2]||(t[2]=y(" Find ",-1))],8,tt)])])])],8,W)}const nt=L(q,[["render",st]]),at={name:"Nft",props:["hideBackButton"],data(){return{allNftsArrayLength:0,allNftsIndexStart:0,allNftsIndexEnd:0,featuredNfts:[],lastNfts:[],waitingData:!1}},components:{Image:U,SearchNftModal:nt},mounted(){this.$config.public.nftLaunchpadBondingAddress&&(this.fetchFeaturedNfts(),this.fetchLastNfts())},computed:{showLoadMoreButton(){return this.allNftsIndexEnd>0}},methods:{async fetchFeaturedNfts(){this.waitingData=!0;try{const e={address:this.$config.public.nftLaunchpadBondingAddress,abi:[{name:"getFeaturedNftContracts",type:"function",stateMutability:"view",inputs:[{name:"amount",type:"uint256"}],outputs:[{name:"",type:"address[]"}]}],functionName:"getFeaturedNftContracts",args:[BigInt(4)]},t=await this.readData(e);t&&await this.parseNftsArray(t,this.featuredNfts)}catch(e){console.error("Error fetching featured NFTs:",e)}finally{this.waitingData=!1}},async fetchLastNfts(){this.waitingData=!0;try{const e={address:this.$config.public.nftLaunchpadBondingAddress,abi:[{name:"getLastNftContracts",type:"function",stateMutability:"view",inputs:[{name:"amount",type:"uint256"}],outputs:[{name:"",type:"address[]"}]},{name:"getNftContracts",type:"function",stateMutability:"view",inputs:[{name:"fromIndex",type:"uint256"},{name:"toIndex",type:"uint256"}],outputs:[{name:"",type:"address[]"}]},{name:"getNftContractsArrayLength",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]}]};if(Number(this.allNftsArrayLength)===0){const t={...e,functionName:"getNftContractsArrayLength",args:[]},a=await this.readData(t);this.allNftsArrayLength=a?Number(a):0}if(this.allNftsArrayLength===1){const t={...e,functionName:"getLastNftContracts",args:[BigInt(1)]},a=await this.readData(t);a&&await this.parseNftsArray(a)}else if(this.allNftsArrayLength>1){this.allNftsIndexEnd===0&&(this.allNftsIndexEnd=this.allNftsArrayLength-1,this.allNftsArrayLength<this.$config.public.nftLaunchpadLatestItems?this.allNftsIndexStart=0:this.allNftsIndexStart=this.allNftsArrayLength-this.$config.public.nftLaunchpadLatestItems);const t={...e,functionName:"getNftContracts",args:[BigInt(this.allNftsIndexStart),BigInt(this.allNftsIndexEnd)]},a=await this.readData(t);if(a){const i=[...a];i.reverse(),await this.parseNftsArray(i),this.allNftsIndexEnd>this.$config.public.nftLaunchpadLatestItems?this.allNftsIndexEnd=Math.max(0,this.allNftsIndexEnd-this.$config.public.nftLaunchpadLatestItems):this.allNftsIndexEnd=0,this.allNftsIndexStart>this.$config.public.nftLaunchpadLatestItems?this.allNftsIndexStart=Math.max(0,this.allNftsIndexStart-this.$config.public.nftLaunchpadLatestItems):this.allNftsIndexStart=0}}}catch(e){console.error("Error fetching last NFTs:",e)}finally{this.waitingData=!1}},formatPrice(e){if(e===null)return null;const t=Number(V(e));return t>100?t.toFixed(0):t>1?t.toFixed(2):t>.1?t.toFixed(4):t>.01?t.toFixed(5):t>.001?t.toFixed(6):t>1e-4?t.toFixed(7):t>1e-5?t.toFixed(8):t>1e-6?t.toFixed(9):t},async parseNftsArray(e,t=this.lastNfts){const a={abi:[{name:"collectionPreview",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]},{name:"getMintPrice",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]},{name:"name",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"string"}]}]};for(let i=0;i<e.length;i++)try{let n=S(window,e[i]);n||(n={address:e[i]});let l;if(n?.name)l=n.name;else{const p={...a,address:e[i],functionName:"name",args:[]};l=await this.readData(p),l&&(n.name=l)}const h={...a,address:e[i],functionName:"getMintPrice",args:[]},f=await this.readData(h);let m;if(n?.image)m=n.image;else{const p={...a,address:e[i],functionName:"collectionPreview",args:[]};if(m=await this.readData(p),m){let b=await j(m);b?.success&&(n.image=b?.url)}}P(window,e[i],n),t.push({address:e[i],image:m,name:l,price:f})}catch(n){console.error(`Error parsing NFT ${e[i]}:`,n)}}},setup(){const{address:e,chainId:t,isConnected:a}=A(),{readData:i}=C();return{address:e,chainId:t,isConnected:a,readData:i}}},it={class:"card border scroll-500"},ot={class:"card-body"},rt={class:"d-flex flex-row flex-wrap mt-3"},lt={class:"mb-3"},ct={key:1,class:"mb-3"},dt={key:2,class:"row"},ut={class:"card border mb-3"},ft={class:"card-body rounded-bottom-3"},ht={class:"card-text mb-1"},mt={class:"card-text"},pt={key:3,class:"mt-3 mb-3"},gt={class:"row"},bt={class:"card border mb-3"},Nt={class:"card-body rounded-bottom-3"},yt={class:"card-text mb-1"},_t={class:"card-text"},wt={key:4,class:"d-flex justify-content-center mb-3"},It={key:5,class:"d-grid gap-2"},xt=["disabled"],Lt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function Ct(e,t,a,i,n,l){const h=$,f=E,m=D,p=B,b=w("Image"),v=w("SearchNftModal");return r(),c(_,null,[d(m,null,{default:N(()=>[d(h,null,{default:N(()=>[y("NFT Launchpad | "+g(e.$config.public.projectMetadataTitle),1)]),_:1}),d(f,{property:"og:title",content:"NFT Launchpad | "+e.$config.public.projectMetadataTitle},null,8,["content"]),d(f,{name:"description",content:"Check out these awesome NFT collections on "+e.$config.public.projectName+"!"},null,8,["content"]),d(f,{property:"og:image",content:e.$config.public.projectUrl+e.$config.public.previewImageNftLaunchpad},null,8,["content"]),d(f,{property:"og:description",content:"Check out these awesome NFT collections on "+e.$config.public.projectName+"!"},null,8,["content"]),d(f,{name:"twitter:image",content:e.$config.public.projectUrl+e.$config.public.previewImageNftLaunchpad},null,8,["content"]),d(f,{name:"twitter:description",content:"Check out these awesome NFT collections on "+e.$config.public.projectName+"!"},null,8,["content"])]),_:1}),s("div",it,[s("div",ot,[a.hideBackButton?u("",!0):(r(),c("p",{key:0,class:"fs-3",onClick:t[0]||(t[0]=o=>e.$router.back())},[...t[2]||(t[2]=[s("i",{class:"bi bi-arrow-left-circle cursor-pointer"},null,-1)])])),s("h3",rt,[t[5]||(t[5]=s("div",{class:"mb-3 me-auto"},"NFT Launchpad",-1)),s("div",lt,[d(p,{class:"btn btn-outline-primary btn-sm",to:"/nft/create"},{default:N(()=>[...t[3]||(t[3]=[s("i",{class:"bi bi-plus-circle"},null,-1),y(" Create ",-1)])]),_:1}),t[4]||(t[4]=s("button",{class:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#searchNftModal"},[s("i",{class:"bi bi-search"}),y(" Find ")],-1))])]),n.featuredNfts.length>0?(r(),c("h4",ct,"Featured")):u("",!0),n.featuredNfts.length>0?(r(),c("div",dt,[(r(!0),c(_,null,I(n.featuredNfts,o=>(r(),x(p,{key:o.address,class:"col-md-3 text-decoration-none",to:"/nft/collection?id="+o.address},{default:N(()=>[s("div",ut,[d(b,{url:o.image,alt:o.name,cls:"card-img-top"},null,8,["url","alt"]),s("div",ft,[s("p",ht,[s("strong",null,g(o.name),1)]),s("small",mt,g(l.formatPrice(o.price))+" "+g(e.$config.public.tokenSymbol),1)])])]),_:2},1032,["to"]))),128))])):u("",!0),n.lastNfts.length>0?(r(),c("h4",pt,"Latest")):u("",!0),s("div",gt,[(r(!0),c(_,null,I(n.lastNfts,o=>(r(),x(p,{key:o.address,class:"col-md-3 text-decoration-none",to:"/nft/collection?id="+o.address},{default:N(()=>[s("div",bt,[d(b,{url:o.image,alt:o.name,cls:"card-img-top"},null,8,["url","alt"]),s("div",Nt,[s("p",yt,[s("strong",null,g(o.name),1)]),s("small",_t,g(l.formatPrice(o.price))+" "+g(e.$config.public.tokenSymbol),1)])])]),_:2},1032,["to"]))),128))]),n.waitingData?(r(),c("div",wt,[...t[6]||(t[6]=[s("span",{class:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"},null,-1)])])):u("",!0),l.showLoadMoreButton?(r(),c("div",It,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...o)=>l.fetchLastNfts&&l.fetchLastNfts(...o)),disabled:n.waitingData},[n.waitingData?(r(),c("span",Lt)):u("",!0),t[7]||(t[7]=y(" Load more ",-1))],8,xt)])):u("",!0)])]),d(v)],64)}const kt=L(at,[["render",Ct]]);export{kt as default};
